<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    
    <!-- Meta Tags Principales y de PWA -->
    <title>Directivas de Funcionamiento OS10</title>
    <meta name="description" content="Requisitos e información para Directivas de Funcionamiento de Seguridad Privada OS10.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff"/>
    <meta name="application-name" content="Directivas OS10">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- <link rel="manifest" href="manifest.json"> -->

    <!-- Configuración para iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Directivas OS10">

    <!-- Favicons y Iconos Estándar -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="assets/images/icon-192x192.png">
    
    <!-- Dependencias y Estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            background-image: url('assets/images/101.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .card-container { 
            max-width: 600px; 
            width: 90%; /* Asegura que se vea bien en móviles */
            margin: 2rem auto; /* Centrado horizontal y margen vertical */
        }
        .logo-os10-container { 
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            height: 60px;
            z-index: 10;
        }
        .section-card { 
            border-left-width: 4px; 
            padding: 1rem; 
            border-radius: 0.5rem; 
        }
        
        .voice-button { transition: all 0.3s ease; }
        .voice-button:hover { transform: scale(1.05); }
        .voice-button:active { transform: scale(0.95); }
        .voice-button.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .response-button { transition: all 0.2s ease; }
        .response-button:hover { transform: translateX(4px); }

        /* Estilos Chatbot */
        #chat-widget-container { 
            position: fixed; 
            bottom: 1.5rem; 
            right: 1.5rem;
            z-index: 1000; 
            display: flex; 
            flex-direction: column; 
            align-items: flex-end;
        }
        #chat-popup { 
            width: 350px; 
            height: 500px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
        }
        #chat-toggle-button { 
            width: 80px;
            height: 80px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
        }
        .chat-messages-container { 
            scroll-behavior: smooth; 
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 8px 12px;
        }
        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 2px;
            background-color: #9ca3af;
            border-radius: 50%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }


        /* Ajuste para pantallas más grandes */
        @media (min-width: 1024px) {
            #chat-toggle-button {
                width: 90px;
                height: 90px;
            }
        }
    </style>
</head>
<body>
    
    <!-- Contenido de la página -->
    <div class="card-container bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-xl shadow-lg space-y-6 relative p-6">
        <!-- Logo dentro del contenedor -->
        <a href="https://www.zosepcar.cl/OS10.php" target="_blank" aria-label="Visitar página de ZOSEPCAR" class="logo-os10-container">
            <img src="assets/images/logo-os10.png" alt="Logo OS10" class="h-full" loading="lazy">
        </a>

        <div id="visitor-counter-container" class="absolute top-5 right-6 text-xs text-gray-500 dark:text-gray-400">
            <p class="flex items-center">
                <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                <span>Visitas: <span id="visit-counter" class="font-bold">--</span></span>
            </p>
        </div>
        
        <header class="text-center pt-8">
            <h1 class="text-2xl font-bold text-gray-800 dark:text-white">DIRECTIVA DE FUNCIONAMIENTO</h1>
            <h2 class="text-lg font-semibold text-gray-600 dark:text-gray-300">Instalación - Eventos - Partidos de Fútbol Profesional</h2>
        </header>
        
        <main class="space-y-4">
            <section class="section-card border-blue-500 bg-blue-100/80 dark:bg-blue-900/50">
                <h3 class="font-bold text-blue-800 dark:text-blue-300">1️⃣ Presentar Directiva DD.FF.</h3>
                <ul class="list-disc pl-5 text-sm text-gray-700 dark:text-gray-300">
                    <li>Vigencia 03 años en instalación.</li>
                    <li>Presentar con 15 días hábiles de anticipación.</li>
                    <li>
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=9081" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 93/1985</a>,
                        <a href="https://www.zosepcar.cl/content/OS10/Decreto-261.pdf" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 261</a>,
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=1200633" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 32/2024</a>.
                   </li>
               </ul>
            </section>
            
            <section class="section-card border-green-500 bg-green-100/80 dark:bg-green-900/50">
                <h3 class="font-bold text-green-800 dark:text-green-300">2️⃣ Documentación</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">02 Solicitudes Simple.</p>
                        <a href="https://dal5.short.gy/Solic" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Solicitud">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">01 copia DD.FF. completa.</p>
                        <a href="https://dal5.short.gy/D" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Requisitos según tipo.</p>
                        <a href="https://dal5.short.gy/Re24" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Requisi.">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Uniforme Decreto 32/2024.</p>
                        <a href="https://dal5.short.gy/0u" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Ejemplo Uniforme">Ejemplo</a>
                    </li>
                    <li>
                        <p class="mb-1">Análisis de Vulnerabilidades.</p>
                        <a href="https://dal5.short.gy/6ydn" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Análisis">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Solicitud Uniforme Distinto.</p>
                        <a href="https://d6.short.gy/G8" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Descargar</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-red-500 bg-red-100/80 dark:bg-red-900/50">
                <h3 class="font-bold text-red-800 dark:text-red-300">3️⃣ Todo escaneado en Digital.</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">Escanear en 01 archivo PDF.</p>
                        <a href="https://dal5.short.gy/I" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600 transition-colors" title="Herramienta para unir PDF">Herramienta</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-yellow-500 bg-yellow-100/80 dark:bg-yellow-900/50">
                <h3 class="font-bold text-yellow-800 dark:text-yellow-300">4️⃣ Tramitar Credenciales</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">Resol. 1480 (10.04.2025).</p>
                        <a href="https://d6.short.gy/dsds" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" title="Descargar Documentos">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Tramitar credenciales.</p>
                        <a href="credenciales.html" class="inline-block px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" id="tramitarCredencialesBtn" title="Tramitar Credenciales">Tramitar</a>
                    </li>
                </ul>
            </section>
        </main>
        
        <footer class="relative mt-6 border-t border-gray-200 dark:border-gray-700 pt-4">
            <div class="text-center text-sm text-gray-600 dark:text-gray-400 leading-tight pr-16">
                <span>Haga clic para descargar.</span><br>
                <span>©2025 - Daniel Figueroa Ch.</span><br>
                <span>Ingeniero en Informática.</span>
            </div>
            <img src="assets/images/qr.png" alt="Código QR" class="absolute right-4 bottom-4 w-11 h-11 md:w-14 md:h-14" title="Más información" loading="lazy">
        </footer>
   </div>

    <!-- ===== CHATBOT FLOTANTE CON VOZ ===== -->
    <div id="chat-widget-container">
        <div id="chat-popup" class="hidden flex flex-col bg-white/[.95] dark:bg-gray-800/[.95] backdrop-blur-lg border border-green-500/50 rounded-2xl">
            <!-- Header -->
            <header class="p-3 border-b border-green-500/30 flex items-center justify-between text-gray-800 dark:text-white">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-white border-2 border-green-400/80 flex items-center justify-center flex-shrink-0 p-1">
                        <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                    </div>
                    <div>
                        <h1 class="text-base font-bold">Asistente OS10 🎤</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Con funciones de voz</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="speak-btn" class="voice-button bg-green-500 hover:bg-green-600 rounded-lg p-2 text-white" title="🔊 Leer último mensaje"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg></button>
                    <button id="chat-close-btn-internal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                </div>
            </header>
            <main id="chat-messages" class="chat-messages-container flex-1 p-4 overflow-y-auto space-y-4"></main>
            <footer class="p-3 border-t border-green-500/30">
                <div class="mb-2 text-xs text-center text-gray-500 dark:text-gray-400"><span>🔊 Auto-lectura activada | Alt+V para micrófono</span></div>
                <div class="flex items-center space-x-2 bg-gray-200 dark:bg-gray-700 rounded-xl p-2">
                    <button id="voice-btn" class="voice-button bg-blue-500 hover:bg-blue-600 rounded-lg p-2 text-white" title="🎤 Hablar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/></svg></button>
                    <input type="text" id="user-input" placeholder="Escribe o usa el micrófono..." class="flex-1 w-full bg-transparent text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none px-2 text-base">
                    <button id="send-button" class="flex-shrink-0 bg-green-500 hover:bg-green-600 transition-colors rounded-lg p-2 text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                </div>
            </footer>
        </div>
        <button id="chat-toggle-button" class="bg-white dark:bg-gray-800 rounded-2xl flex items-center justify-center p-1 mt-4" title="Abrir Asistente Virtual con Voz">
            <img src="assets/images/poli.png" alt="Icono del Chatbot" class="h-full w-full object-contain">
        </button>
    </div>
    <div id="chat-backdrop" class="hidden fixed inset-0 bg-black/60 z-40"></div>

    <!-- Scripts -->
    <script type="module">
        // SCRIPT FIREBASE (Contador de visitas)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyBB2AegLOQ-b6ZGI_cuPycSFJFuRsUlu5U",
          authDomain: "cuenta-946e2.firebaseapp.com",
          projectId: "cuenta-946e2",
          storageBucket: "cuenta-946e2.firebasestorage.app",
          messagingSenderId: "816979648502",
          appId: "1:816979648502:web:809beffeea8ba7968031d7",
          measurementId: "G-RX9KZSC0F4"
        };
        
        async function runCounter() {
            const counterSpan = document.getElementById('visit-counter');
            try {
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const auth = getAuth(app);
                await signInAnonymously(auth);
                const counterRef = doc(db, `page-visits/${firebaseConfig.projectId}/visits/counter`);
                const newCount = await runTransaction(db, async (transaction) => {
                    const counterDoc = await transaction.get(counterRef);
                    let count = 1;
                    if (counterDoc.exists()) {
                        count = counterDoc.data().count + 1;
                        transaction.update(counterRef, { count: count });
                    } else {
                        transaction.set(counterRef, { count: count });
                    }
                    return count;
                });
                if (counterSpan) counterSpan.textContent = newCount.toLocaleString('es-CL');
            } catch (error) {
                console.error("ERROR: Falló el proceso del contador.", error);
                if (counterSpan) counterSpan.textContent = "Error";
            }
        }
        runCounter();
    </script>

    <script>
        // SCRIPT DEL CHATBOT Y LÓGICA PRINCIPAL
        document.addEventListener('DOMContentLoaded', function() {

            // Lógica para detectar preferencia de modo oscuro del sistema
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
            } else {
                document.documentElement.classList.remove('dark')
            }

            // --- Lógica del Chatbot ---
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const speechSynth = window.speechSynthesis;
            let recognition;
            let isListening = false;
            let availableVoices = [];

            function loadVoices() {
                availableVoices = speechSynth.getVoices();
                if (availableVoices.length > 0) {
                     console.log("Voces cargadas.");
                }
            }

            loadVoices();
            if (speechSynth.onvoiceschanged !== undefined) {
                speechSynth.onvoiceschanged = loadVoices;
            }


            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.lang = 'es-CL';
                recognition.continuous = false;
                recognition.interimResults = false;
            } else {
                console.warn("El reconocimiento de voz no es compatible con este navegador.");
                document.getElementById('voice-btn').style.display = 'none';
            }

            const responses = {
                'rule_4': { keywords: ["guias","guia","componentes del sistema","componentes"], response: '*ESCRIBA EL NOMBRE DEL COMPONENTE DEL SISTEMA Y SE DESCARGARA UNA GUIA, PARA QUE PUEDA REALIZAR SU TRAMITE*👮🏻‍♂️ \n ⬇️\n*1.-* VIGILANTE PRIVADO\n*2.-* GUARDIA DE SEGURIDAD\n*3.-* JEFE DE SEGURIDAD \n*4.-* ENCARGADO DE SEGURIDAD\n*5.-* SUPERVISOR\n*6.-* ASESOR \n*7.-* CAPACITADOR\n*8.-* TÉCNICO \n*9.-* OPERADOR DE CAJEROS \n*10.-* INSTALADOR TÉC. DE SEGURIDAD\n*11.-* OPERADOR CCTV.\n*12.-* EMPRESAS' },
                'rule_5': { keywords: ["guardia de seguridad","guardia","guardia seguridad"], response: '🤖 🧙🏻‍♂️ Ok... en este link encontrará la guía de *GUARDIA DE SEGURIDAD* la puede descargar: https://www.zosepcar.cl/content/OS10/TRAM_guardia_de_seguridad.pdf' },
                'rule_6': { keywords: ["jefe de seguridad"], response: 'OK..en este link encontrará la guía de *JEFE DE SEGURIDAD* la puede descargar: https://www.zosepcar.cl/content/OS10/TRAM_jefe_de_seguridad.pdf' },
                'rule_7': { keywords: ["supervisor","acreditación supervisor","supervisor seguridad","para supervisor","acreditar un supervisor","supervisores","acreditar supervisores"], response: '🤖. *SUPERVISOR* \n1.- *GUIA*\nhttps://www.zosepcar.cl/content/OS10/TRAM_supervisor.pdf\n2.- *CREDENCIAL*\nhttps://os10.short.gy/Sup' },
                'rule_8': { keywords: ["encargado de seguridad","encargado"], response: '🤖 *ENCARGADO DE SEGURIDAD*\n*CREDENCIAL:*\nhttps://bit.ly/3H6pIOu\n*GUIA:*\nhttps://www.zosepcar.cl/content/OS10/TRAM_encargado_de_seguridad.pdf' },
                'rule_9': { keywords: ["capacitador"], response: '🤖 *CAPACITADOR*\nhttps://www.zosepcar.cl/content/OS10/TRAM_capacitador.pdf' },
                'rule_10': { keywords: ["tecnico"], response: '*TÉCNICO* https://www.zosepcar.cl/content/OS10/TRAM_tecnico.pdf' },
                'rule_11': { keywords: ["asesor"], response: '🤖 *ASESOR*\n**GUÍA:* \nhttps://www.zosepcar.cl/content/OS10/TRAM_asesor.pdf' },
                'rule_12': { keywords: ["instalador tecnico","técnico","instalador"], response: '*INSTALADOR TÉCNICO*\n https://www.zosepcar.cl/content/OS10/TRAM_instalador_tecnico.pdf' },
                'rule_13': { keywords: ["operador de cajeros"], response: '*OPERADOR DE CAJEROS AUTOMÁTICOS* \nhttps://www.zosepcar.cl/content/OS10/TRAM_operador_cajeros.pdf' },
                'rule_14': { keywords: ["operador cctv","cctv"], response: '🤖 *OPERADOR CCTV*\n*GUÍA:* https://www.zosepcar.cl/content/OS10/TRAM_operador_cctv.pdf' },
                'rule_15': { keywords: ["manuales"], response: '🤖 ⬇️ *ESCRIBE UNA OPCIÓN* 👮🏻‍♂️🚦\n*1M.-* MANUAL DE FUNCIONAMIENTO\n*2M.-* MANUAL DE CAPACITACIÓN \n*3M.-* MANUAL DE ORGANIZACIÓN' },
                'rule_16': { keywords: ["empresas","empresa"], response: '*EMPRESAS* https://www.zosepcar.cl/content/OS10/TRAM_empresas.pdf' },
                'rule_17': { keywords: ["1m"], response: '*MANUAL DE FUNCIONAMIENTO* https://www.zosepcar.cl/content/OS10/manual_funcionamiento.pdf' },
                'rule_18': { keywords: ["3m"], response: '*MANUAL DE ORGANIZACIÓN*\nhttps://www.zosepcar.cl/content/OS10/manual_organizacion.pdf' },
                'rule_19': { keywords: ["2m"], response: '*MANUAL DE CAPACITACIÓN*\nhttps://www.zosepcar.cl/content/OS10/manual_capacitacion.pdf' },
                'rule_20': { keywords: ["leyes"], response: '*ESCRIBE UN NUMERO LEY O DECRETO*.\n 🚦. ⬇️ \n \nDECTO. *261* DEL 31.0 un7.2020\nDECTO. *298* DEL 17.09.2019\n DECTO. *123* DEL 05.04.2019\nDECTO. *1045* DEL 12.09.2018\nDECTO. *867* DEL 12.09.2017\nDECTO. *1814* DEL 10.11.2014\nDECTO. *222* DEL 30.10.2014\nDECTO. *1122* DEL 19.10.1994\nDECTO. *41* DEL 05.03.1996\nDECTO. *1772* DEL 26.01.1995\nDECTO. *1773* DEL 14.11.1994\nDECTO. *93* DEL 21.10.1985\nD. LEY. *3607* DEL 08.01.1981\nLEY *19303* DEL 13.04.1994\nResol. *253* DEL 29.10.2013\nResol. *59* DEL 30.09.2014\nResol. *32* DEL 31.01.2024\nResol. *80* DEL 20.03.2024\nLEY. *21659* DEL 21.03.2024' },
                'rule_21': { keywords: ["261"], response: '*DECRETO NRO 261*. \n\n\nhttps://www.zosepcar.cl/content/OS10/Decreto-261.pdf' },
                'rule_22': { keywords: ["298"], response: '*DECRETO 298*. https://www.bcn.cl/leychile/navegar?idNorma=1136545&idParte=10054790&idVersion=2019-09-17' },
                'rule_23': { keywords: ["123"], response: '*DECRETO 123*. https://www.bcn.cl/leychile/navegar?idNorma=1130300' },
                'rule_24': { keywords: ["1045"], response: '*DECRETO 1045*. https://www.bcn.cl/leychile/navegar?idNorma=1122982&idParte=9948603&idVersion=2018-09-12' },
                'rule_25': { keywords: ["867"], response: '*DECRETO 867*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1116274' },
                'rule_26': { keywords: ["1814"], response: '*DECRETO 1814*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1069299' },
                'rule_27': { keywords: ["222"], response: '*DECRETO 222*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1055580' },
                'rule_28': { keywords: ["1122"], response: '*DECRETO 1122*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1072929' },
                'rule_29': { keywords: ["41"], response: '*DECRETO 41*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=19870' },
                'rule_30': { keywords: ["1772"], response: '*DECRETO 1772*. \nhttps://www.bcn.cl/leychile/navegar?idNorma=18592' },
                'rule_31': { keywords: ["1773"], response: '*DECRETO 1773*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=18594' },
                'rule_32': { keywords: ["93"], response: '*DECRETO 93*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=9081' },
                'rule_33': { keywords: ["3607"], response: '*D. LEY 3607*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=7193' },
                'rule_34': { keywords: ["19303"], response: '*LEY 19303*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=30670' },
                'rule_35': { keywords: ["253"], response: '*Resol. 253*. https://www.zosepcar.cl/content/OS10/resolucion_253.pdf' },
                'rule_36': { keywords: ["59"], response: '*Resol. 59*. https://www.zosepcar.cl/content/OS10/resolucion_59.pdf' },
                'rule_37': { keywords: ["32"], response: '*Decreto. 32*. https://www.bcn.cl/leychile/navegar?idNorma=1200633' },
                'rule_38': { keywords: ["80"], response: '*Resol. 80*. https://www.zosepcar.cl/content/OS10/resolucion_80.pdf' },
                'rule_39': { keywords: ["21659", "nueva ley de seguridad"], response: 'Entra en vigencia el 28-NOV-2025 *LEY 21659*. https://dal5.short.gy/LeySeg' },
                'rule_60': { keywords: ["cursos","curso"], response: '🤖 ⬇️ *ESCRIBE UNA OPCIÓN* 👮🏻‍♂️🚦\n*CF.-* CURSO FORMACIÓN GUARDIA\n*CJ.-* CURSO JEFE DE SEGURIDAD\n*CE.-* CURSO ENCARGADO\n*CS.-* CURSO SUPERVISOR\n*CT.-* CURSO TÉCNICO\n*CI.-* CURSO INSTALADOR\n*CC.-* CURSO OPERADOR CAJEROS\n*CV.-* CURSO OPERADOR CCTV\n*CP.-* CURSO PERFECCIONAMIENTO' },
                'rule_65': { keywords: ["fono", "telefono","numero","ubicados","dirección","atención","horario","horarios","ubicación","direccion oficina","cual es la dirección del os10","horario atención publico", "donde estan", "donde esta el os10 coquimbo", "donde esta el os10","donde", "direccion"], response: '🤖 👉🏼 *OS10 COQUIMBO*\nDe lunes a jueves de 09:00 horas a 13:00 horas.\nCienfuegos 180, La Serena.\nFonos: 512651024-512651022-\nCredenciales:512651023\nhttps://maps.app.goo.gl/QUhujWbTF1FjDA7E6' },
                'rule_66': { keywords: ["menu","menú","menus"], response: '*ESCRIBA LO QUE ESTA CON NEGRILLAS*\nconsultar patente: *ppu*\nConsultar nombre o rut: *rut*\nConsultar guardia *registro*\nmenú OS10: *Os10*\nComisaria cuadrantes: *comisaria*\nCiberseguridad: *ciberseguridad*\nDGAC Seg. Priv. *Dgac*\nModifica 261: *Decreto 32*\nResol.3632: *no hay sistema*\nDirectiva: *directiva*\n*Bots*: Seguridad privada, Ciberseguridad, tránsito, Ley Karyn' },
                'rule_68': { keywords: ["imc"], response: '*CALCULAR IMC*\nhttps://nutricionistavirtual.cl/calculadora/' },
                'rule_69': { keywords: ["curso os10","vigencia curso","tiene curso","si tiene curso"], response: '🤖 *GUARDIA / EMPRESA* 👮🏻‍♂️ 👇🏽 VIGENCIA GG.SS./ VV.PP. /EMP. \nhttps://zosepcar.cl/OS10.php#buscador\n\n🏭 *RAZON SOC. / RUT EMP.*👇🏽\nboletaofactura.com\ngenealog.cl\nmercantil.com\n \n⚖️ *JUZGADO DE TURNO LA SERENA*\nhttps://bit.ly/3GIrWE1' },
                'rule_70': { keywords: ["4651"], response: '*RESOLUCIÓN 4651 INASISTENCIA*\n\nhttps://zosepcar.cl/content/OS10/resol_4651.pdf' },
                'rule_71': { keywords: ["empresa capacitacion arica"], response: '*EMPRESA DE CAPACITACIÓN ARICA*\n\n*SETCH* FONO: 582251978\n*GSC* FONO: 950144679\n*EDGARDO ABARZUA* FONO: 977777716\n*FUNCAL* FONO: 951490729' },
                'rule_72': { keywords: ["empresa en un dia"], response: '*\"CREA TU EMPRESA EN UN DIA\"* \n https://www.registrodeempresasysociedades.cl/' },
                'rule_73': { keywords: ["insignia digital"], response: '*INSIGNIA DIPLOMADO CIBERSEGURIDAD*\n\nhttps://bit.ly/3DSuD46' },
                'rule_74': { keywords: ["capacitadores"], response: '🤖 *CAPACITADORES*\n https://drive.google.com/file/d/1hpZrzhXCnGyLkFLRhj0FOY_zDwTEUIaN/view?usp=drivesdk' },
                'rule_76': { keywords: ["domicilio figueroa"], response: '*DOMICILIO*\nhttps://maps.app.goo.gl/rnqLdPG5sEFzN32C9' },
                'rule_78': { keywords: ["votaciones","votar","excusarme","lugar de votación"], response: '*LUGAR DE VOTACIÓN - VOCAL DE MESA*☝🏼👍🏽\nhttps://consulta.servel.cl/\n*PUEDE LLAMAR AL* 600 600 0166 desde su teléfono\n🤖 *CONSULTAS Y RECLAMOS SERVEL LINK- EXCUSA*: \nhttps://www.servel.cl/contacto/' },
                'rule_80': { keywords: ["comisaria","cuadrante","cuadrantes","comisarías"], response: '🤖👮🏻‍♂️ TEL. CUADRANTES\n- https://www.comisariavirtual.cl\n- https://www.stop.carabineros.cl/\n- BUSCA TU CUADRANTE:\nhttps://www.bit.ly/3Yna7AP\n- CUAD. LA SERENA\nhttps://www.dal5.short.gy/C\n- CUAD. LAS COMPAÑIAS\nhttps://www.dal5.short.gy/C1\n- CUAD. COQUIMBO\nhttps://www.dal5.short.gy/Co\n- MAPA CUAD LA SERENA\nhttps://www.d6.short.gy/LS\n- MAPA CUAD COQUIMBO\nhttps://www.d6.short.gy/CQ\n- CEROFILAS\nhttps://www.dal5.short.gy/CFil' },
                'rule_82': { keywords: ["rut","ver un rut"], response: '🤖 🧙🏻‍♂️ *Consultar R.U.T.* 👇?\nhttps://www.elrutificador.com/\nhttps://www.nombrerutyfirma.com\nhttps://www.rutynombre.com/\nhttps://www.rutificador.co/rut/' },
                'rule_83': { keywords: ["aaff"], response: '*AA.FF. A NIVEL NACIONAL* 🤖Busque la comuna que necesita en el mapa. \nhttps://www.zosepcar.cl/OS10.php#autoridad' },
                'rule_85': { keywords: ["reclamo","fiscalizacion","fiscalizar"], response: '*REQUERIMIENTO* \n https://dal5.short.gy/R3' },
                'rule_86': { keywords: ["cuál es la pagina del os10","zosepcar"], response: '*🤖 Está es la página del os10*\nhttps://www.zosepcar.cl/OS10.php' },
                'rule_87': { keywords: ["reglamento"], response: '*Reglamento 11*\nhttps://drive.google.com/file/d/0By_MScWZi3fRLVlIN2dJby1hekU/view?usp=drivesdk&resourcekey=0-3OB6XmcfWnIf9KZU1J65Yw' },
                'rule_88': { keywords: ["ciberseguridad"], response: '🤖 🧙🏻‍♂️ *\"CIBERSEGURIDAD\"*\n➢ *1.-¿Que Hacer?*:\nhttps://www.dal5.short.gy/SIyeI3\n➢ *2.,-¿Cómo notificar?*:\nhttps://www.dal5.short.gy/GFxMgX' },
                'rule_89': { keywords: ["menu os10", "menú O.S.10"], response: '*De acuerdo OS10*🧙🏻‍♂️👮🏻‍♂️☝️*Escriba lo que está con negrillas:* \n \n ⬇️ ESCRIBA El QUE NECESITE:\n➢ *Bots:* recibirá un listado de bots con Inteligencia Avanzada.\n➢ *Componentes:* Obtendrá las guías\n➢ *Manuales:* Se desplega menu\n➢ *Leyes:* Se desplega menu\n➢ *Editable:* Documentos en Word.\n➢ *Directiva:* Requisitos presentar\n➢ *Valores:* Cursos y planes.\n➢ *Independiente:* Requisitos Cred.\n➢ *Menu credencial:* Menú credenciales\n➢ *Nueva Ley:* Nueva ley seguridad privada y reglamento.' },
                'rule_90': { keywords: ["directiva","directiva de funcionamiento","directivas","directiva de funcionamiento instalacion","funcionamiento","formulario directiva"], response: '🧙🏻‍♂️🤖 *PRESENTAR DIRECTIVA DE FUNCIONAMIENTO*\n(Instalación - Evento - Partidos de Fútbol Profesional)\nPagina: https://dal5.short.gy/df' },
                'rule_91': { keywords: ["mantra"], response: '*Mantra*\n\nOm: Om es la sílaba semilla que sintoniza cualquier mantra que se recita en su vibración' },
                'rule_92': { keywords: ["usuario diploma"], response: '*PAGINA DIPLOMADO* https://centropyc.carabineros.cl/acipol/login/index.php Usuario: 982083a Contraseña: Flor9820&' },
                'rule_93': { keywords: ["auditorias empresa de capacitacion","auditorias empresas de capacitacion","auditoria empresa de capacitacion","auditoria empresas de capacitacion"], response: ',👮🏼*AUDITORIAS EMPRESA CAPACITACIÓN 2024*\n\nhttps://dal5.short.gy/AuCap' },
                'rule_95': { keywords: ["independiente","credencial independiente","credencial independientes"], response: '🤖 *INDEPENDIENTE 1ER. SEM. 2025* \n*Descargar Guía:* \nhttps://os10.short.gy/I25' },
                'rule_96': { keywords: ["medidas"], response: '🤖🧙🏻‍♂️ *MEDIDAS DE SEGURIDAD*\n➢ *MED.EDITABLE:* https://dal5.short.gy/M3' },
                'rule_98': { keywords: ["Valores","cuanto cuesta","cual es el valor","valor plan","valores planes","valores plan","valor","cuesta"], response: '🤖🧙🏻‍♂️ *AQUI ESTAN LOS VALORES 2DO. SEMESTRE 2025*\n1.- CREDENCIAL\nhttps://dal5.short.gy/val\n2.- CRED. EMPRESA\nhttps://dal5.short.gy/C.emp\n3.- CURSO FORMACIÓN\nhttps://dal5.short.gy/Form\n4.- CURSO PERFECC\nhttps://dal5.short.gy/BjzkHI\n5.- VALOR PLAN\nhttps://os10.short.gy/Pl4n' },
                'rule_102': { keywords: ["no hay sistema"], response: '🤖 *NO HAY SISTEMA CENTRAL ACTUALMENTE*\nLa resolución 3632 del 30 de Noviembre de 2023 establece que actualmente no existe un sistema central de registro.' },
                'rule_103': { keywords: ["infraccion","infracciones"], response: '🤖 *INFRACCIONES TRANSITO*\nhttps://bit.ly/3HFKLaH\nhttps://bit.ly/3ilvbrN\nhttps://bit.ly/3ZcOzb9' },
                'rule_104': { keywords: ["infraccion os10"], response: '🤖 *INFRACCIONES OS10*\nSegún decreto 867 y sus modificaciones' },
                'rule_105': { keywords: ["infracción alcoholes"], response: '🤖 *INFRACCIONES ALCOHOLES*\nLey 19.925 sobre expendio y consumo de bebidas alcohólicas' },
                'rule_106': { keywords: ["estadio"], response: '🤖 *ESTADIO*\nRequisitos especiales para eventos deportivos según circular 28' },
                'rule_107': { keywords: ["bots"], response: '🤖 *LISTADO DE BOTS INTELIGENCIA AVANZADA*\n- Bot Seguridad Privada\n- Bot Ciberseguridad\n- Bot Tránsito\n- Bot Ley Karyn' },
                'rule_108': { keywords: ["dgac"], response: '🤖 *DGAC SEGURIDAD PRIVADA*\nDirección General de Aeronáutica Civil - Requisitos especiales' },
                'rule_109': { keywords: ["decreto 32"], response: '*DECRETO 32/2024*\nModifica decreto 261\nhttps://www.zosepcar.cl/content/OS10/Resol_32.pdf' },
                'rule_110': { keywords: ["editable","documentos word"], response: '🤖 *DOCUMENTOS EDITABLES EN WORD*\n✅ Estudio\n✅ Plan\n✅ Medidas\n✅ Directiva\n✅ Todos@ ' },
                'rule_111': { keywords: ["nueva ley"], response: '🤖 *NUEVA LEY SEGURIDAD PRIVADA*\nLey 21.659 del 21 de marzo de 2024\nhttps://dal5.short.gy/LeySeg' },
                'rule_112': { keywords: ["menu credencial"], response: '🤖 *MENÚ CREDENCIALES*\n- Guardia\n- Jefe Seguridad\n- Supervisor\n- Asesor\n- Independiente' },
                'rule_113': { keywords: ["vigilante privado"], response: '🤖 *VIGILANTE PRIVADO*\nSimilar a guardia de seguridad pero con funciones específicas\nhttps://www.zosepcar.cl/content/OS10/TRAM_vigilante_privado.pdf' },
                'rule_149': { keywords: ["empresas recursos humanos"], response: '🤖 *EMPRESAS DE RECURSOS HUMANOS*\nAutorización especial para intermediación laboral\nRequisitos específicos' },
                'rule_150': { keywords: ["supermercados","sobre 500 uf","requisitos sobre 500 uf"], response: '🤖 *REQUISITOS SOBRE 500 UF.*\n\nhttps://dal5.short.gy/S500' },
                'rule_152': { keywords: ["linkedin"], response: '🧙🏻‍♂️.*LinkedIn* \nhttps://dal5.short.gy/Lin' },
                'rule_153': { keywords: ["pdf"], response: '🤖 *PDF sh4nge 3dit0r 3d1t0r Plus*\n\n*https://dal5.short.gy/PDF2*' },
                'rule_154': { keywords: ["facultades","fiscalizar vigilante"], response: '🧙🏻‍♂️👮🏻‍♂️🏦☝️ LAS FACULTADES CONFERIDAS A CARABINEROS DE CHILE CONFORME LO SIGUIENTE PARA *VIGILANTES PRIVADOS Y ENTIDAD OBLIGADAS* SEGÚN EL ARTICULO 3 DEL DECRETO 3.607' },
                'rule_155': { keywords: ["circular","eventos"], response: '🤖 *CIRCULAR 28*\n\n*https://www.bcn.cl/leychile/navegar?i=1083082*' },
                'rule_156': { keywords: ["cursos online","modalidad telematica"], response: '🤖 *CURSOS MODALIDAD TELEMATICA* (online)\n\nhttps://www.zosepcar.cl/content/OS10/resolucion_80.pdf' },
                'rule_157': { keywords: ["guía de perro","perro"], response: '🤖 D/E 164678609OS10 del 28/07/2022.\n👮🐕🐕‍🦺 *INSTRUCCIONES SOBRE ACREDITACIÓN DE GUÍAS DE PERROS ADIESTRADOS Y CERTIFICACIÓN DE LOS EJEMPLARES*' },
                'rule_160': { keywords: ["requisitos plan"], response: '🤖 📘 *REQUISITOS PLAN DE SEGURIDAD*\nhttps://dal5.short.gy/RPl4n' },
                'rule_161': { keywords: ["como presentar una ddff","presentar directiva","presentar una directiva de funcionamiento","presentar ddff","presentar dd.ff."], response: '🤖👉🏼 *COMO SE DEBE PRESENTAR UNA DIRECTIVA DE FUNCIONAMIENTO EN PDF*\nNota- Hipervínculos en el pdf\nhttps://dal5.short.gy/PdDdff' },
                'rule_162': { keywords: ["por qué no puede en la vía","guardia en la via publica"], response: '☝🏼👮🏻‍♂️🚦\n*EL GUARDIA DE SEGURIDAD SOLO DEBE REALIZAR SUS LABORES DENTRO DE UN RECINTO O ÁREA DELIMITADA.*' },
                'rule_163': { keywords: ["tiempo"], response: '😃👉🏼*TIEMPO*\n*Windy*\nhttps://www.windy.com\n*Meteored*\nhttps://www.meteored.cl/mapas-meteorologicos/' },
                'rule_164': { keywords: ["radios"], response: '*RADIOS LA SERENA*\nhttps://onlineradiobox.com/cl/La_Serena' },
                'rule_165': { keywords: ["grupos"], response: 'Grupo trabajos\nhttps://dal5.short.gy/Grup' },
                'rule_166': { keywords: ["manual cs55"], response: '🤖👽👉🏼🚙 MANUAL CS55 2021\n\nhttps://drive.google.com/file/d/1NrPRmy9ag2pLtd2E5OX0sHfI-x9rCblo/view?usp=drivesdk' },
                'rule_167': { keywords: ["crear imagen","ia imagen","imagen ia"], response: '👽🤖👌🏼*IA CREA IMAGEN Y VIDEO*\nhttps://huggingface.co/spaces' },
                'rule_168': { keywords: ["criptografia"], response: 'Estás invitado a una reunión de Teams.\n\nClases de Criptografía\n\nhttps://teams.microsoft.com/l/meetup-join' },
                'rule_169': { keywords: ["diplomado"], response: '🤖👉🏼 *DIPLOMADO*\n\nhttps://dal5.short.gy/Diplo' },
                'rule_170': { keywords: ["ley de control de armas","armas"], response: '🤖👉🏼LEY DE CONTROL DE ARMAS\n\nhttps://www.bcn.cl/leychile/navegar?i=29291&f=1972-10-21' },
                'rule_172': { keywords: ["209"], response: '🤖 *REGLAMENTO LEY DE SEGURIDAD PRIVADA* https://dal5.short.gy/Regl' },
                'rule_173': { keywords: ["auditorias","instructivo auditorias","auditoría"], response: '👮🏼☝🏼 *INSTRUCTIVO AUDITORIAS D/E 142623956*\n1.- Empresas de RR.HH.\n2.- Empresas de TT.VV.\n3.- Empresas de Capacitación' },
                'rule_174': { keywords: ["binance","recibir criptomonedas"], response: '🤖🪙💰🪙👉🏼 💸*RECIBIR CRIPTO EN BINANCE*\n*Recibir:*\n 0x78b349586f9de0ad692549b20e0efba58df1ff79' },
                'rule_175': { keywords: ["partido","futbol","copa américa","donde ver futbol"], response: '👽👉🏼 *VER FUTBOL ONLINE O DESCARGAR APP*\n\n👉🏼 *VER ONLINE*: LINK : https://futbollibrehd.cl/' },
                'rule_177': { keywords: ["doodieman"], response: '*Doodieman*\nhttps://www.1001juegos.com/juego/doodieman-voodoo' },
                'rule_178': { keywords: ["usek","anexos"], response: '🤖 *ANEXOS* \nLink: https://anexos.usek.cl/\nPdf: https://www.dal5.short.gy/Kj2AUu' },
                'rule_179': { keywords: ["calendario clases"], response: '🤖👮🏼👉🏼 *CALENDARIO CLASES* https://www.dal5.short.gy/ie1DxQ' },
                'rule_180': { keywords: ["prompts","pront","prom","pron","promt","promtsp","promstp"], response: '🤖👉🏼 *PROMPTS*\n\nCrear App\nhttps://dal5.short.gy/CreaApp' },
                'rule_181': { keywords: ["estudios"], response: '🤖👉🏼 *TECNICO DE NIVEL SUPERIOR EN TRABAJO SOCIAL*\nhttps://www.dal5.short.gy/SU' },
                'rule_182': { keywords: ["currículum"], response: '🤖👍🏼 *CURRÍCULUM VITAE* \nhttps://dal5.short.gy/CV' },
                'rule_185': { keywords: ["foto ia","ia foto","agrandar foto","ampliar foto","herramientas de inteligencia artificial","inteligencia","cambiar fondo"], response: '🤖☝🏼 *HERREMIENTAS DE INTELIGENCIA ARTIFICIAL*\n\n1.- *Laboratorio de Google IA*\nlabs.google/fx/es' },
                'rule_186': { keywords: ["diplomados"], response: '*DANIEL FIGUEROA* \n*INGENIERO EN INFORMÁTICA*\nhttps://drive.google.com/file/d/1k2oiHE9VkBsU8MdFsRo6uFYYnDh-tEs1/view?usp=drivesdk' },
                'rule_188': { keywords: ["trabajo"], response: '*Seguridad IOT*\nTRABAJO 3 INDIVIDUAL \n\nhttps://docs.google.com/document/d/1gDgNpIwkqmGK2GTJ_sTP1O1Dx1ZDnmR9/edit' },
                'rule_192': { keywords: ["que significa atm","significado atm"], response: '🤖 ATM (Automated Teller Machine)' },
                'rule_193': { keywords: ["tejidos","tejido","tejer","tejidos luna"], response: '🤖 *TEJIDOS LUNA*👇🏽🦴🐕\n\nhttps://dal5.short.gy/Tej3' },
                'rule_194': { keywords: ["14 puntos cajeros"], response: '🤖 *14 PUNTOS CAJEROS*\n\nMi XXXXXXX se informa el siguiente procedimiento' },
                'rule_195': { keywords: ["¿los días de votación serán feriados?"], response: '*¿Los días de votación serán feriados?*\n\nSí. El sábado 26 de octubre será feriado normal, por lo que el comercio podrá abrir. Mientras que el domingo 27 de octubre será feriado irrenunciable.' },
                'rule_196': { keywords: ["bots","tienes un bot","hay un bot","tiene algún bot de seguridad privada","algun bot","tiene un bot","dame el bot","bot de seguridad privada","bot"], response: '🤖 *Bots con IA avanzada:*\n\n➢ *Bot Seguridad Privada*\nhttps://dal5.short.gy/SePriv' },
                'rule_197': { keywords: ["colores"], response: '🤖 *Colores votaciones* \nhttps://drive.google.com/file/d/1qAQoR_DRaXl8Cgzfueyx2ggh2LL_caBh/view?usp=drivesdk' },
                'rule_198': { keywords: ["para tramitar una credencial de guardia","credencial de guardia"], response: '👮🏽‍♂️👉🏼 Existen dos tipos de credenciales para guardia de seguridad, escribe lo que está con negrillas del que necesitas:\n*1. Independiente:* (solo eventos)\n*2. Credencial Empresa* (instalación empresa)' },
                'rule_199': { keywords: ["bot","bot seguridad privada"], response: '🤖👮🏽‍♂️👉🏼 *Bots con IA avanzada Chat Gpt 4o:*\n\n🤖 *Bot de Seguridad Privada* https://dal5.short.gy/SePriv' },
                'rule_201': { keywords: ["y tiene los valores","y tiene los valores del plan","credencial empresa","los valores","valores credencial","valor","cual es el valor","cuanto cuesta","plan"], response: 'Si, claro: 🤖🧙🏻‍♂️ *AQUI ESTAN LOS VALORES 2DO. SEMESTRE 2024*\n\n1.- *CREDENCIAL*\nhttps://bit.ly/3vmqEvz' },
                'rule_202': { keywords: ["registro ingreso biometrico"], response: '🤖👉🏼 *Registro ingreso Biométrico*\n\nhttps://dal5.short.gy/Reg' },
                'rule_203': { keywords: ["sacar cantidad de guardias por evento","guardia por evento","cantidad de guardias","cuantos guardias","guardias por evento"], response: '🤖👮🏼‍♂️👉🏼 *CANTIDAD DE GUARDIA POR EVENTO:* \n \n*Link:*\n*https://dal5.short.gy/GGSS*' },
                'rule_204': { keywords: ["hora dipreca","para sacar hora en dipreca","sacar hora dipreca","dipreca"], response: 'Gracias por contactarse con DIPRECA. \n*Informamos que desde el 13 de Junio este whatsapp dejó de funcionar*' },
                'rule_206': { keywords: ["os11","arma","inscripción de un arma","trámites os11","tramites os11"], response: '🧙🏼‍♂️🤖👉🏼 *Portal de consultas de armas*\n https://www.portalarmaschile.gob.cl/' },
                'rule_207': { keywords: ["certificado","certificados","como sacar certificado os10","cerofilas","cero filas","0 filas"], response: '👮🏽‍♂️ 👉🏼 *TRÁMITES CEROFILAS*:\n\nLink: https://dal5.short.gy/CFil' },
                'rule_208': { keywords: ["dpi"], response: '*LOS DPI AFECTAN ÚNICAMENTE LA RESOLUCIÓN DE IMPRESIÓN, NO EL TAMAÑO FÍSICO DE LA IMAGEN EN PÍXELES.*' },
                'rule_209': { keywords: ["7 puntos"], response: '*1. TIPIFICACIÓN:* ROBO VEHÍCULO AFECTA CONSEJAL COMUNA VITACURA.' },
                'rule_213': { keywords: ["fotografía","fotito"], response: '*1.- FOTOSTORE:* Calle Prat 629, La Serena.\nUbicación: *https://dal5.short.gy/629*' },
                'rule_215': { keywords: ["sacar hora dental","dentista","sacar hora"], response: '🤖 *SACAR HORA DENTISTA CARABINEROS LA SERENA O SANTIAGO.*\n*https://www.hoscar.cl/v2.0/horasdentales/login.php*' },
                'rule_216': { keywords: ["valor infracciones","valores infracciones","cuanto cuesta una infracción de seguridad privada"], response: ',🤖☝🏼 Dado que las multas establecidas en la Ley 21.659 se expresan en UTM' },
                'rule_220': { keywords: ["pagina"], response: '🧙🏼‍♂️ *PAGINA CIBERSEGURIDAD*\n*https://dal5.short.gy/C25*' },
                'rule_222': { keywords: ["bot telegram"], response: '*Bots telegram*\n1.- Borra fondo: AI_Background_Remover_Bot' },
                'rule_223': { keywords: ["cédula","cédula de identidad"], response: '*CÉDULA DE IDENTIDAD 2025*\nhttps://dal5.short.gy/Ce' },
                'rule_224': { keywords: ["ia","ai","avanzada","ias","ias avanzada","ia avanzada","ai avanzada"], response: ',🧙🏼‍♂️ *IA AVANZADA 2025*\n1.- https://chat.qwenlm.ai/' },
                'rule_227': { keywords: ["preventiva"], response: '🤖 *PREVENTIVA*\nhttp://www.medpreventiva.dipreca.cl:8098/autoconsulta/ingresarut.asp' },
                'rule_238': { keywords: ["pensiones","calculo pensión","jubilación","retiro","pensión","retirarme","retirarse"], response: '🧙🏼‍♂️ *Calculo Pensiones*\ndal5.short.gy/Pens' },
                'rule_239': { keywords: ["directiva","directiva de funcionamiento","directivas","directiva de funcionamiento instalacion","funcionamiento","formulario directiva"], response: '🤖 *PAGINA PARA:*\n*1.- PRESENTAR DIRECTIVA.*\n*2.- CREDENCIAL EMPRESA.*\n*3.- CRED. INDEPENDIENTE.*' },
                'rule_240': { keywords: ["credencial empresa","credencial empleador","cred empresa","credencial empresas","credenciales empresas","credencial","credencial independiente","independiente","credencial independientes","tramitar credencial"], response: '*TRAMITAR CREDENCIALES* 🤖👉🏼 https://directiva.netlify.app/credenciales \naquí salen los pasos a seguir para tramitar una credencial.' },
                'rule_243': { keywords: ["realizaron examen","los que realizaron el examen","enviar el resultado examen","enviar resultado","enviar resultados"], response: '🤖 👮🏼‍♂️\n1.- Los que están con rojo sacaron bajo el 60% y están reprobados' },
                'rule_244': { keywords: ["usuario portal","portal usuario","portal de usuario","usuario"], response: '🧙🏼‍♂️\nhttps://dal5.short.gy/U53' },
                'rule_245': { keywords: ["presentación con ia","presentaciónes"], response: '🤖🧙🏼‍♂️ \n\n1.- https://gamma.app/' },
                'rule_246': { keywords: ["plano oficina"], response: '🤖 Plano Oficina \nhttps://os10.short.gy/Pl40' },
                'rule_247': { keywords: ["requerimiento de desarrollo web","requerimiento página","página","requisitos página","crear página web","desarrollo web"], response: '🤖🧙🏼‍♂️ 💡🥇 *Para saber que es lo que necesita, responder lo siguiente*\n\n*1.- Requerimiento de desarrollo*\nhttps://dal5.short.gy/D3sa' },
                'rule_248': { keywords: ["servidor","servidores","alojar página","alojar"], response: '🧙🏼‍♂️*Alojar páginas web*\n1.- https://app.netlify.com/\n2.- https://github.com/' },
                'rule_252': { keywords: ["requisitos","requisito","requisitos plan","requisitos medidas","requisitos directiva"], response: '🤖🧙🏼‍♂️ *Requisitos Plan, Medidas y Directiva*\nhttps://os10coquimbo.netlify.app' },
                'rule_253': { keywords: ["valores infracciones ciberseguridad","infracciones de ciberseguridad","infracciones ciberseguridad"], response: '🤖🧙🏼‍♂️*VALORES INFRACCIONES DE CIBERSEGURIDAD*\nhttps://dal5.short.gy/Vc' },
                'rule_254': { keywords: ["examen os10","examen"], response: '🧙🏼‍♂️🤖👮🏼‍♂️ *Practicar examen*\nhttps://dal5.short.gy/SeSec' },
                'rule_255': { keywords: ["examen moto","examen para moto","moto"], response: '🤖🧙🏼‍♂️ *Examen moto*\nhttps://dal5.short.gy/ExMoto' },
                'rule_257': { keywords: ["gestudio","estudiar","gestor académico","gestor"], response: '🤖🧙🏼‍♂️✅\n\nhttps://gestudios.netlify.app/' },
                'rule_258': { keywords: ["modelos de solicitud","modelo","punto 6","punto 7"], response: '🤖🧙🏼‍♂️✅\n\nhttps://www.zosepcar.cl/OS10.php#Modelo' },
                'rule_260': { keywords: ["como estas"], response: 'Bien aqui trabajando para variar y tu ¿como estas?' },
                'rule_261': { keywords: ["hola","saludos"], response: '🤖👮🏻‍♂️ ¡Hola! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquí para ayudarle con sus consultas. ¿En qué puedo asistirle hoy?' },
                'rule_261a': { keywords: ["buenos días","buen día"], response: '🤖👮🏻‍♂️ ¡Buenos días! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquí para ayudarle con sus consultas. ¿En qué puedo asistirle hoy?' },
                'rule_261b': { keywords: ["buenas tardes","buena tarde"], response: '🤖👮🏻‍♂️ ¡Buenas tardes! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquí para ayudarle con sus consultas. ¿En qué puedo asistirle hoy?' },
                'rule_261c': { keywords: ["buenas noches","buena noche"], response: '🤖👮🏻‍♂️ ¡Buenas noches! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquí para ayudarle con sus consultas. ¿En qué puedo asistirle hoy?' },
                'rule_262': { keywords: ["gracias","muchas gracias","te agradezco","agradezco"], response: '🤖😊 ¡Es un placer ayudarle! Para eso estamos aquí en OS10 Coquimbo. Si tiene alguna otra consulta, no dude en escribirme. ¡Que tenga un excelente día!' },
                'rule_263': { keywords: ["chao","adiós","nos vemos","hasta luego","me voy"], response: '🤖👋 ¡Hasta luego! Gracias por contactar a OS10 Coquimbo. Recuerde que estamos de lunes a jueves de 09:00 a 13:00 horas en Cienfuegos 180, La Serena. ¡Que tenga un buen día!' },
                'rule_264': { keywords: ["ayuda","no entiendo","estoy perdido","no sé qué hacer"], response: '🤖🆘 ¡Tranquilo/a! Entiendo que puede ser confuso. Estoy aquí para guiarle paso a paso. Por favor, cuénteme específicamente qué necesita y con mucho gusto le ayudo a encontrar la solución. ¿Se trata de una credencial, curso, o algún trámite específico?' },
                'rule_265': { keywords: ["información","qué hacen","qué es os10","oficina seguridad"], response: '🤖🏢 OS10 Coquimbo es la Oficina de Seguridad Privada que regula y supervisa todo lo relacionado con seguridad privada en la región. Nos encargamos de credenciales, cursos, empresas de seguridad, y cumplimiento normativo. ¿En qué área específica necesita información?' },
                'rule_266': { keywords: ["problema","error","no funciona","dificultad"], response: '🤖⚠️ Lamento escuchar que está teniendo dificultades. Por favor, descríbame detalladamente cuál es el problema y haré todo lo posible por ayudarle a solucionarlo. Si es algo técnico, también puede contactarnos directamente al 512651024.' },
                'rule_267': { keywords: ["urgente","apurado","rápido","prisa"], response: '🤖🚨 Entiendo que su consulta es urgente. Permítame ayudarle de la manera más eficiente posible. Por favor, indíqueme exactamente qué necesita y le proporcionaré la información de forma directa y clara.' },
                'rule_268': { keywords: ["confundido","no encuentro","perdido","desorientado"], response: '🤖🧭 ¡No se preocupe! Es normal sentirse un poco desorientado con tantos procedimientos. Estoy aquí para guiarle correctamente. Cuénteme qué está buscando y le ayudo a encontrar el camino correcto paso a paso.' },
                'rule_269': { keywords: ["primera vez","soy nuevo","no conozco","principiante"], response: '🤖🌟 ¡Bienvenido/a al mundo de la seguridad privada! Es un gusto ayudar a personas que recién comienzan. No se preocupe, todos empezamos desde cero. Cuénteme qué le interesa y le explico todo desde el principio de manera sencilla.' },
                'rule_270': { keywords: ["recomendación","qué me recomienda","consejo","sugerencia"], response: '🤖💡 ¡Excelente pregunta! Para darle la mejor recomendación, necesito conocer un poco más sobre su situación. ¿Busca trabajar en seguridad privada, tiene una empresa, o necesita contratar servicios? Con esa información podré orientarle perfectamente.' },
                'rule_271': { keywords: ["no sé","no estoy seguro","duda","indeciso"], response: '🤖🤔 ¡Perfecto! Las dudas son normales y es mejor aclararlas antes de proceder. No hay problema en no estar seguro, para eso estoy aquí. Cuénteme qué opciones está considerando y juntos encontraremos la mejor alternativa para usted.' },
                'rule_272': { keywords: ["complicado","difícil","enredado","complejo"], response: '🤖⚡ ¡Entiendo perfectamente! Los procedimientos pueden parecer complicados al principio, pero no se preocupe. Mi trabajo es simplificar todo para usted. Vamos paso a paso y verá que no es tan difícil como parece. ¿Por dónde empezamos?' },
                'rule_273': { keywords: ["reclamo","queja","molesto","disconforme","requerimiento"], response: '🤖📋 Lamento escuchar que tiene una situación que le molesta. Su satisfacción es importante para nosotros. Para formalizar su reclamo o requerimiento, por favor utilice nuestro formulario oficial: 📋 *REQUERIMIENTO:* https://dal5.short.gy/R3' },
                'rule_274': { keywords: ["felicitaciones","excelente","muy bueno","genial"], response: '🤖😊 ¡Muchas gracias por sus palabras! Es muy gratificante saber que nuestro servicio le parece bueno. Seguiremos trabajando para brindarle la mejor atención. ¿En qué más puedo ayudarle hoy?' },
                'rule_275': { keywords: ["bot","robot","artificial","automático"], response: '🤖🤖 ¡Así es! Soy un asistente virtual inteligente creado especialmente para ayudarle con sus consultas de seguridad privada. Aunque soy un bot, estoy programado con toda la información actualizada de OS10 Coquimbo para brindarle respuestas precisas y útiles.' },
                'rule_276': { keywords: ["qué dice la ley","según la ley","ley dice","normativa"], response: '🤖📚 Permítame analizar la Nueva Ley de Seguridad Privada 21.659 y su reglamento para responder su consulta específica. Por favor, sea más específico sobre qué aspecto de la ley necesita conocer y le proporcionaré la información exacta.' },
                'rule_277': { keywords: ["multa","sanción","infracción","castigo"], response: '🤖⚖️ Analizando la normativa vigente... Las sanciones están detalladas en la Ley 21.659. Para darle información precisa sobre multas, necesito saber qué tipo de infracción consulta. ¿Se refiere a empresas, guardias, o alguna situación específica?' },
                'rule_278': { keywords: ["artículo","según el artículo","art","art."], response: '🤖📖 Perfecto, veo que necesita información específica de un artículo. Por favor indíqueme el número del artículo de la Ley 21.659 o del Reglamento 209 que necesita consultar, y le proporcionaré el contenido exacto y su interpretación.' },
                'rule_279': { keywords: ["cambios","modificaciones","diferencias","nuevo"], response: '🤖🔄 Excelente consulta. La Nueva Ley 21.659 introduce importantes cambios. Basándome en mi análisis de la normativa, puedo explicarle las modificaciones específicas. ¿Se refiere a cambios en requisitos, procedimientos, o algún aspecto particular?' },
                'rule_280': { keywords: ["obligación","deber","debe","obligatorio"], response: '🤖📋 Analizando las obligaciones según la normativa vigente... Para darle información precisa sobre deberes y obligaciones, necesito saber si consulta por empresas de seguridad, guardias, o algún actor específico del sistema.' },
                'rule_281': { keywords: ["prohibido","no se puede","está prohibido","prohibición"], response: '🤖🚫 Revisando las prohibiciones establecidas en la Ley 21.659... Hay varias prohibiciones específicas según el tipo de actor. ¿Su consulta se refiere a guardias, empresas, o alguna actividad en particular?' },
                'rule_282': { keywords: ["plazo","tiempo","días","vigencia"], response: '🤖⏰ Consultando los plazos establecidos en la normativa... Los plazos varían según el trámite o procedimiento. Para darle información exacta, ¿a qué tipo de plazo se refiere? ¿Credenciales, cursos, o algún procedimiento específico?' },
                'rule_283': { keywords: ["requisito","condición","necesito","exigencia"], response: '🤖✅ Analizando los requisitos según la Nueva Ley de Seguridad Privada... Los requisitos varían según lo que necesite tramitar. ¿Consulta por requisitos para credenciales, empresas, cursos, o algún trámite específico?' },
                'rule_284': { keywords: ["fiscalización","inspección","control","supervisión"], response: '🤖🔍 Revisando las disposiciones sobre fiscalización en la normativa... La ley establece claras facultades de fiscalización. ¿Su consulta se refiere a inspecciones a empresas, controles a guardias, o algún aspecto específico del proceso?' },
                'rule_285': { keywords: ["capacitación","formación","entrenamiento","curso obligatorio"], response: '🤖🎓 Analizando los requisitos de capacitación según la Ley 21.659... La normativa establece obligaciones específicas de formación. ¿Necesita información sobre cursos obligatorios, empresas capacitadoras, o algún aspecto particular?' },
                'rule_286': { keywords: ["guardia sin curso","vigilante sin capacitación","sin formación","no tengo curso","no tiene curso","falta curso","sin curso","no hice curso","no ha hecho curso","capacitación pendiente","curso vencido","certificado vencido"], response: '🤖⚠️ Un guardia sin curso de capacitación NO puede ejercer funciones. Según Decreto 93 art. 13° y DL 3607, es OBLIGATORIO contar con curso básico de formación vigente (3 años). Sin curso = INFRACCIÓN GRAVE. Multa: 25 a 125 ingresos mínimos mensuales (primera vez), hasta 250 en reincidencia.' },
                'rule_287': { keywords: ["guardia sin credencial","vigilante sin autorización","sin credencial","no tengo credencial","no tiene credencial","falta credencial","credencial vencida","sin licencia","no tengo licencia","no tiene licencia","autorización vencida","permiso vencido"], response: '🤖❌ Un guardia sin credencial vigente NO puede trabajar. Según Decreto 93 art. 93° la credencial es requisito ESENCIAL para ejercer. Sin credencial = EJERCICIO ILEGAL. Multa: 25 a 125 ingresos mínimos mensuales, duplicándose en reincidencia + posible clausura.' },
                'rule_288': { keywords: ["sin directiva funcionamiento","empresa sin directiva","falta directiva","no tengo directiva","no tiene directiva","directiva vencida","sin autorización empresa","empresa no autorizada","sin resolución","no tenemos directiva"], response: '🤖📋 Una empresa NO puede operar sin Directiva de Funcionamiento aprobada. Según Decreto 93 art. 15°, es OBLIGATORIA y tiene vigencia de 3 años. Sin directiva = OPERACIÓN ILEGAL. Debe solicitarse con 15 días hábiles de anticipación. Sanción: clausura inmediata + multa.' },
                'rule_289': { keywords: ["guardia sin uniforme","vigilante sin uniforme","uniforme obligatorio"], response: '🤖👕 Los vigilantes DEBEN usar uniforme reglamentario según DL 3607 art. 1°. El uniforme debe ser diferente al de FF.AA. y Carabineros, y de uso exclusivo para vigilantes autorizados. No usarlo constituye infracción.' },
                'rule_290': { keywords: ["vigilante sin arma","guardia desarmado","arma obligatoria"], response: '🤖🔫 Los vigilantes DEBEN portar armas según DL 3607 art. 1°. El porte y control de armas se rige por Ley 17.798. Solo pueden portar armas autorizadas y registradas según normativa vigente.' },
                'rule_291': { keywords: ["empresa sin registro","compañía no autorizada","registro empresa"], response: '🤖🏢 Las empresas de seguridad DEBEN estar registradas y autorizadas. Operar sin registro constituye ejercicio ilegal de actividad regulada. Sanción: multa de 25 a 125 ingresos mínimos mensuales, más clausura.' },
                'rule_292': { keywords: ["vigilante fuera recinto","guardia fuera instalaciones","límites funciones"], response: '🤖🚫 Los vigilantes SOLO pueden actuar dentro del recinto autorizado según DL 3607 art. 1°. NO pueden ejercer funciones fuera del área específica designada en su autorización.' },
                'rule_293': { keywords: ["credencial vencida","vigencia credencial","renovación credencial"], response: '🤖📅 Las credenciales tienen vigencia limitada y DEBEN renovarse antes del vencimiento. Trabajar con credencial vencida equivale a no tener credencial. Renovación debe solicitarse con anticipación.' },
                'rule_294': { keywords: ["curso vencido","capacitación vencida","actualización curso"], response: '🤖📚 Los cursos de capacitación tienen vigencia según Decreto 93. DEBE mantenerse capacitación actualizada. Trabajar con curso vencido constituye falta de requisito esencial para ejercer.' },
                'rule_295': { keywords: ["antecedentes penales","inhabilidad","requisitos morales"], response: '🤖⚖️ Los vigilantes NO pueden tener antecedentes penales según DL 3607. Condenas por delitos simples, robos, hurtos o drogas inhabilitan para ejercer funciones de seguridad privada.' },
                'rule_296': { keywords: ["menor edad guardia","vigilante menor","edad mínima"], response: '🤖🔞 Los vigilantes DEBEN ser mayores de 18 años según normativa. Menores de edad NO pueden ejercer funciones de seguridad privada bajo ninguna circunstancia.' },
                'rule_297': { keywords: ["examen médico","aptitud física","certificado médico"], response: '🤖🏥 Los vigilantes DEBEN acreditar aptitud física y mental mediante examen médico según reglamento. El certificado debe estar vigente y emitido por profesional autorizado.' },
                'rule_298': { keywords: ["libro registro","registro vigilantes","control personal"], response: '🤖📖 Las empresas DEBEN mantener libro de registro actualizado con datos de todos los vigilantes según Decreto 93. Debe incluir: datos personales, credenciales, capacitación y destinos.' },
                'rule_299': { keywords: ["estudio seguridad","plan seguridad","medidas mínimas"], response: '🤖📊 Las entidades obligadas DEBEN presentar Estudio de Seguridad según DL 3607 art. 3°. Debe incluir: análisis de riesgos, medidas propuestas, organización del servicio y recursos necesarios.' },
                'rule_300': { keywords: ["jefe seguridad","encargado seguridad","responsable interno"], response: '🤖👨‍💼 Las entidades obligadas DEBEN designar Jefe de Seguridad según Decreto 1122. Debe tener capacitación específica y conocimiento de la normativa de seguridad privada.' },
                'rule_301': { keywords: ["conexión alarmas","central monitoreo","sistema alarmas"], response: '🤖📡 Las conexiones a centrales de alarmas requieren autorización según Decreto 41. Deben cumplir especificaciones técnicas y protocolos de comunicación con Carabineros.' },
                'rule_302': { keywords: ["transporte valores","blindados","carga valiosa"], response: '🤖🚛 El transporte de valores se rige por Decreto 1814. Requiere: vehículos blindados, personal especializado, rutas autorizadas y medidas de seguridad específicas.' },
                'rule_303': { keywords: ["vigilancia nocturna","turno noche","horario nocturno"], response: '🤖🌙 La vigilancia nocturna requiere medidas especiales según normativa. Debe considerar: iluminación adecuada, comunicaciones, rondas programadas y protocolos de emergencia.' },
                'rule_304': { keywords: ["fiscalización carabineros","inspección","control autoridad"], response: '🤖👮‍♂️ Carabineros puede fiscalizar en cualquier momento según DL 3607. Las empresas y vigilantes DEBEN facilitar información, mostrar credenciales y permitir inspecciones.' },
                'rule_305': { keywords: ["denuncia infracción","reportar irregularidad","violación normativa"], response: '🤖📞 Las infracciones deben denunciarse a la Prefectura de Carabineros competente. Incluya: fecha, lugar, descripción detallada y evidencias disponibles de la irregularidad observada.' },
                'rule_306': { keywords: ["capacitación continua","cursos actualización","perfeccionamiento"], response: '🤖📖 Los vigilantes DEBEN mantener capacitación continua según nuevas normativas. Incluye: actualización legal, técnicas de seguridad, primeros auxilios y manejo de situaciones.' },
                'rule_307': { keywords: ["seguro responsabilidad","póliza seguro","cobertura daños"], response: '🤖🛡️ Las empresas DEBEN mantener seguros de responsabilidad civil según reglamento. Debe cubrir: daños a terceros, errores profesionales y responsabilidad del personal.' },
                'rule_308': { keywords: ["procedimiento emergencia","protocolo crisis","plan contingencia"], response: '🤖🚨 Las empresas DEBEN tener protocolos de emergencia definidos. Incluye: cadena de mando, comunicaciones, evacuación, primeros auxilios y coordinación con autoridades.' },
                'rule_309': { keywords: ["documentación obligatoria","papeles requeridos","documentos vigentes"], response: '🤖📄 Documentación obligatoria: credencial vigente, certificado curso, carnet identidad, autorización porte armas (si aplica), certificado médico y contrato trabajo.' },
                'rule_310': { keywords: ["horarios trabajo","jornada laboral","turnos vigilantes"], response: '🤖⏰ Los horarios deben cumplir Código del Trabajo. Jornada máxima, descansos obligatorios, horas extras reguladas. Turnos nocturnos tienen normativa especial de protección.' },
                'rule_311': { keywords: ["equipo comunicación","radio transmisor","medios comunicación"], response: '🤖📻 Los vigilantes DEBEN contar con medios de comunicación efectivos según normativa. Equipos deben estar autorizados por SUBTEL y mantener protocolo de comunicaciones.' },
                'rule_312': { keywords: ["material guerra","armas prohibidas","equipamiento restringido"], response: '🤖⛔ PROHIBIDO uso de material de guerra, armas automáticas o equipamiento militar según DL 3607. Solo armas autorizadas por normativa civil de control de armas.' },
                'rule_313': { keywords: ["detención ciudadana","arrestar","facultades vigilante"], response: '🤖👮‍♂️ Los vigilantes NO tienen facultades de detención especiales. Solo pueden ejercer detención ciudadana en flagrancia según Código Procesal Penal, entregando inmediatamente a Carabineros.' },
                'rule_314': { keywords: ["uso fuerza","agresión","violencia vigilante"], response: '🤖✋ El uso de fuerza debe ser: necesario, proporcional y último recurso según principios legales. PROHIBIDO uso excesivo, torturas o tratos inhumanos. Solo legítima defensa justifica fuerza.' },
                'rule_315': { keywords: ["revisión personas","cacheo","registro corporal"], response: '🤖🔍 Los vigilantes NO pueden realizar registros corporales invasivos. Solo inspección visual de bultos/bolsos con consentimiento o cuando reglamento interno lo autorice expresamente.' },
                'rule_316': { keywords: ["banco entidad financiera","institución bancaria","servicio financiero"], response: '🤖🏦 Bancos e instituciones financieras DEBEN contar con servicio propio de vigilancia según DL 3607 art. 3°. Además requieren organismo interno de seguridad y oficina especializada.' },
                'rule_317': { keywords: ["empresa estratégica","servicio público","entidad obligada"], response: '🤖🏭 Empresas estratégicas y servicios públicos determinados DEBEN contar con vigilancia privada obligatoria según DL 3607 art. 3°. Listado se define por decreto supremo secreto.' },
                'rule_318': { keywords: ["porte armas","licencia armas","autorización armamento"], response: '🤖🔫 El porte de armas requiere: licencia individual vigente, inscripción en Registro Nacional de Armas, capacitación específica y autorización del empleador según Ley 17.798.' },
                'rule_319': { keywords: ["subcontratación","tercerización","empresa contratista"], response: '🤖🤝 La subcontratación de servicios de seguridad está permitida pero la empresa principal mantiene responsabilidad solidaria según normativa laboral y de seguridad privada.' },
                'rule_320': { keywords: ["reclutamiento","selección personal","contratación vigilantes"], response: '🤖👥 El reclutamiento DEBE verificar: antecedentes, aptitud física/mental, capacitación previa, referencias laborales y cumplimiento de todos los requisitos legales vigentes.' },
                'rule_321': { keywords: ["puedo trabajar sin curso","trabajo sin capacitación","me contratan sin curso","contrato sin formación","empiezo sin curso","inicio sin capacitación"], response: '🤖🚫 NO puedes trabajar sin curso. Es ILEGAL según Decreto 93 art. 13°. Primero debes: 1) Hacer curso básico (40 horas mínimo) 2) Aprobar examen 3) Obtener certificado 4) Solicitar credencial. Trabajar sin curso = multa para ti y tu empleador.' },
                'rule_322': { keywords: ["él trabaja sin curso","ella trabaja sin curso","trabaja sin capacitación","empleado sin curso","personal sin formación","guardia nuevo sin curso"], response: '🤖⚠️ Esa persona NO puede trabajar sin curso. Según Decreto 93 art. 13° es obligatorio tener capacitación vigente. Si detectas esta situación, repórtala a Carabineros. La empresa también será sancionada por contratar personal no calificado.' },
                'rule_323': { keywords: ["puedo trabajar sin credencial","trabajo sin licencia","me contratan sin credencial","empiezo sin autorización","inicio sin permiso","trabajo sin papeles"], response: '🤖❌ NO puedes trabajar sin credencial. Es ILEGAL según Decreto 93. La credencial es tu "licencia de conducir" para seguridad privada. Sin ella cometes delito. Proceso: 1) Curso aprobado 2) Solicitar credencial 3) Esperar autorización 4) Recién ahí trabajar.' },
                'rule_324': { keywords: ["él trabaja sin credencial","ella trabaja sin credencial","trabaja sin licencia","guardia sin papeles","empleado sin autorización","personal sin credencial"], response: '🤖🚨 Esa persona comete INFRACCIÓN GRAVE trabajando sin credencial. Según Decreto 93, solo pueden ejercer quienes tengan autorización vigente. Denuncia inmediatamente a Carabineros. Multa para guardia Y empresa.' },
                'rule_325': { keywords: ["empresa puede operar sin directiva","trabajamos sin directiva","operamos sin autorización","empresa nueva sin papeles","negocio sin permisos","compañía sin resolución"], response: '🤖🛑 NO pueden operar sin Directiva de Funcionamiento. Según Decreto 93 art. 15° es OBLIGATORIA. Vigencia: 3 años. Sin directiva = CLAUSURA INMEDIATA. Deben solicitarla 15 días hábiles antes de operar. Es delito ejercer sin autorización.' },
                'rule_326': { keywords: ["esa empresa opera sin directiva","empresa sin autorización","compañía ilegal","negocio sin permisos","operan sin papeles","funcionan sin directiva"], response: '🤖📢 Esa empresa opera ILEGALMENTE sin Directiva de Funcionamiento. Según Decreto 93 art. 15°, todas las empresas de seguridad DEBEN tener autorización vigente. Denuncia inmediatamente: pueden clausurarla y multar a directivos.' },
                'rule_327': { keywords: ["si no tengo curso os10", "qué pasa si no tengo curso","qué pasa si trabajo sin curso","consecuencias sin capacitación","multa por no tener curso","sanción trabajar sin formación"], response: '🤖⚖️ Consecuencias trabajar sin curso: 1) Multa personal: 25-125 ingresos mínimos 2) Multa empresa: 25-250 ingresos mínimos 3) Prohibición ejercer 4) Antecedentes laborales negativos 5) Posible denuncia penal por ejercicio ilegal de profesión.' },
                'rule_328': { keywords: ["qué pasa si trabajo sin credencial","consecuencias sin licencia","multa por no tener credencial","sanción trabajar sin autorización"], response: '🤖⚖️ Consecuencias trabajar sin credencial: 1) Multa personal: 25-125 ingresos mínimos 2) Multa empresa: hasta 250 ingresos mínimos 3) Inhabilitación temporal 4) Antecedentes penales posibles 5) Clausura del servicio de seguridad.' },
                'rule_329': { keywords: ["qué pasa empresa sin directiva","consecuencias operar sin autorización","multa empresa sin directiva","sanción compañía ilegal"], response: '🤖⚖️ Consecuencias empresa sin directiva: 1) Clausura INMEDIATA 2) Multa directivos: 25-250 ingresos mínimos 3) Inhabilitación directivos 4) Pérdida inversión 5) Responsabilidad civil por daños 6) Posible querella criminal por ejercicio ilegal.' },
                'rule_350': { keywords: ["donde puedo hacer el curso","empresa capacitadora","empresa de capacitacion","punto 7"], response: '🤖🧙🏼‍♂️✅ 🧙🏻‍♂️ Estas son algunas empresas de aqui de la region:\n*EMPRESAS DE CAPACITACIÓN 2025* https://d6.short.gy/Cap'},
                'rule_351': { keywords: ["quien es tu creador","quien te creo"], response: '🤖🧙🏼‍♂️✅ Mi creador es todo el equipo de Profesionales que se encuentra trabajando en la oficina de seguridad Privada OS10 Coquimbo y el\n*Ingeniero en Informática y Ciberseguridad Daniel Figueroa Chacama*' }
            };

            function speakText(text) {
                const cleanText = text.replace(/🤖|👮🏻‍♂️|📋|🕐|💰|😊|👋|⬇️|👇🏽|☝🏼|✅|⚠️|❌|🧙🏻‍♂️|🚦|➢/g, '').replace(/<br>/g, '. ').replace(/<strong>/g, '').replace(/<\/strong>/g, '').replace(/\n/g, '. ').replace(/\*/g, '');
                if (!cleanText.trim() || !speechSynth) return;

                speechSynth.cancel();
                const utterance = new SpeechSynthesisUtterance(cleanText);

                // Lógica mejorada para seleccionar la voz de Diego o una voz masculina
                let selectedVoice = null;

                if (availableVoices.length > 0) {
                    // Prioridad 1: Buscar "Diego"
                    selectedVoice = availableVoices.find(voice => voice.name.toLowerCase().includes('diego') && voice.lang.startsWith('es'));

                    // Prioridad 2: Buscar otras voces masculinas comunes si no se encuentra a Diego
                    if (!selectedVoice) {
                        selectedVoice = availableVoices.find(voice => (voice.name.toLowerCase().includes('jorge') || voice.name.toLowerCase().includes('carlos')) && voice.lang.startsWith('es'));
                    }

                    // Prioridad 3: Buscar cualquier voz en español que no parezca femenina
                    if (!selectedVoice) {
                        const femaleNames = /laura|helena|paulina|isabelle|sofia|camila|elena|isabel/i;
                        selectedVoice = availableVoices.find(voice => voice.lang.startsWith('es') && !femaleNames.test(voice.name));
                    }

                    // Prioridad 4: Como último recurso, tomar la primera voz en español
                    if (!selectedVoice) {
                        selectedVoice = availableVoices.find(voice => voice.lang.startsWith('es'));
                    }
                }

                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                    console.log('Usando voz:', selectedVoice.name);
                } else {
                    console.warn('No se encontró una voz en español preferida. Se usará la voz por defecto del sistema.');
                }

                utterance.lang = 'es-CL';
                utterance.rate = 1.1;
                utterance.pitch = 0.8; // Tono más bajo para sonar más masculino
                speechSynth.speak(utterance);
            }

            function toggleChat() {
                const popup = document.getElementById('chat-popup');
                const backdrop = document.getElementById('chat-backdrop');
                const button = document.getElementById('chat-toggle-button');
                
                const isHidden = popup.classList.contains('hidden');
                popup.classList.toggle('hidden');
                backdrop.classList.toggle('hidden');
                button.classList.toggle('hidden', isHidden);
            }

            function addMessage(sender, text, buttons = []) {
                const chatMessages = document.getElementById('chat-messages');
                const messageDiv = document.createElement('div');
                
                let content = '';
                if (sender === 'user') {
                    messageDiv.className = 'flex items-start space-x-2 mb-3 justify-end';
                    content = `
                        <div class="bg-blue-500 text-white p-3 rounded-lg max-w-xs">${text}</div>
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0">U</div>
                    `;
                } else {
                    messageDiv.className = 'flex items-start space-x-2 mb-3';
                    const formattedText = text.replace(/\n/g, '<br>').replace(/\*(.*?)\*/g, '<strong>$1</strong>');
                    const buttonsHtml = buttons.length > 0 ? '<div class="mt-2 space-y-1">' + buttons.map(btn => 
                        `<button class="response-button block w-full text-left bg-green-100 hover:bg-green-200 dark:bg-gray-700 dark:hover:bg-gray-600 border border-green-500/50 dark:border-green-700 text-green-800 dark:text-green-300 text-xs py-1.5 px-3 rounded-lg transition-all font-medium" onclick="window.handleUserButtonClick('${btn}')">${btn}</button>`
                    ).join('') + '</div>' : '';
                    
                    content = `
                        <div class="w-8 h-8 rounded-full bg-white border-2 border-yellow-400 flex items-center justify-center flex-shrink-0 p-1">
                            <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-sm text-gray-800 dark:text-gray-200">
                            ${formattedText}
                            ${buttonsHtml}
                        </div>
                    `;
                    setTimeout(() => speakText(text), 300);
                }
                messageDiv.innerHTML = content;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            window.handleUserButtonClick = (text) => {
                 document.getElementById('user-input').value = text;
                 handleMessage();
            }

            async function handleMessage() {
                const input = document.getElementById('user-input');
                const text = input.value.trim();
                const lowerText = text.toLowerCase();
                
                if (!text) return;
                
                addMessage('user', text);
                input.value = '';
                
                let response = null;

                for (const ruleKey in responses) {
                    const rule = responses[ruleKey];
                    for (const keyword of rule.keywords) {
                        const cleanedKeyword = keyword.replace(/\*/g, '');
                        if (lowerText.includes(cleanedKeyword)) {
                            response = rule.response;
                            break;
                        }
                    }
                    if (response) break;
                }
                
                if (response) {
                    setTimeout(() => addMessage('bot', response), 500);
                } else {
                    addTypingIndicator();
                    try {
                        const rulesAsText = Object.values(responses).map(r => `Si el usuario pregunta por "${r.keywords.join(', ')}", responde: "${r.response}"`).join('\n');
                        const prompt = `Eres un asistente experto de la Oficina de Seguridad Privada OS10 de Coquimbo, Chile. Tu base de conocimiento se limita estrictamente a las siguientes reglas. Responde la consulta del usuario basándote únicamente en estas reglas. Si la consulta no se puede responder con las reglas proporcionadas, indica amablemente que no tienes información sobre ese tema. No utilices ningún conocimiento externo.\n\nReglas:\n${rulesAsText}\n\nConsulta del usuario: "${text}"`;

                        let chatHistory = [];
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = { contents: chatHistory };
                        const apiKey = ""; 
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                        
                        const apiResponse = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!apiResponse.ok) {
                            throw new Error(`API request failed with status ${apiResponse.status}`);
                        }

                        const result = await apiResponse.json();
                        removeTypingIndicator();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            const apiText = result.candidates[0].content.parts[0].text;
                            addMessage('bot', apiText);
                        } else {
                            addMessage('bot', 'Lo siento, no pude procesar tu solicitud en este momento.');
                        }
                    } catch (error) {
                        console.error("Error calling Gemini API:", error);
                        removeTypingIndicator();
                        addMessage('bot', 'Hubo un problema al conectar con el asistente. Por favor, intenta de nuevo.');
                    }
                }
            }
            
            function addTypingIndicator() {
                const chatMessages = document.getElementById('chat-messages');
                const typingDiv = document.createElement('div');
                typingDiv.id = 'typing-indicator';
                typingDiv.className = 'flex items-start space-x-2 mb-3';
                typingDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-white border-2 border-yellow-400 flex items-center justify-center flex-shrink-0 p-1">
                        <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function removeTypingIndicator() {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) {
                    indicator.remove();
                }
            }


            function startVoiceInput() {
                if (!recognition) return;

                const voiceBtn = document.getElementById('voice-btn');
                if (isListening) {
                    recognition.stop();
                    return;
                }

                isListening = true;
                voiceBtn.classList.add('animate-pulse');
                recognition.start();

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('user-input').value = transcript;
                    handleMessage();
                };

                recognition.onerror = function(event) {
                    console.error("Error en reconocimiento de voz:", event.error);
                };

                recognition.onend = function() {
                    isListening = false;
                    voiceBtn.classList.remove('animate-pulse');
                };
            }

            function readLastMessage() {
                const messages = document.querySelectorAll('#chat-messages .dark\\:text-gray-200');
                if (messages.length > 0) {
                    const lastMessage = messages[messages.length - 1];
                    const text = lastMessage.innerText;
                    speakText(text);
                }
            }
            
            // --- Asignación de Eventos ---
            document.getElementById('chat-toggle-button').addEventListener('click', toggleChat);
            document.getElementById('chat-close-btn-internal').addEventListener('click', toggleChat);
            document.getElementById('chat-backdrop').addEventListener('click', toggleChat);
            document.getElementById('send-button').addEventListener('click', handleMessage);
            document.getElementById('user-input').addEventListener('keypress', e => e.key === 'Enter' && handleMessage());
            
            if (recognition) {
                document.getElementById('voice-btn').addEventListener('click', startVoiceInput);
            }
            document.getElementById('speak-btn').addEventListener('click', readLastMessage);

            document.addEventListener('keydown', e => {
                if (e.altKey && e.key === 'v') {
                    e.preventDefault();
                    startVoiceInput();
                }
            });

            // Mensaje de bienvenida
            setTimeout(() => {
                const welcomeButtons = ['Menú', 'Menú OS10', 'Valores', 'Horario'];
                addMessage('bot', '¡Hola! Soy tu asistente virtual de la oficina OS10 Coquimbo. ¿En qué puedo ayudarte hoy?', welcomeButtons);
            }, 1000);
        });
    </script>
</body>
</html>


