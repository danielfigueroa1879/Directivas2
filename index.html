<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    
    <!-- Meta Tags Principales y de PWA -->
    <title>Directivas de Funcionamiento OS10</title>
    <meta name="description" content="Requisitos e informaciÃ³n para Directivas de Funcionamiento de Seguridad Privada OS10.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff"/>
    <meta name="application-name" content="Directivas OS10">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- <link rel="manifest" href="manifest.json"> -->

    <!-- ConfiguraciÃ³n para iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Directivas OS10">

    <!-- Favicons y Iconos EstÃ¡ndar -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="assets/images/icon-192x192.png">
    
    <!-- Dependencias y Estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            background-image: url('assets/images/101.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .card-container { 
            max-width: 600px; 
            width: 90%; /* Asegura que se vea bien en mÃ³viles */
            margin: 2rem auto; /* Centrado horizontal y margen vertical */
        }
        .logo-os10-container { 
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            height: 60px;
            z-index: 10;
        }
        .section-card { 
            border-left-width: 4px; 
            padding: 1rem; 
            border-radius: 0.5rem; 
        }
        
        .voice-button { transition: all 0.3s ease; }
        .voice-button:hover { transform: scale(1.05); }
        .voice-button:active { transform: scale(0.95); }
        .voice-button.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .response-button { transition: all 0.2s ease; }
        .response-button:hover { transform: translateX(4px); }

        /* Estilos Chatbot */
        #chat-widget-container { 
            position: fixed; 
            bottom: 1.5rem; 
            right: 1.5rem;
            z-index: 1000; 
            display: flex; 
            flex-direction: column; 
            align-items: flex-end;
        }
        #chat-popup { 
            width: 350px; 
            height: 500px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
        }
        #chat-toggle-button { 
            width: 80px;
            height: 80px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
        }
        .chat-messages-container { 
            scroll-behavior: smooth; 
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 8px 12px;
        }
        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 2px;
            background-color: #9ca3af;
            border-radius: 50%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }


        /* Ajuste para pantallas mÃ¡s grandes */
        @media (min-width: 1024px) {
            #chat-toggle-button {
                width: 90px;
                height: 90px;
            }
        }
    </style>
</head>
<body>
    
    <!-- Contenido de la pÃ¡gina -->
    <div class="card-container bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-xl shadow-lg space-y-6 relative p-6">
        <!-- Logo dentro del contenedor -->
        <a href="https://www.zosepcar.cl/OS10.php" target="_blank" aria-label="Visitar pÃ¡gina de ZOSEPCAR" class="logo-os10-container">
            <img src="assets/images/logo-os10.png" alt="Logo OS10" class="h-full" loading="lazy">
        </a>

        <div id="visitor-counter-container" class="absolute top-5 right-6 text-xs text-gray-500 dark:text-gray-400">
            <p class="flex items-center">
                <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                <span>Visitas: <span id="visit-counter" class="font-bold">--</span></span>
            </p>
        </div>
        
        <header class="text-center pt-8">
            <h1 class="text-2xl font-bold text-gray-800 dark:text-white">DIRECTIVA DE FUNCIONAMIENTO</h1>
            <h2 class="text-lg font-semibold text-gray-600 dark:text-gray-300">InstalaciÃ³n - Eventos - Partidos de FÃºtbol Profesional</h2>
        </header>
        
        <main class="space-y-4">
            <section class="section-card border-blue-500 bg-blue-100/80 dark:bg-blue-900/50">
                <h3 class="font-bold text-blue-800 dark:text-blue-300">1ï¸âƒ£ Presentar Directiva DD.FF.</h3>
                <ul class="list-disc pl-5 text-sm text-gray-700 dark:text-gray-300">
                    <li>Vigencia 03 aÃ±os en instalaciÃ³n.</li>
                    <li>Presentar con 15 dÃ­as hÃ¡biles de anticipaciÃ³n.</li>
                    <li>
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=9081" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 93/1985</a>,
                        <a href="https://www.zosepcar.cl/content/OS10/Decreto-261.pdf" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 261</a>,
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=1200633" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">Dec. 32/2024</a>.
                   </li>
               </ul>
            </section>
            
            <section class="section-card border-green-500 bg-green-100/80 dark:bg-green-900/50">
                <h3 class="font-bold text-green-800 dark:text-green-300">2ï¸âƒ£ DocumentaciÃ³n</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">02 Solicitudes Simple.</p>
                        <a href="https://dal5.short.gy/Solic" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Solicitud">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">01 copia DD.FF. completa.</p>
                        <a href="https://dal5.short.gy/D" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Requisitos segÃºn tipo.</p>
                        <a href="https://dal5.short.gy/Re24" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Requisi.">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Uniforme Decreto 32/2024.</p>
                        <a href="https://dal5.short.gy/0u" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Ejemplo Uniforme">Ejemplo</a>
                    </li>
                    <li>
                        <p class="mb-1">AnÃ¡lisis de Vulnerabilidades.</p>
                        <a href="https://dal5.short.gy/6ydn" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar AnÃ¡lisis">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Solicitud Uniforme Distinto.</p>
                        <a href="https://d6.short.gy/G8" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Descargar</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-red-500 bg-red-100/80 dark:bg-red-900/50">
                <h3 class="font-bold text-red-800 dark:text-red-300">3ï¸âƒ£ Todo escaneado en Digital.</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">Escanear en 01 archivo PDF.</p>
                        <a href="https://dal5.short.gy/I" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600 transition-colors" title="Herramienta para unir PDF">Herramienta</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-yellow-500 bg-yellow-100/80 dark:bg-yellow-900/50">
                <h3 class="font-bold text-yellow-800 dark:text-yellow-300">4ï¸âƒ£ Tramitar Credenciales</h3>
                <ul class="space-y-4 text-sm text-gray-700 dark:text-gray-300">
                    <li>
                        <p class="mb-1">Resol. 1480 (10.04.2025).</p>
                        <a href="https://d6.short.gy/dsds" target="_blank" class="inline-block px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" title="Descargar Documentos">Descargar</a>
                    </li>
                    <li>
                        <p class="mb-1">Tramitar credenciales.</p>
                        <a href="credenciales.html" class="inline-block px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" id="tramitarCredencialesBtn" title="Tramitar Credenciales">Tramitar</a>
                    </li>
                </ul>
            </section>
        </main>
        
        <footer class="relative mt-6 border-t border-gray-200 dark:border-gray-700 pt-4">
            <div class="text-center text-sm text-gray-600 dark:text-gray-400 leading-tight pr-16">
                <span>Haga clic para descargar.</span><br>
                <span>Â©2025 - Daniel Figueroa Ch.</span><br>
                <span>Ingeniero en InformÃ¡tica.</span>
            </div>
            <img src="assets/images/qr.png" alt="CÃ³digo QR" class="absolute right-4 bottom-4 w-11 h-11 md:w-14 md:h-14" title="MÃ¡s informaciÃ³n" loading="lazy">
        </footer>
   </div>

    <!-- ===== CHATBOT FLOTANTE CON VOZ ===== -->
    <div id="chat-widget-container">
        <div id="chat-popup" class="hidden flex flex-col bg-white/[.95] dark:bg-gray-800/[.95] backdrop-blur-lg border border-green-500/50 rounded-2xl">
            <!-- Header -->
            <header class="p-3 border-b border-green-500/30 flex items-center justify-between text-gray-800 dark:text-white">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-white border-2 border-green-400/80 flex items-center justify-center flex-shrink-0 p-1">
                        <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                    </div>
                    <div>
                        <h1 class="text-base font-bold">Asistente OS10 ğŸ¤</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Con funciones de voz</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="speak-btn" class="voice-button bg-green-500 hover:bg-green-600 rounded-lg p-2 text-white" title="ğŸ”Š Leer Ãºltimo mensaje"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg></button>
                    <button id="chat-close-btn-internal" class="text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                </div>
            </header>
            <main id="chat-messages" class="chat-messages-container flex-1 p-4 overflow-y-auto space-y-4"></main>
            <footer class="p-3 border-t border-green-500/30">
                <div class="mb-2 text-xs text-center text-gray-500 dark:text-gray-400"><span>ğŸ”Š Auto-lectura activada | Alt+V para micrÃ³fono</span></div>
                <div class="flex items-center space-x-2 bg-gray-200 dark:bg-gray-700 rounded-xl p-2">
                    <button id="voice-btn" class="voice-button bg-blue-500 hover:bg-blue-600 rounded-lg p-2 text-white" title="ğŸ¤ Hablar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/></svg></button>
                    <input type="text" id="user-input" placeholder="Escribe o usa el micrÃ³fono..." class="flex-1 w-full bg-transparent text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none px-2 text-base">
                    <button id="send-button" class="flex-shrink-0 bg-green-500 hover:bg-green-600 transition-colors rounded-lg p-2 text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                </div>
            </footer>
        </div>
        <button id="chat-toggle-button" class="bg-white dark:bg-gray-800 rounded-2xl flex items-center justify-center p-1 mt-4" title="Abrir Asistente Virtual con Voz">
            <img src="assets/images/poli.png" alt="Icono del Chatbot" class="h-full w-full object-contain">
        </button>
    </div>
    <div id="chat-backdrop" class="hidden fixed inset-0 bg-black/60 z-40"></div>

    <!-- Scripts -->
    <script type="module">
        // SCRIPT FIREBASE (Contador de visitas)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyBB2AegLOQ-b6ZGI_cuPycSFJFuRsUlu5U",
          authDomain: "cuenta-946e2.firebaseapp.com",
          projectId: "cuenta-946e2",
          storageBucket: "cuenta-946e2.firebasestorage.app",
          messagingSenderId: "816979648502",
          appId: "1:816979648502:web:809beffeea8ba7968031d7",
          measurementId: "G-RX9KZSC0F4"
        };
        
        async function runCounter() {
            const counterSpan = document.getElementById('visit-counter');
            try {
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const auth = getAuth(app);
                await signInAnonymously(auth);
                const counterRef = doc(db, `page-visits/${firebaseConfig.projectId}/visits/counter`);
                const newCount = await runTransaction(db, async (transaction) => {
                    const counterDoc = await transaction.get(counterRef);
                    let count = 1;
                    if (counterDoc.exists()) {
                        count = counterDoc.data().count + 1;
                        transaction.update(counterRef, { count: count });
                    } else {
                        transaction.set(counterRef, { count: count });
                    }
                    return count;
                });
                if (counterSpan) counterSpan.textContent = newCount.toLocaleString('es-CL');
            } catch (error) {
                console.error("ERROR: FallÃ³ el proceso del contador.", error);
                if (counterSpan) counterSpan.textContent = "Error";
            }
        }
        runCounter();
    </script>

    <script>
        // SCRIPT DEL CHATBOT Y LÃ“GICA PRINCIPAL
        document.addEventListener('DOMContentLoaded', function() {

            // LÃ³gica para detectar preferencia de modo oscuro del sistema
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
            } else {
                document.documentElement.classList.remove('dark')
            }

            // --- LÃ³gica del Chatbot ---
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const speechSynth = window.speechSynthesis;
            let recognition;
            let isListening = false;
            let availableVoices = [];

            function loadVoices() {
                availableVoices = speechSynth.getVoices();
                if (availableVoices.length > 0) {
                     console.log("Voces cargadas.");
                }
            }

            loadVoices();
            if (speechSynth.onvoiceschanged !== undefined) {
                speechSynth.onvoiceschanged = loadVoices;
            }


            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.lang = 'es-CL';
                recognition.continuous = false;
                recognition.interimResults = false;
            } else {
                console.warn("El reconocimiento de voz no es compatible con este navegador.");
                document.getElementById('voice-btn').style.display = 'none';
            }

            const responses = {
                'rule_4': { keywords: ["guias","guia","componentes del sistema","componentes"], response: '*ESCRIBA EL NOMBRE DEL COMPONENTE DEL SISTEMA Y SE DESCARGARA UNA GUIA, PARA QUE PUEDA REALIZAR SU TRAMITE*ğŸ‘®ğŸ»â€â™‚ï¸ \n â¬‡ï¸\n*1.-* VIGILANTE PRIVADO\n*2.-* GUARDIA DE SEGURIDAD\n*3.-* JEFE DE SEGURIDAD \n*4.-* ENCARGADO DE SEGURIDAD\n*5.-* SUPERVISOR\n*6.-* ASESOR \n*7.-* CAPACITADOR\n*8.-* TÃ‰CNICO \n*9.-* OPERADOR DE CAJEROS \n*10.-* INSTALADOR TÃ‰C. DE SEGURIDAD\n*11.-* OPERADOR CCTV.\n*12.-* EMPRESAS' },
                'rule_5': { keywords: ["guardia de seguridad","guardia","guardia seguridad"], response: 'ğŸ¤– ğŸ§™ğŸ»â€â™‚ï¸ Ok... en este link encontrarÃ¡ la guÃ­a de *GUARDIA DE SEGURIDAD* la puede descargar: https://www.zosepcar.cl/content/OS10/TRAM_guardia_de_seguridad.pdf' },
                'rule_6': { keywords: ["jefe de seguridad"], response: 'OK..en este link encontrarÃ¡ la guÃ­a de *JEFE DE SEGURIDAD* la puede descargar: https://www.zosepcar.cl/content/OS10/TRAM_jefe_de_seguridad.pdf' },
                'rule_7': { keywords: ["supervisor","acreditaciÃ³n supervisor","supervisor seguridad","para supervisor","acreditar un supervisor","supervisores","acreditar supervisores"], response: 'ğŸ¤–. *SUPERVISOR* \n1.- *GUIA*\nhttps://www.zosepcar.cl/content/OS10/TRAM_supervisor.pdf\n2.- *CREDENCIAL*\nhttps://os10.short.gy/Sup' },
                'rule_8': { keywords: ["encargado de seguridad","encargado"], response: 'ğŸ¤– *ENCARGADO DE SEGURIDAD*\n*CREDENCIAL:*\nhttps://bit.ly/3H6pIOu\n*GUIA:*\nhttps://www.zosepcar.cl/content/OS10/TRAM_encargado_de_seguridad.pdf' },
                'rule_9': { keywords: ["capacitador"], response: 'ğŸ¤– *CAPACITADOR*\nhttps://www.zosepcar.cl/content/OS10/TRAM_capacitador.pdf' },
                'rule_10': { keywords: ["tecnico"], response: '*TÃ‰CNICO* https://www.zosepcar.cl/content/OS10/TRAM_tecnico.pdf' },
                'rule_11': { keywords: ["asesor"], response: 'ğŸ¤– *ASESOR*\n**GUÃA:* \nhttps://www.zosepcar.cl/content/OS10/TRAM_asesor.pdf' },
                'rule_12': { keywords: ["instalador tecnico","tÃ©cnico","instalador"], response: '*INSTALADOR TÃ‰CNICO*\n https://www.zosepcar.cl/content/OS10/TRAM_instalador_tecnico.pdf' },
                'rule_13': { keywords: ["operador de cajeros"], response: '*OPERADOR DE CAJEROS AUTOMÃTICOS* \nhttps://www.zosepcar.cl/content/OS10/TRAM_operador_cajeros.pdf' },
                'rule_14': { keywords: ["operador cctv","cctv"], response: 'ğŸ¤– *OPERADOR CCTV*\n*GUÃA:* https://www.zosepcar.cl/content/OS10/TRAM_operador_cctv.pdf' },
                'rule_15': { keywords: ["manuales"], response: 'ğŸ¤– â¬‡ï¸ *ESCRIBE UNA OPCIÃ“N* ğŸ‘®ğŸ»â€â™‚ï¸ğŸš¦\n*1M.-* MANUAL DE FUNCIONAMIENTO\n*2M.-* MANUAL DE CAPACITACIÃ“N \n*3M.-* MANUAL DE ORGANIZACIÃ“N' },
                'rule_16': { keywords: ["empresas","empresa"], response: '*EMPRESAS* https://www.zosepcar.cl/content/OS10/TRAM_empresas.pdf' },
                'rule_17': { keywords: ["1m"], response: '*MANUAL DE FUNCIONAMIENTO* https://www.zosepcar.cl/content/OS10/manual_funcionamiento.pdf' },
                'rule_18': { keywords: ["3m"], response: '*MANUAL DE ORGANIZACIÃ“N*\nhttps://www.zosepcar.cl/content/OS10/manual_organizacion.pdf' },
                'rule_19': { keywords: ["2m"], response: '*MANUAL DE CAPACITACIÃ“N*\nhttps://www.zosepcar.cl/content/OS10/manual_capacitacion.pdf' },
                'rule_20': { keywords: ["leyes"], response: '*ESCRIBE UN NUMERO LEY O DECRETO*.\n ğŸš¦. â¬‡ï¸ \n \nDECTO. *261* DEL 31.0 un7.2020\nDECTO. *298* DEL 17.09.2019\n DECTO. *123* DEL 05.04.2019\nDECTO. *1045* DEL 12.09.2018\nDECTO. *867* DEL 12.09.2017\nDECTO. *1814* DEL 10.11.2014\nDECTO. *222* DEL 30.10.2014\nDECTO. *1122* DEL 19.10.1994\nDECTO. *41* DEL 05.03.1996\nDECTO. *1772* DEL 26.01.1995\nDECTO. *1773* DEL 14.11.1994\nDECTO. *93* DEL 21.10.1985\nD. LEY. *3607* DEL 08.01.1981\nLEY *19303* DEL 13.04.1994\nResol. *253* DEL 29.10.2013\nResol. *59* DEL 30.09.2014\nResol. *32* DEL 31.01.2024\nResol. *80* DEL 20.03.2024\nLEY. *21659* DEL 21.03.2024' },
                'rule_21': { keywords: ["261"], response: '*DECRETO NRO 261*. \n\n\nhttps://www.zosepcar.cl/content/OS10/Decreto-261.pdf' },
                'rule_22': { keywords: ["298"], response: '*DECRETO 298*. https://www.bcn.cl/leychile/navegar?idNorma=1136545&idParte=10054790&idVersion=2019-09-17' },
                'rule_23': { keywords: ["123"], response: '*DECRETO 123*. https://www.bcn.cl/leychile/navegar?idNorma=1130300' },
                'rule_24': { keywords: ["1045"], response: '*DECRETO 1045*. https://www.bcn.cl/leychile/navegar?idNorma=1122982&idParte=9948603&idVersion=2018-09-12' },
                'rule_25': { keywords: ["867"], response: '*DECRETO 867*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1116274' },
                'rule_26': { keywords: ["1814"], response: '*DECRETO 1814*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1069299' },
                'rule_27': { keywords: ["222"], response: '*DECRETO 222*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1055580' },
                'rule_28': { keywords: ["1122"], response: '*DECRETO 1122*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=1072929' },
                'rule_29': { keywords: ["41"], response: '*DECRETO 41*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=19870' },
                'rule_30': { keywords: ["1772"], response: '*DECRETO 1772*. \nhttps://www.bcn.cl/leychile/navegar?idNorma=18592' },
                'rule_31': { keywords: ["1773"], response: '*DECRETO 1773*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=18594' },
                'rule_32': { keywords: ["93"], response: '*DECRETO 93*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=9081' },
                'rule_33': { keywords: ["3607"], response: '*D. LEY 3607*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=7193' },
                'rule_34': { keywords: ["19303"], response: '*LEY 19303*. \n\nhttps://www.bcn.cl/leychile/navegar?idNorma=30670' },
                'rule_35': { keywords: ["253"], response: '*Resol. 253*. https://www.zosepcar.cl/content/OS10/resolucion_253.pdf' },
                'rule_36': { keywords: ["59"], response: '*Resol. 59*. https://www.zosepcar.cl/content/OS10/resolucion_59.pdf' },
                'rule_37': { keywords: ["32"], response: '*Decreto. 32*. https://www.bcn.cl/leychile/navegar?idNorma=1200633' },
                'rule_38': { keywords: ["80"], response: '*Resol. 80*. https://www.zosepcar.cl/content/OS10/resolucion_80.pdf' },
                'rule_39': { keywords: ["21659", "nueva ley de seguridad"], response: 'Entra en vigencia el 28-NOV-2025 *LEY 21659*. https://dal5.short.gy/LeySeg' },
                'rule_60': { keywords: ["cursos","curso"], response: 'ğŸ¤– â¬‡ï¸ *ESCRIBE UNA OPCIÃ“N* ğŸ‘®ğŸ»â€â™‚ï¸ğŸš¦\n*CF.-* CURSO FORMACIÃ“N GUARDIA\n*CJ.-* CURSO JEFE DE SEGURIDAD\n*CE.-* CURSO ENCARGADO\n*CS.-* CURSO SUPERVISOR\n*CT.-* CURSO TÃ‰CNICO\n*CI.-* CURSO INSTALADOR\n*CC.-* CURSO OPERADOR CAJEROS\n*CV.-* CURSO OPERADOR CCTV\n*CP.-* CURSO PERFECCIONAMIENTO' },
                'rule_65': { keywords: ["fono", "telefono","numero","ubicados","direcciÃ³n","atenciÃ³n","horario","horarios","ubicaciÃ³n","direccion oficina","cual es la direcciÃ³n del os10","horario atenciÃ³n publico", "donde estan", "donde esta el os10 coquimbo", "donde esta el os10","donde", "direccion"], response: 'ğŸ¤– ğŸ‘‰ğŸ¼ *OS10 COQUIMBO*\nDe lunes a jueves de 09:00 horas a 13:00 horas.\nCienfuegos 180, La Serena.\nFonos: 512651024-512651022-\nCredenciales:512651023\nhttps://maps.app.goo.gl/QUhujWbTF1FjDA7E6' },
                'rule_66': { keywords: ["menu","menÃº","menus"], response: '*ESCRIBA LO QUE ESTA CON NEGRILLAS*\nconsultar patente: *ppu*\nConsultar nombre o rut: *rut*\nConsultar guardia *registro*\nmenÃº OS10: *Os10*\nComisaria cuadrantes: *comisaria*\nCiberseguridad: *ciberseguridad*\nDGAC Seg. Priv. *Dgac*\nModifica 261: *Decreto 32*\nResol.3632: *no hay sistema*\nDirectiva: *directiva*\n*Bots*: Seguridad privada, Ciberseguridad, trÃ¡nsito, Ley Karyn' },
                'rule_68': { keywords: ["imc"], response: '*CALCULAR IMC*\nhttps://nutricionistavirtual.cl/calculadora/' },
                'rule_69': { keywords: ["curso os10","vigencia curso","tiene curso","si tiene curso"], response: 'ğŸ¤– *GUARDIA / EMPRESA* ğŸ‘®ğŸ»â€â™‚ï¸ ğŸ‘‡ğŸ½ VIGENCIA GG.SS./ VV.PP. /EMP. \nhttps://zosepcar.cl/OS10.php#buscador\n\nğŸ­ *RAZON SOC. / RUT EMP.*ğŸ‘‡ğŸ½\nboletaofactura.com\ngenealog.cl\nmercantil.com\n \nâš–ï¸ *JUZGADO DE TURNO LA SERENA*\nhttps://bit.ly/3GIrWE1' },
                'rule_70': { keywords: ["4651"], response: '*RESOLUCIÃ“N 4651 INASISTENCIA*\n\nhttps://zosepcar.cl/content/OS10/resol_4651.pdf' },
                'rule_71': { keywords: ["empresa capacitacion arica"], response: '*EMPRESA DE CAPACITACIÃ“N ARICA*\n\n*SETCH* FONO: 582251978\n*GSC* FONO: 950144679\n*EDGARDO ABARZUA* FONO: 977777716\n*FUNCAL* FONO: 951490729' },
                'rule_72': { keywords: ["empresa en un dia"], response: '*\"CREA TU EMPRESA EN UN DIA\"* \n https://www.registrodeempresasysociedades.cl/' },
                'rule_73': { keywords: ["insignia digital"], response: '*INSIGNIA DIPLOMADO CIBERSEGURIDAD*\n\nhttps://bit.ly/3DSuD46' },
                'rule_74': { keywords: ["capacitadores"], response: 'ğŸ¤– *CAPACITADORES*\n https://drive.google.com/file/d/1hpZrzhXCnGyLkFLRhj0FOY_zDwTEUIaN/view?usp=drivesdk' },
                'rule_76': { keywords: ["domicilio figueroa"], response: '*DOMICILIO*\nhttps://maps.app.goo.gl/rnqLdPG5sEFzN32C9' },
                'rule_78': { keywords: ["votaciones","votar","excusarme","lugar de votaciÃ³n"], response: '*LUGAR DE VOTACIÃ“N - VOCAL DE MESA*â˜ğŸ¼ğŸ‘ğŸ½\nhttps://consulta.servel.cl/\n*PUEDE LLAMAR AL* 600 600 0166 desde su telÃ©fono\nğŸ¤– *CONSULTAS Y RECLAMOS SERVEL LINK- EXCUSA*: \nhttps://www.servel.cl/contacto/' },
                'rule_80': { keywords: ["comisaria","cuadrante","cuadrantes","comisarÃ­as"], response: 'ğŸ¤–ğŸ‘®ğŸ»â€â™‚ï¸ TEL. CUADRANTES\n- https://www.comisariavirtual.cl\n- https://www.stop.carabineros.cl/\n- BUSCA TU CUADRANTE:\nhttps://www.bit.ly/3Yna7AP\n- CUAD. LA SERENA\nhttps://www.dal5.short.gy/C\n- CUAD. LAS COMPAÃ‘IAS\nhttps://www.dal5.short.gy/C1\n- CUAD. COQUIMBO\nhttps://www.dal5.short.gy/Co\n- MAPA CUAD LA SERENA\nhttps://www.d6.short.gy/LS\n- MAPA CUAD COQUIMBO\nhttps://www.d6.short.gy/CQ\n- CEROFILAS\nhttps://www.dal5.short.gy/CFil' },
                'rule_82': { keywords: ["rut","ver un rut"], response: 'ğŸ¤– ğŸ§™ğŸ»â€â™‚ï¸ *Consultar R.U.T.* ğŸ‘‡?\nhttps://www.elrutificador.com/\nhttps://www.nombrerutyfirma.com\nhttps://www.rutynombre.com/\nhttps://www.rutificador.co/rut/' },
                'rule_83': { keywords: ["aaff"], response: '*AA.FF. A NIVEL NACIONAL* ğŸ¤–Busque la comuna que necesita en el mapa. \nhttps://www.zosepcar.cl/OS10.php#autoridad' },
                'rule_85': { keywords: ["reclamo","fiscalizacion","fiscalizar"], response: '*REQUERIMIENTO* \n https://dal5.short.gy/R3' },
                'rule_86': { keywords: ["cuÃ¡l es la pagina del os10","zosepcar"], response: '*ğŸ¤– EstÃ¡ es la pÃ¡gina del os10*\nhttps://www.zosepcar.cl/OS10.php' },
                'rule_87': { keywords: ["reglamento"], response: '*Reglamento 11*\nhttps://drive.google.com/file/d/0By_MScWZi3fRLVlIN2dJby1hekU/view?usp=drivesdk&resourcekey=0-3OB6XmcfWnIf9KZU1J65Yw' },
                'rule_88': { keywords: ["ciberseguridad"], response: 'ğŸ¤– ğŸ§™ğŸ»â€â™‚ï¸ *\"CIBERSEGURIDAD\"*\nâ¢ *1.-Â¿Que Hacer?*:\nhttps://www.dal5.short.gy/SIyeI3\nâ¢ *2.,-Â¿CÃ³mo notificar?*:\nhttps://www.dal5.short.gy/GFxMgX' },
                'rule_89': { keywords: ["menu os10", "menÃº O.S.10"], response: '*De acuerdo OS10*ğŸ§™ğŸ»â€â™‚ï¸ğŸ‘®ğŸ»â€â™‚ï¸â˜ï¸*Escriba lo que estÃ¡ con negrillas:* \n \n â¬‡ï¸ ESCRIBA El QUE NECESITE:\nâ¢ *Bots:* recibirÃ¡ un listado de bots con Inteligencia Avanzada.\nâ¢ *Componentes:* ObtendrÃ¡ las guÃ­as\nâ¢ *Manuales:* Se desplega menu\nâ¢ *Leyes:* Se desplega menu\nâ¢ *Editable:* Documentos en Word.\nâ¢ *Directiva:* Requisitos presentar\nâ¢ *Valores:* Cursos y planes.\nâ¢ *Independiente:* Requisitos Cred.\nâ¢ *Menu credencial:* MenÃº credenciales\nâ¢ *Nueva Ley:* Nueva ley seguridad privada y reglamento.' },
                'rule_90': { keywords: ["directiva","directiva de funcionamiento","directivas","directiva de funcionamiento instalacion","funcionamiento","formulario directiva"], response: 'ğŸ§™ğŸ»â€â™‚ï¸ğŸ¤– *PRESENTAR DIRECTIVA DE FUNCIONAMIENTO*\n(InstalaciÃ³n - Evento - Partidos de FÃºtbol Profesional)\nPagina: https://dal5.short.gy/df' },
                'rule_91': { keywords: ["mantra"], response: '*Mantra*\n\nOm: Om es la sÃ­laba semilla que sintoniza cualquier mantra que se recita en su vibraciÃ³n' },
                'rule_92': { keywords: ["usuario diploma"], response: '*PAGINA DIPLOMADO* https://centropyc.carabineros.cl/acipol/login/index.php Usuario: 982083a ContraseÃ±a: Flor9820&' },
                'rule_93': { keywords: ["auditorias empresa de capacitacion","auditorias empresas de capacitacion","auditoria empresa de capacitacion","auditoria empresas de capacitacion"], response: ',ğŸ‘®ğŸ¼*AUDITORIAS EMPRESA CAPACITACIÃ“N 2024*\n\nhttps://dal5.short.gy/AuCap' },
                'rule_95': { keywords: ["independiente","credencial independiente","credencial independientes"], response: 'ğŸ¤– *INDEPENDIENTE 1ER. SEM. 2025* \n*Descargar GuÃ­a:* \nhttps://os10.short.gy/I25' },
                'rule_96': { keywords: ["medidas"], response: 'ğŸ¤–ğŸ§™ğŸ»â€â™‚ï¸ *MEDIDAS DE SEGURIDAD*\nâ¢ *MED.EDITABLE:* https://dal5.short.gy/M3' },
                'rule_98': { keywords: ["Valores","cuanto cuesta","cual es el valor","valor plan","valores planes","valores plan","valor","cuesta"], response: 'ğŸ¤–ğŸ§™ğŸ»â€â™‚ï¸ *AQUI ESTAN LOS VALORES 2DO. SEMESTRE 2025*\n1.- CREDENCIAL\nhttps://dal5.short.gy/val\n2.- CRED. EMPRESA\nhttps://dal5.short.gy/C.emp\n3.- CURSO FORMACIÃ“N\nhttps://dal5.short.gy/Form\n4.- CURSO PERFECC\nhttps://dal5.short.gy/BjzkHI\n5.- VALOR PLAN\nhttps://os10.short.gy/Pl4n' },
                'rule_102': { keywords: ["no hay sistema"], response: 'ğŸ¤– *NO HAY SISTEMA CENTRAL ACTUALMENTE*\nLa resoluciÃ³n 3632 del 30 de Noviembre de 2023 establece que actualmente no existe un sistema central de registro.' },
                'rule_103': { keywords: ["infraccion","infracciones"], response: 'ğŸ¤– *INFRACCIONES TRANSITO*\nhttps://bit.ly/3HFKLaH\nhttps://bit.ly/3ilvbrN\nhttps://bit.ly/3ZcOzb9' },
                'rule_104': { keywords: ["infraccion os10"], response: 'ğŸ¤– *INFRACCIONES OS10*\nSegÃºn decreto 867 y sus modificaciones' },
                'rule_105': { keywords: ["infracciÃ³n alcoholes"], response: 'ğŸ¤– *INFRACCIONES ALCOHOLES*\nLey 19.925 sobre expendio y consumo de bebidas alcohÃ³licas' },
                'rule_106': { keywords: ["estadio"], response: 'ğŸ¤– *ESTADIO*\nRequisitos especiales para eventos deportivos segÃºn circular 28' },
                'rule_107': { keywords: ["bots"], response: 'ğŸ¤– *LISTADO DE BOTS INTELIGENCIA AVANZADA*\n- Bot Seguridad Privada\n- Bot Ciberseguridad\n- Bot TrÃ¡nsito\n- Bot Ley Karyn' },
                'rule_108': { keywords: ["dgac"], response: 'ğŸ¤– *DGAC SEGURIDAD PRIVADA*\nDirecciÃ³n General de AeronÃ¡utica Civil - Requisitos especiales' },
                'rule_109': { keywords: ["decreto 32"], response: '*DECRETO 32/2024*\nModifica decreto 261\nhttps://www.zosepcar.cl/content/OS10/Resol_32.pdf' },
                'rule_110': { keywords: ["editable","documentos word"], response: 'ğŸ¤– *DOCUMENTOS EDITABLES EN WORD*\nâœ… Estudio\nâœ… Plan\nâœ… Medidas\nâœ… Directiva\nâœ… Todos@ ' },
                'rule_111': { keywords: ["nueva ley"], response: 'ğŸ¤– *NUEVA LEY SEGURIDAD PRIVADA*\nLey 21.659 del 21 de marzo de 2024\nhttps://dal5.short.gy/LeySeg' },
                'rule_112': { keywords: ["menu credencial"], response: 'ğŸ¤– *MENÃš CREDENCIALES*\n- Guardia\n- Jefe Seguridad\n- Supervisor\n- Asesor\n- Independiente' },
                'rule_113': { keywords: ["vigilante privado"], response: 'ğŸ¤– *VIGILANTE PRIVADO*\nSimilar a guardia de seguridad pero con funciones especÃ­ficas\nhttps://www.zosepcar.cl/content/OS10/TRAM_vigilante_privado.pdf' },
                'rule_149': { keywords: ["empresas recursos humanos"], response: 'ğŸ¤– *EMPRESAS DE RECURSOS HUMANOS*\nAutorizaciÃ³n especial para intermediaciÃ³n laboral\nRequisitos especÃ­ficos' },
                'rule_150': { keywords: ["supermercados","sobre 500 uf","requisitos sobre 500 uf"], response: 'ğŸ¤– *REQUISITOS SOBRE 500 UF.*\n\nhttps://dal5.short.gy/S500' },
                'rule_152': { keywords: ["linkedin"], response: 'ğŸ§™ğŸ»â€â™‚ï¸.*LinkedIn* \nhttps://dal5.short.gy/Lin' },
                'rule_153': { keywords: ["pdf"], response: 'ğŸ¤– *PDF sh4nge 3dit0r 3d1t0r Plus*\n\n*https://dal5.short.gy/PDF2*' },
                'rule_154': { keywords: ["facultades","fiscalizar vigilante"], response: 'ğŸ§™ğŸ»â€â™‚ï¸ğŸ‘®ğŸ»â€â™‚ï¸ğŸ¦â˜ï¸ LAS FACULTADES CONFERIDAS A CARABINEROS DE CHILE CONFORME LO SIGUIENTE PARA *VIGILANTES PRIVADOS Y ENTIDAD OBLIGADAS* SEGÃšN EL ARTICULO 3 DEL DECRETO 3.607' },
                'rule_155': { keywords: ["circular","eventos"], response: 'ğŸ¤– *CIRCULAR 28*\n\n*https://www.bcn.cl/leychile/navegar?i=1083082*' },
                'rule_156': { keywords: ["cursos online","modalidad telematica"], response: 'ğŸ¤– *CURSOS MODALIDAD TELEMATICA* (online)\n\nhttps://www.zosepcar.cl/content/OS10/resolucion_80.pdf' },
                'rule_157': { keywords: ["guÃ­a de perro","perro"], response: 'ğŸ¤– D/E 164678609OS10 del 28/07/2022.\nğŸ‘®ğŸ•ğŸ•â€ğŸ¦º *INSTRUCCIONES SOBRE ACREDITACIÃ“N DE GUÃAS DE PERROS ADIESTRADOS Y CERTIFICACIÃ“N DE LOS EJEMPLARES*' },
                'rule_160': { keywords: ["requisitos plan"], response: 'ğŸ¤– ğŸ“˜ *REQUISITOS PLAN DE SEGURIDAD*\nhttps://dal5.short.gy/RPl4n' },
                'rule_161': { keywords: ["como presentar una ddff","presentar directiva","presentar una directiva de funcionamiento","presentar ddff","presentar dd.ff."], response: 'ğŸ¤–ğŸ‘‰ğŸ¼ *COMO SE DEBE PRESENTAR UNA DIRECTIVA DE FUNCIONAMIENTO EN PDF*\nNota- HipervÃ­nculos en el pdf\nhttps://dal5.short.gy/PdDdff' },
                'rule_162': { keywords: ["por quÃ© no puede en la vÃ­a","guardia en la via publica"], response: 'â˜ğŸ¼ğŸ‘®ğŸ»â€â™‚ï¸ğŸš¦\n*EL GUARDIA DE SEGURIDAD SOLO DEBE REALIZAR SUS LABORES DENTRO DE UN RECINTO O ÃREA DELIMITADA.*' },
                'rule_163': { keywords: ["tiempo"], response: 'ğŸ˜ƒğŸ‘‰ğŸ¼*TIEMPO*\n*Windy*\nhttps://www.windy.com\n*Meteored*\nhttps://www.meteored.cl/mapas-meteorologicos/' },
                'rule_164': { keywords: ["radios"], response: '*RADIOS LA SERENA*\nhttps://onlineradiobox.com/cl/La_Serena' },
                'rule_165': { keywords: ["grupos"], response: 'Grupo trabajos\nhttps://dal5.short.gy/Grup' },
                'rule_166': { keywords: ["manual cs55"], response: 'ğŸ¤–ğŸ‘½ğŸ‘‰ğŸ¼ğŸš™ MANUAL CS55 2021\n\nhttps://drive.google.com/file/d/1NrPRmy9ag2pLtd2E5OX0sHfI-x9rCblo/view?usp=drivesdk' },
                'rule_167': { keywords: ["crear imagen","ia imagen","imagen ia"], response: 'ğŸ‘½ğŸ¤–ğŸ‘ŒğŸ¼*IA CREA IMAGEN Y VIDEO*\nhttps://huggingface.co/spaces' },
                'rule_168': { keywords: ["criptografia"], response: 'EstÃ¡s invitado a una reuniÃ³n de Teams.\n\nClases de CriptografÃ­a\n\nhttps://teams.microsoft.com/l/meetup-join' },
                'rule_169': { keywords: ["diplomado"], response: 'ğŸ¤–ğŸ‘‰ğŸ¼ *DIPLOMADO*\n\nhttps://dal5.short.gy/Diplo' },
                'rule_170': { keywords: ["ley de control de armas","armas"], response: 'ğŸ¤–ğŸ‘‰ğŸ¼LEY DE CONTROL DE ARMAS\n\nhttps://www.bcn.cl/leychile/navegar?i=29291&f=1972-10-21' },
                'rule_172': { keywords: ["209"], response: 'ğŸ¤– *REGLAMENTO LEY DE SEGURIDAD PRIVADA* https://dal5.short.gy/Regl' },
                'rule_173': { keywords: ["auditorias","instructivo auditorias","auditorÃ­a"], response: 'ğŸ‘®ğŸ¼â˜ğŸ¼ *INSTRUCTIVO AUDITORIAS D/E 142623956*\n1.- Empresas de RR.HH.\n2.- Empresas de TT.VV.\n3.- Empresas de CapacitaciÃ³n' },
                'rule_174': { keywords: ["binance","recibir criptomonedas"], response: 'ğŸ¤–ğŸª™ğŸ’°ğŸª™ğŸ‘‰ğŸ¼ ğŸ’¸*RECIBIR CRIPTO EN BINANCE*\n*Recibir:*\n 0x78b349586f9de0ad692549b20e0efba58df1ff79' },
                'rule_175': { keywords: ["partido","futbol","copa amÃ©rica","donde ver futbol"], response: 'ğŸ‘½ğŸ‘‰ğŸ¼ *VER FUTBOL ONLINE O DESCARGAR APP*\n\nğŸ‘‰ğŸ¼ *VER ONLINE*: LINK : https://futbollibrehd.cl/' },
                'rule_177': { keywords: ["doodieman"], response: '*Doodieman*\nhttps://www.1001juegos.com/juego/doodieman-voodoo' },
                'rule_178': { keywords: ["usek","anexos"], response: 'ğŸ¤– *ANEXOS* \nLink: https://anexos.usek.cl/\nPdf: https://www.dal5.short.gy/Kj2AUu' },
                'rule_179': { keywords: ["calendario clases"], response: 'ğŸ¤–ğŸ‘®ğŸ¼ğŸ‘‰ğŸ¼ *CALENDARIO CLASES* https://www.dal5.short.gy/ie1DxQ' },
                'rule_180': { keywords: ["prompts","pront","prom","pron","promt","promtsp","promstp"], response: 'ğŸ¤–ğŸ‘‰ğŸ¼ *PROMPTS*\n\nCrear App\nhttps://dal5.short.gy/CreaApp' },
                'rule_181': { keywords: ["estudios"], response: 'ğŸ¤–ğŸ‘‰ğŸ¼ *TECNICO DE NIVEL SUPERIOR EN TRABAJO SOCIAL*\nhttps://www.dal5.short.gy/SU' },
                'rule_182': { keywords: ["currÃ­culum"], response: 'ğŸ¤–ğŸ‘ğŸ¼ *CURRÃCULUM VITAE* \nhttps://dal5.short.gy/CV' },
                'rule_185': { keywords: ["foto ia","ia foto","agrandar foto","ampliar foto","herramientas de inteligencia artificial","inteligencia","cambiar fondo"], response: 'ğŸ¤–â˜ğŸ¼ *HERREMIENTAS DE INTELIGENCIA ARTIFICIAL*\n\n1.- *Laboratorio de Google IA*\nlabs.google/fx/es' },
                'rule_186': { keywords: ["diplomados"], response: '*DANIEL FIGUEROA* \n*INGENIERO EN INFORMÃTICA*\nhttps://drive.google.com/file/d/1k2oiHE9VkBsU8MdFsRo6uFYYnDh-tEs1/view?usp=drivesdk' },
                'rule_188': { keywords: ["trabajo"], response: '*Seguridad IOT*\nTRABAJO 3 INDIVIDUAL \n\nhttps://docs.google.com/document/d/1gDgNpIwkqmGK2GTJ_sTP1O1Dx1ZDnmR9/edit' },
                'rule_192': { keywords: ["que significa atm","significado atm"], response: 'ğŸ¤– ATM (Automated Teller Machine)' },
                'rule_193': { keywords: ["tejidos","tejido","tejer","tejidos luna"], response: 'ğŸ¤– *TEJIDOS LUNA*ğŸ‘‡ğŸ½ğŸ¦´ğŸ•\n\nhttps://dal5.short.gy/Tej3' },
                'rule_194': { keywords: ["14 puntos cajeros"], response: 'ğŸ¤– *14 PUNTOS CAJEROS*\n\nMi XXXXXXX se informa el siguiente procedimiento' },
                'rule_195': { keywords: ["Â¿los dÃ­as de votaciÃ³n serÃ¡n feriados?"], response: '*Â¿Los dÃ­as de votaciÃ³n serÃ¡n feriados?*\n\nSÃ­. El sÃ¡bado 26 de octubre serÃ¡ feriado normal, por lo que el comercio podrÃ¡ abrir. Mientras que el domingo 27 de octubre serÃ¡ feriado irrenunciable.' },
                'rule_196': { keywords: ["bots","tienes un bot","hay un bot","tiene algÃºn bot de seguridad privada","algun bot","tiene un bot","dame el bot","bot de seguridad privada","bot"], response: 'ğŸ¤– *Bots con IA avanzada:*\n\nâ¢ *Bot Seguridad Privada*\nhttps://dal5.short.gy/SePriv' },
                'rule_197': { keywords: ["colores"], response: 'ğŸ¤– *Colores votaciones* \nhttps://drive.google.com/file/d/1qAQoR_DRaXl8Cgzfueyx2ggh2LL_caBh/view?usp=drivesdk' },
                'rule_198': { keywords: ["para tramitar una credencial de guardia","credencial de guardia"], response: 'ğŸ‘®ğŸ½â€â™‚ï¸ğŸ‘‰ğŸ¼ Existen dos tipos de credenciales para guardia de seguridad, escribe lo que estÃ¡ con negrillas del que necesitas:\n*1. Independiente:* (solo eventos)\n*2. Credencial Empresa* (instalaciÃ³n empresa)' },
                'rule_199': { keywords: ["bot","bot seguridad privada"], response: 'ğŸ¤–ğŸ‘®ğŸ½â€â™‚ï¸ğŸ‘‰ğŸ¼ *Bots con IA avanzada Chat Gpt 4o:*\n\nğŸ¤– *Bot de Seguridad Privada* https://dal5.short.gy/SePriv' },
                'rule_201': { keywords: ["y tiene los valores","y tiene los valores del plan","credencial empresa","los valores","valores credencial","valor","cual es el valor","cuanto cuesta","plan"], response: 'Si, claro: ğŸ¤–ğŸ§™ğŸ»â€â™‚ï¸ *AQUI ESTAN LOS VALORES 2DO. SEMESTRE 2024*\n\n1.- *CREDENCIAL*\nhttps://bit.ly/3vmqEvz' },
                'rule_202': { keywords: ["registro ingreso biometrico"], response: 'ğŸ¤–ğŸ‘‰ğŸ¼ *Registro ingreso BiomÃ©trico*\n\nhttps://dal5.short.gy/Reg' },
                'rule_203': { keywords: ["sacar cantidad de guardias por evento","guardia por evento","cantidad de guardias","cuantos guardias","guardias por evento"], response: 'ğŸ¤–ğŸ‘®ğŸ¼â€â™‚ï¸ğŸ‘‰ğŸ¼ *CANTIDAD DE GUARDIA POR EVENTO:* \n \n*Link:*\n*https://dal5.short.gy/GGSS*' },
                'rule_204': { keywords: ["hora dipreca","para sacar hora en dipreca","sacar hora dipreca","dipreca"], response: 'Gracias por contactarse con DIPRECA. \n*Informamos que desde el 13 de Junio este whatsapp dejÃ³ de funcionar*' },
                'rule_206': { keywords: ["os11","arma","inscripciÃ³n de un arma","trÃ¡mites os11","tramites os11"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸ğŸ¤–ğŸ‘‰ğŸ¼ *Portal de consultas de armas*\n https://www.portalarmaschile.gob.cl/' },
                'rule_207': { keywords: ["certificado","certificados","como sacar certificado os10","cerofilas","cero filas","0 filas"], response: 'ğŸ‘®ğŸ½â€â™‚ï¸ ğŸ‘‰ğŸ¼ *TRÃMITES CEROFILAS*:\n\nLink: https://dal5.short.gy/CFil' },
                'rule_208': { keywords: ["dpi"], response: '*LOS DPI AFECTAN ÃšNICAMENTE LA RESOLUCIÃ“N DE IMPRESIÃ“N, NO EL TAMAÃ‘O FÃSICO DE LA IMAGEN EN PÃXELES.*' },
                'rule_209': { keywords: ["7 puntos"], response: '*1. TIPIFICACIÃ“N:* ROBO VEHÃCULO AFECTA CONSEJAL COMUNA VITACURA.' },
                'rule_213': { keywords: ["fotografÃ­a","fotito"], response: '*1.- FOTOSTORE:* Calle Prat 629, La Serena.\nUbicaciÃ³n: *https://dal5.short.gy/629*' },
                'rule_215': { keywords: ["sacar hora dental","dentista","sacar hora"], response: 'ğŸ¤– *SACAR HORA DENTISTA CARABINEROS LA SERENA O SANTIAGO.*\n*https://www.hoscar.cl/v2.0/horasdentales/login.php*' },
                'rule_216': { keywords: ["valor infracciones","valores infracciones","cuanto cuesta una infracciÃ³n de seguridad privada"], response: ',ğŸ¤–â˜ğŸ¼ Dado que las multas establecidas en la Ley 21.659 se expresan en UTM' },
                'rule_220': { keywords: ["pagina"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸ *PAGINA CIBERSEGURIDAD*\n*https://dal5.short.gy/C25*' },
                'rule_222': { keywords: ["bot telegram"], response: '*Bots telegram*\n1.- Borra fondo: AI_Background_Remover_Bot' },
                'rule_223': { keywords: ["cÃ©dula","cÃ©dula de identidad"], response: '*CÃ‰DULA DE IDENTIDAD 2025*\nhttps://dal5.short.gy/Ce' },
                'rule_224': { keywords: ["ia","ai","avanzada","ias","ias avanzada","ia avanzada","ai avanzada"], response: ',ğŸ§™ğŸ¼â€â™‚ï¸ *IA AVANZADA 2025*\n1.- https://chat.qwenlm.ai/' },
                'rule_227': { keywords: ["preventiva"], response: 'ğŸ¤– *PREVENTIVA*\nhttp://www.medpreventiva.dipreca.cl:8098/autoconsulta/ingresarut.asp' },
                'rule_238': { keywords: ["pensiones","calculo pensiÃ³n","jubilaciÃ³n","retiro","pensiÃ³n","retirarme","retirarse"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸ *Calculo Pensiones*\ndal5.short.gy/Pens' },
                'rule_239': { keywords: ["directiva","directiva de funcionamiento","directivas","directiva de funcionamiento instalacion","funcionamiento","formulario directiva"], response: 'ğŸ¤– *PAGINA PARA:*\n*1.- PRESENTAR DIRECTIVA.*\n*2.- CREDENCIAL EMPRESA.*\n*3.- CRED. INDEPENDIENTE.*' },
                'rule_240': { keywords: ["credencial empresa","credencial empleador","cred empresa","credencial empresas","credenciales empresas","credencial","credencial independiente","independiente","credencial independientes","tramitar credencial"], response: '*TRAMITAR CREDENCIALES* ğŸ¤–ğŸ‘‰ğŸ¼ https://directiva.netlify.app/credenciales \naquÃ­ salen los pasos a seguir para tramitar una credencial.' },
                'rule_243': { keywords: ["realizaron examen","los que realizaron el examen","enviar el resultado examen","enviar resultado","enviar resultados"], response: 'ğŸ¤– ğŸ‘®ğŸ¼â€â™‚ï¸\n1.- Los que estÃ¡n con rojo sacaron bajo el 60% y estÃ¡n reprobados' },
                'rule_244': { keywords: ["usuario portal","portal usuario","portal de usuario","usuario"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸\nhttps://dal5.short.gy/U53' },
                'rule_245': { keywords: ["presentaciÃ³n con ia","presentaciÃ³nes"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸ \n\n1.- https://gamma.app/' },
                'rule_246': { keywords: ["plano oficina"], response: 'ğŸ¤– Plano Oficina \nhttps://os10.short.gy/Pl40' },
                'rule_247': { keywords: ["requerimiento de desarrollo web","requerimiento pÃ¡gina","pÃ¡gina","requisitos pÃ¡gina","crear pÃ¡gina web","desarrollo web"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸ ğŸ’¡ğŸ¥‡ *Para saber que es lo que necesita, responder lo siguiente*\n\n*1.- Requerimiento de desarrollo*\nhttps://dal5.short.gy/D3sa' },
                'rule_248': { keywords: ["servidor","servidores","alojar pÃ¡gina","alojar"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸*Alojar pÃ¡ginas web*\n1.- https://app.netlify.com/\n2.- https://github.com/' },
                'rule_252': { keywords: ["requisitos","requisito","requisitos plan","requisitos medidas","requisitos directiva"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸ *Requisitos Plan, Medidas y Directiva*\nhttps://os10coquimbo.netlify.app' },
                'rule_253': { keywords: ["valores infracciones ciberseguridad","infracciones de ciberseguridad","infracciones ciberseguridad"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸*VALORES INFRACCIONES DE CIBERSEGURIDAD*\nhttps://dal5.short.gy/Vc' },
                'rule_254': { keywords: ["examen os10","examen"], response: 'ğŸ§™ğŸ¼â€â™‚ï¸ğŸ¤–ğŸ‘®ğŸ¼â€â™‚ï¸ *Practicar examen*\nhttps://dal5.short.gy/SeSec' },
                'rule_255': { keywords: ["examen moto","examen para moto","moto"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸ *Examen moto*\nhttps://dal5.short.gy/ExMoto' },
                'rule_257': { keywords: ["gestudio","estudiar","gestor acadÃ©mico","gestor"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸âœ…\n\nhttps://gestudios.netlify.app/' },
                'rule_258': { keywords: ["modelos de solicitud","modelo","punto 6","punto 7"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸âœ…\n\nhttps://www.zosepcar.cl/OS10.php#Modelo' },
                'rule_260': { keywords: ["como estas"], response: 'Bien aqui trabajando para variar y tu Â¿como estas?' },
                'rule_261': { keywords: ["hola","saludos"], response: 'ğŸ¤–ğŸ‘®ğŸ»â€â™‚ï¸ Â¡Hola! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquÃ­ para ayudarle con sus consultas. Â¿En quÃ© puedo asistirle hoy?' },
                'rule_261a': { keywords: ["buenos dÃ­as","buen dÃ­a"], response: 'ğŸ¤–ğŸ‘®ğŸ»â€â™‚ï¸ Â¡Buenos dÃ­as! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquÃ­ para ayudarle con sus consultas. Â¿En quÃ© puedo asistirle hoy?' },
                'rule_261b': { keywords: ["buenas tardes","buena tarde"], response: 'ğŸ¤–ğŸ‘®ğŸ»â€â™‚ï¸ Â¡Buenas tardes! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquÃ­ para ayudarle con sus consultas. Â¿En quÃ© puedo asistirle hoy?' },
                'rule_261c': { keywords: ["buenas noches","buena noche"], response: 'ğŸ¤–ğŸ‘®ğŸ»â€â™‚ï¸ Â¡Buenas noches! Bienvenido/a a la Oficina de Seguridad Privada OS10 Coquimbo. Estoy aquÃ­ para ayudarle con sus consultas. Â¿En quÃ© puedo asistirle hoy?' },
                'rule_262': { keywords: ["gracias","muchas gracias","te agradezco","agradezco"], response: 'ğŸ¤–ğŸ˜Š Â¡Es un placer ayudarle! Para eso estamos aquÃ­ en OS10 Coquimbo. Si tiene alguna otra consulta, no dude en escribirme. Â¡Que tenga un excelente dÃ­a!' },
                'rule_263': { keywords: ["chao","adiÃ³s","nos vemos","hasta luego","me voy"], response: 'ğŸ¤–ğŸ‘‹ Â¡Hasta luego! Gracias por contactar a OS10 Coquimbo. Recuerde que estamos de lunes a jueves de 09:00 a 13:00 horas en Cienfuegos 180, La Serena. Â¡Que tenga un buen dÃ­a!' },
                'rule_264': { keywords: ["ayuda","no entiendo","estoy perdido","no sÃ© quÃ© hacer"], response: 'ğŸ¤–ğŸ†˜ Â¡Tranquilo/a! Entiendo que puede ser confuso. Estoy aquÃ­ para guiarle paso a paso. Por favor, cuÃ©nteme especÃ­ficamente quÃ© necesita y con mucho gusto le ayudo a encontrar la soluciÃ³n. Â¿Se trata de una credencial, curso, o algÃºn trÃ¡mite especÃ­fico?' },
                'rule_265': { keywords: ["informaciÃ³n","quÃ© hacen","quÃ© es os10","oficina seguridad"], response: 'ğŸ¤–ğŸ¢ OS10 Coquimbo es la Oficina de Seguridad Privada que regula y supervisa todo lo relacionado con seguridad privada en la regiÃ³n. Nos encargamos de credenciales, cursos, empresas de seguridad, y cumplimiento normativo. Â¿En quÃ© Ã¡rea especÃ­fica necesita informaciÃ³n?' },
                'rule_266': { keywords: ["problema","error","no funciona","dificultad"], response: 'ğŸ¤–âš ï¸ Lamento escuchar que estÃ¡ teniendo dificultades. Por favor, descrÃ­bame detalladamente cuÃ¡l es el problema y harÃ© todo lo posible por ayudarle a solucionarlo. Si es algo tÃ©cnico, tambiÃ©n puede contactarnos directamente al 512651024.' },
                'rule_267': { keywords: ["urgente","apurado","rÃ¡pido","prisa"], response: 'ğŸ¤–ğŸš¨ Entiendo que su consulta es urgente. PermÃ­tame ayudarle de la manera mÃ¡s eficiente posible. Por favor, indÃ­queme exactamente quÃ© necesita y le proporcionarÃ© la informaciÃ³n de forma directa y clara.' },
                'rule_268': { keywords: ["confundido","no encuentro","perdido","desorientado"], response: 'ğŸ¤–ğŸ§­ Â¡No se preocupe! Es normal sentirse un poco desorientado con tantos procedimientos. Estoy aquÃ­ para guiarle correctamente. CuÃ©nteme quÃ© estÃ¡ buscando y le ayudo a encontrar el camino correcto paso a paso.' },
                'rule_269': { keywords: ["primera vez","soy nuevo","no conozco","principiante"], response: 'ğŸ¤–ğŸŒŸ Â¡Bienvenido/a al mundo de la seguridad privada! Es un gusto ayudar a personas que reciÃ©n comienzan. No se preocupe, todos empezamos desde cero. CuÃ©nteme quÃ© le interesa y le explico todo desde el principio de manera sencilla.' },
                'rule_270': { keywords: ["recomendaciÃ³n","quÃ© me recomienda","consejo","sugerencia"], response: 'ğŸ¤–ğŸ’¡ Â¡Excelente pregunta! Para darle la mejor recomendaciÃ³n, necesito conocer un poco mÃ¡s sobre su situaciÃ³n. Â¿Busca trabajar en seguridad privada, tiene una empresa, o necesita contratar servicios? Con esa informaciÃ³n podrÃ© orientarle perfectamente.' },
                'rule_271': { keywords: ["no sÃ©","no estoy seguro","duda","indeciso"], response: 'ğŸ¤–ğŸ¤” Â¡Perfecto! Las dudas son normales y es mejor aclararlas antes de proceder. No hay problema en no estar seguro, para eso estoy aquÃ­. CuÃ©nteme quÃ© opciones estÃ¡ considerando y juntos encontraremos la mejor alternativa para usted.' },
                'rule_272': { keywords: ["complicado","difÃ­cil","enredado","complejo"], response: 'ğŸ¤–âš¡ Â¡Entiendo perfectamente! Los procedimientos pueden parecer complicados al principio, pero no se preocupe. Mi trabajo es simplificar todo para usted. Vamos paso a paso y verÃ¡ que no es tan difÃ­cil como parece. Â¿Por dÃ³nde empezamos?' },
                'rule_273': { keywords: ["reclamo","queja","molesto","disconforme","requerimiento"], response: 'ğŸ¤–ğŸ“‹ Lamento escuchar que tiene una situaciÃ³n que le molesta. Su satisfacciÃ³n es importante para nosotros. Para formalizar su reclamo o requerimiento, por favor utilice nuestro formulario oficial: ğŸ“‹ *REQUERIMIENTO:* https://dal5.short.gy/R3' },
                'rule_274': { keywords: ["felicitaciones","excelente","muy bueno","genial"], response: 'ğŸ¤–ğŸ˜Š Â¡Muchas gracias por sus palabras! Es muy gratificante saber que nuestro servicio le parece bueno. Seguiremos trabajando para brindarle la mejor atenciÃ³n. Â¿En quÃ© mÃ¡s puedo ayudarle hoy?' },
                'rule_275': { keywords: ["bot","robot","artificial","automÃ¡tico"], response: 'ğŸ¤–ğŸ¤– Â¡AsÃ­ es! Soy un asistente virtual inteligente creado especialmente para ayudarle con sus consultas de seguridad privada. Aunque soy un bot, estoy programado con toda la informaciÃ³n actualizada de OS10 Coquimbo para brindarle respuestas precisas y Ãºtiles.' },
                'rule_276': { keywords: ["quÃ© dice la ley","segÃºn la ley","ley dice","normativa"], response: 'ğŸ¤–ğŸ“š PermÃ­tame analizar la Nueva Ley de Seguridad Privada 21.659 y su reglamento para responder su consulta especÃ­fica. Por favor, sea mÃ¡s especÃ­fico sobre quÃ© aspecto de la ley necesita conocer y le proporcionarÃ© la informaciÃ³n exacta.' },
                'rule_277': { keywords: ["multa","sanciÃ³n","infracciÃ³n","castigo"], response: 'ğŸ¤–âš–ï¸ Analizando la normativa vigente... Las sanciones estÃ¡n detalladas en la Ley 21.659. Para darle informaciÃ³n precisa sobre multas, necesito saber quÃ© tipo de infracciÃ³n consulta. Â¿Se refiere a empresas, guardias, o alguna situaciÃ³n especÃ­fica?' },
                'rule_278': { keywords: ["artÃ­culo","segÃºn el artÃ­culo","art","art."], response: 'ğŸ¤–ğŸ“– Perfecto, veo que necesita informaciÃ³n especÃ­fica de un artÃ­culo. Por favor indÃ­queme el nÃºmero del artÃ­culo de la Ley 21.659 o del Reglamento 209 que necesita consultar, y le proporcionarÃ© el contenido exacto y su interpretaciÃ³n.' },
                'rule_279': { keywords: ["cambios","modificaciones","diferencias","nuevo"], response: 'ğŸ¤–ğŸ”„ Excelente consulta. La Nueva Ley 21.659 introduce importantes cambios. BasÃ¡ndome en mi anÃ¡lisis de la normativa, puedo explicarle las modificaciones especÃ­ficas. Â¿Se refiere a cambios en requisitos, procedimientos, o algÃºn aspecto particular?' },
                'rule_280': { keywords: ["obligaciÃ³n","deber","debe","obligatorio"], response: 'ğŸ¤–ğŸ“‹ Analizando las obligaciones segÃºn la normativa vigente... Para darle informaciÃ³n precisa sobre deberes y obligaciones, necesito saber si consulta por empresas de seguridad, guardias, o algÃºn actor especÃ­fico del sistema.' },
                'rule_281': { keywords: ["prohibido","no se puede","estÃ¡ prohibido","prohibiciÃ³n"], response: 'ğŸ¤–ğŸš« Revisando las prohibiciones establecidas en la Ley 21.659... Hay varias prohibiciones especÃ­ficas segÃºn el tipo de actor. Â¿Su consulta se refiere a guardias, empresas, o alguna actividad en particular?' },
                'rule_282': { keywords: ["plazo","tiempo","dÃ­as","vigencia"], response: 'ğŸ¤–â° Consultando los plazos establecidos en la normativa... Los plazos varÃ­an segÃºn el trÃ¡mite o procedimiento. Para darle informaciÃ³n exacta, Â¿a quÃ© tipo de plazo se refiere? Â¿Credenciales, cursos, o algÃºn procedimiento especÃ­fico?' },
                'rule_283': { keywords: ["requisito","condiciÃ³n","necesito","exigencia"], response: 'ğŸ¤–âœ… Analizando los requisitos segÃºn la Nueva Ley de Seguridad Privada... Los requisitos varÃ­an segÃºn lo que necesite tramitar. Â¿Consulta por requisitos para credenciales, empresas, cursos, o algÃºn trÃ¡mite especÃ­fico?' },
                'rule_284': { keywords: ["fiscalizaciÃ³n","inspecciÃ³n","control","supervisiÃ³n"], response: 'ğŸ¤–ğŸ” Revisando las disposiciones sobre fiscalizaciÃ³n en la normativa... La ley establece claras facultades de fiscalizaciÃ³n. Â¿Su consulta se refiere a inspecciones a empresas, controles a guardias, o algÃºn aspecto especÃ­fico del proceso?' },
                'rule_285': { keywords: ["capacitaciÃ³n","formaciÃ³n","entrenamiento","curso obligatorio"], response: 'ğŸ¤–ğŸ“ Analizando los requisitos de capacitaciÃ³n segÃºn la Ley 21.659... La normativa establece obligaciones especÃ­ficas de formaciÃ³n. Â¿Necesita informaciÃ³n sobre cursos obligatorios, empresas capacitadoras, o algÃºn aspecto particular?' },
                'rule_286': { keywords: ["guardia sin curso","vigilante sin capacitaciÃ³n","sin formaciÃ³n","no tengo curso","no tiene curso","falta curso","sin curso","no hice curso","no ha hecho curso","capacitaciÃ³n pendiente","curso vencido","certificado vencido"], response: 'ğŸ¤–âš ï¸ Un guardia sin curso de capacitaciÃ³n NO puede ejercer funciones. SegÃºn Decreto 93 art. 13Â° y DL 3607, es OBLIGATORIO contar con curso bÃ¡sico de formaciÃ³n vigente (3 aÃ±os). Sin curso = INFRACCIÃ“N GRAVE. Multa: 25 a 125 ingresos mÃ­nimos mensuales (primera vez), hasta 250 en reincidencia.' },
                'rule_287': { keywords: ["guardia sin credencial","vigilante sin autorizaciÃ³n","sin credencial","no tengo credencial","no tiene credencial","falta credencial","credencial vencida","sin licencia","no tengo licencia","no tiene licencia","autorizaciÃ³n vencida","permiso vencido"], response: 'ğŸ¤–âŒ Un guardia sin credencial vigente NO puede trabajar. SegÃºn Decreto 93 art. 93Â° la credencial es requisito ESENCIAL para ejercer. Sin credencial = EJERCICIO ILEGAL. Multa: 25 a 125 ingresos mÃ­nimos mensuales, duplicÃ¡ndose en reincidencia + posible clausura.' },
                'rule_288': { keywords: ["sin directiva funcionamiento","empresa sin directiva","falta directiva","no tengo directiva","no tiene directiva","directiva vencida","sin autorizaciÃ³n empresa","empresa no autorizada","sin resoluciÃ³n","no tenemos directiva"], response: 'ğŸ¤–ğŸ“‹ Una empresa NO puede operar sin Directiva de Funcionamiento aprobada. SegÃºn Decreto 93 art. 15Â°, es OBLIGATORIA y tiene vigencia de 3 aÃ±os. Sin directiva = OPERACIÃ“N ILEGAL. Debe solicitarse con 15 dÃ­as hÃ¡biles de anticipaciÃ³n. SanciÃ³n: clausura inmediata + multa.' },
                'rule_289': { keywords: ["guardia sin uniforme","vigilante sin uniforme","uniforme obligatorio"], response: 'ğŸ¤–ğŸ‘• Los vigilantes DEBEN usar uniforme reglamentario segÃºn DL 3607 art. 1Â°. El uniforme debe ser diferente al de FF.AA. y Carabineros, y de uso exclusivo para vigilantes autorizados. No usarlo constituye infracciÃ³n.' },
                'rule_290': { keywords: ["vigilante sin arma","guardia desarmado","arma obligatoria"], response: 'ğŸ¤–ğŸ”« Los vigilantes DEBEN portar armas segÃºn DL 3607 art. 1Â°. El porte y control de armas se rige por Ley 17.798. Solo pueden portar armas autorizadas y registradas segÃºn normativa vigente.' },
                'rule_291': { keywords: ["empresa sin registro","compaÃ±Ã­a no autorizada","registro empresa"], response: 'ğŸ¤–ğŸ¢ Las empresas de seguridad DEBEN estar registradas y autorizadas. Operar sin registro constituye ejercicio ilegal de actividad regulada. SanciÃ³n: multa de 25 a 125 ingresos mÃ­nimos mensuales, mÃ¡s clausura.' },
                'rule_292': { keywords: ["vigilante fuera recinto","guardia fuera instalaciones","lÃ­mites funciones"], response: 'ğŸ¤–ğŸš« Los vigilantes SOLO pueden actuar dentro del recinto autorizado segÃºn DL 3607 art. 1Â°. NO pueden ejercer funciones fuera del Ã¡rea especÃ­fica designada en su autorizaciÃ³n.' },
                'rule_293': { keywords: ["credencial vencida","vigencia credencial","renovaciÃ³n credencial"], response: 'ğŸ¤–ğŸ“… Las credenciales tienen vigencia limitada y DEBEN renovarse antes del vencimiento. Trabajar con credencial vencida equivale a no tener credencial. RenovaciÃ³n debe solicitarse con anticipaciÃ³n.' },
                'rule_294': { keywords: ["curso vencido","capacitaciÃ³n vencida","actualizaciÃ³n curso"], response: 'ğŸ¤–ğŸ“š Los cursos de capacitaciÃ³n tienen vigencia segÃºn Decreto 93. DEBE mantenerse capacitaciÃ³n actualizada. Trabajar con curso vencido constituye falta de requisito esencial para ejercer.' },
                'rule_295': { keywords: ["antecedentes penales","inhabilidad","requisitos morales"], response: 'ğŸ¤–âš–ï¸ Los vigilantes NO pueden tener antecedentes penales segÃºn DL 3607. Condenas por delitos simples, robos, hurtos o drogas inhabilitan para ejercer funciones de seguridad privada.' },
                'rule_296': { keywords: ["menor edad guardia","vigilante menor","edad mÃ­nima"], response: 'ğŸ¤–ğŸ” Los vigilantes DEBEN ser mayores de 18 aÃ±os segÃºn normativa. Menores de edad NO pueden ejercer funciones de seguridad privada bajo ninguna circunstancia.' },
                'rule_297': { keywords: ["examen mÃ©dico","aptitud fÃ­sica","certificado mÃ©dico"], response: 'ğŸ¤–ğŸ¥ Los vigilantes DEBEN acreditar aptitud fÃ­sica y mental mediante examen mÃ©dico segÃºn reglamento. El certificado debe estar vigente y emitido por profesional autorizado.' },
                'rule_298': { keywords: ["libro registro","registro vigilantes","control personal"], response: 'ğŸ¤–ğŸ“– Las empresas DEBEN mantener libro de registro actualizado con datos de todos los vigilantes segÃºn Decreto 93. Debe incluir: datos personales, credenciales, capacitaciÃ³n y destinos.' },
                'rule_299': { keywords: ["estudio seguridad","plan seguridad","medidas mÃ­nimas"], response: 'ğŸ¤–ğŸ“Š Las entidades obligadas DEBEN presentar Estudio de Seguridad segÃºn DL 3607 art. 3Â°. Debe incluir: anÃ¡lisis de riesgos, medidas propuestas, organizaciÃ³n del servicio y recursos necesarios.' },
                'rule_300': { keywords: ["jefe seguridad","encargado seguridad","responsable interno"], response: 'ğŸ¤–ğŸ‘¨â€ğŸ’¼ Las entidades obligadas DEBEN designar Jefe de Seguridad segÃºn Decreto 1122. Debe tener capacitaciÃ³n especÃ­fica y conocimiento de la normativa de seguridad privada.' },
                'rule_301': { keywords: ["conexiÃ³n alarmas","central monitoreo","sistema alarmas"], response: 'ğŸ¤–ğŸ“¡ Las conexiones a centrales de alarmas requieren autorizaciÃ³n segÃºn Decreto 41. Deben cumplir especificaciones tÃ©cnicas y protocolos de comunicaciÃ³n con Carabineros.' },
                'rule_302': { keywords: ["transporte valores","blindados","carga valiosa"], response: 'ğŸ¤–ğŸš› El transporte de valores se rige por Decreto 1814. Requiere: vehÃ­culos blindados, personal especializado, rutas autorizadas y medidas de seguridad especÃ­ficas.' },
                'rule_303': { keywords: ["vigilancia nocturna","turno noche","horario nocturno"], response: 'ğŸ¤–ğŸŒ™ La vigilancia nocturna requiere medidas especiales segÃºn normativa. Debe considerar: iluminaciÃ³n adecuada, comunicaciones, rondas programadas y protocolos de emergencia.' },
                'rule_304': { keywords: ["fiscalizaciÃ³n carabineros","inspecciÃ³n","control autoridad"], response: 'ğŸ¤–ğŸ‘®â€â™‚ï¸ Carabineros puede fiscalizar en cualquier momento segÃºn DL 3607. Las empresas y vigilantes DEBEN facilitar informaciÃ³n, mostrar credenciales y permitir inspecciones.' },
                'rule_305': { keywords: ["denuncia infracciÃ³n","reportar irregularidad","violaciÃ³n normativa"], response: 'ğŸ¤–ğŸ“ Las infracciones deben denunciarse a la Prefectura de Carabineros competente. Incluya: fecha, lugar, descripciÃ³n detallada y evidencias disponibles de la irregularidad observada.' },
                'rule_306': { keywords: ["capacitaciÃ³n continua","cursos actualizaciÃ³n","perfeccionamiento"], response: 'ğŸ¤–ğŸ“– Los vigilantes DEBEN mantener capacitaciÃ³n continua segÃºn nuevas normativas. Incluye: actualizaciÃ³n legal, tÃ©cnicas de seguridad, primeros auxilios y manejo de situaciones.' },
                'rule_307': { keywords: ["seguro responsabilidad","pÃ³liza seguro","cobertura daÃ±os"], response: 'ğŸ¤–ğŸ›¡ï¸ Las empresas DEBEN mantener seguros de responsabilidad civil segÃºn reglamento. Debe cubrir: daÃ±os a terceros, errores profesionales y responsabilidad del personal.' },
                'rule_308': { keywords: ["procedimiento emergencia","protocolo crisis","plan contingencia"], response: 'ğŸ¤–ğŸš¨ Las empresas DEBEN tener protocolos de emergencia definidos. Incluye: cadena de mando, comunicaciones, evacuaciÃ³n, primeros auxilios y coordinaciÃ³n con autoridades.' },
                'rule_309': { keywords: ["documentaciÃ³n obligatoria","papeles requeridos","documentos vigentes"], response: 'ğŸ¤–ğŸ“„ DocumentaciÃ³n obligatoria: credencial vigente, certificado curso, carnet identidad, autorizaciÃ³n porte armas (si aplica), certificado mÃ©dico y contrato trabajo.' },
                'rule_310': { keywords: ["horarios trabajo","jornada laboral","turnos vigilantes"], response: 'ğŸ¤–â° Los horarios deben cumplir CÃ³digo del Trabajo. Jornada mÃ¡xima, descansos obligatorios, horas extras reguladas. Turnos nocturnos tienen normativa especial de protecciÃ³n.' },
                'rule_311': { keywords: ["equipo comunicaciÃ³n","radio transmisor","medios comunicaciÃ³n"], response: 'ğŸ¤–ğŸ“» Los vigilantes DEBEN contar con medios de comunicaciÃ³n efectivos segÃºn normativa. Equipos deben estar autorizados por SUBTEL y mantener protocolo de comunicaciones.' },
                'rule_312': { keywords: ["material guerra","armas prohibidas","equipamiento restringido"], response: 'ğŸ¤–â›” PROHIBIDO uso de material de guerra, armas automÃ¡ticas o equipamiento militar segÃºn DL 3607. Solo armas autorizadas por normativa civil de control de armas.' },
                'rule_313': { keywords: ["detenciÃ³n ciudadana","arrestar","facultades vigilante"], response: 'ğŸ¤–ğŸ‘®â€â™‚ï¸ Los vigilantes NO tienen facultades de detenciÃ³n especiales. Solo pueden ejercer detenciÃ³n ciudadana en flagrancia segÃºn CÃ³digo Procesal Penal, entregando inmediatamente a Carabineros.' },
                'rule_314': { keywords: ["uso fuerza","agresiÃ³n","violencia vigilante"], response: 'ğŸ¤–âœ‹ El uso de fuerza debe ser: necesario, proporcional y Ãºltimo recurso segÃºn principios legales. PROHIBIDO uso excesivo, torturas o tratos inhumanos. Solo legÃ­tima defensa justifica fuerza.' },
                'rule_315': { keywords: ["revisiÃ³n personas","cacheo","registro corporal"], response: 'ğŸ¤–ğŸ” Los vigilantes NO pueden realizar registros corporales invasivos. Solo inspecciÃ³n visual de bultos/bolsos con consentimiento o cuando reglamento interno lo autorice expresamente.' },
                'rule_316': { keywords: ["banco entidad financiera","instituciÃ³n bancaria","servicio financiero"], response: 'ğŸ¤–ğŸ¦ Bancos e instituciones financieras DEBEN contar con servicio propio de vigilancia segÃºn DL 3607 art. 3Â°. AdemÃ¡s requieren organismo interno de seguridad y oficina especializada.' },
                'rule_317': { keywords: ["empresa estratÃ©gica","servicio pÃºblico","entidad obligada"], response: 'ğŸ¤–ğŸ­ Empresas estratÃ©gicas y servicios pÃºblicos determinados DEBEN contar con vigilancia privada obligatoria segÃºn DL 3607 art. 3Â°. Listado se define por decreto supremo secreto.' },
                'rule_318': { keywords: ["porte armas","licencia armas","autorizaciÃ³n armamento"], response: 'ğŸ¤–ğŸ”« El porte de armas requiere: licencia individual vigente, inscripciÃ³n en Registro Nacional de Armas, capacitaciÃ³n especÃ­fica y autorizaciÃ³n del empleador segÃºn Ley 17.798.' },
                'rule_319': { keywords: ["subcontrataciÃ³n","tercerizaciÃ³n","empresa contratista"], response: 'ğŸ¤–ğŸ¤ La subcontrataciÃ³n de servicios de seguridad estÃ¡ permitida pero la empresa principal mantiene responsabilidad solidaria segÃºn normativa laboral y de seguridad privada.' },
                'rule_320': { keywords: ["reclutamiento","selecciÃ³n personal","contrataciÃ³n vigilantes"], response: 'ğŸ¤–ğŸ‘¥ El reclutamiento DEBE verificar: antecedentes, aptitud fÃ­sica/mental, capacitaciÃ³n previa, referencias laborales y cumplimiento de todos los requisitos legales vigentes.' },
                'rule_321': { keywords: ["puedo trabajar sin curso","trabajo sin capacitaciÃ³n","me contratan sin curso","contrato sin formaciÃ³n","empiezo sin curso","inicio sin capacitaciÃ³n"], response: 'ğŸ¤–ğŸš« NO puedes trabajar sin curso. Es ILEGAL segÃºn Decreto 93 art. 13Â°. Primero debes: 1) Hacer curso bÃ¡sico (40 horas mÃ­nimo) 2) Aprobar examen 3) Obtener certificado 4) Solicitar credencial. Trabajar sin curso = multa para ti y tu empleador.' },
                'rule_322': { keywords: ["Ã©l trabaja sin curso","ella trabaja sin curso","trabaja sin capacitaciÃ³n","empleado sin curso","personal sin formaciÃ³n","guardia nuevo sin curso"], response: 'ğŸ¤–âš ï¸ Esa persona NO puede trabajar sin curso. SegÃºn Decreto 93 art. 13Â° es obligatorio tener capacitaciÃ³n vigente. Si detectas esta situaciÃ³n, repÃ³rtala a Carabineros. La empresa tambiÃ©n serÃ¡ sancionada por contratar personal no calificado.' },
                'rule_323': { keywords: ["puedo trabajar sin credencial","trabajo sin licencia","me contratan sin credencial","empiezo sin autorizaciÃ³n","inicio sin permiso","trabajo sin papeles"], response: 'ğŸ¤–âŒ NO puedes trabajar sin credencial. Es ILEGAL segÃºn Decreto 93. La credencial es tu "licencia de conducir" para seguridad privada. Sin ella cometes delito. Proceso: 1) Curso aprobado 2) Solicitar credencial 3) Esperar autorizaciÃ³n 4) ReciÃ©n ahÃ­ trabajar.' },
                'rule_324': { keywords: ["Ã©l trabaja sin credencial","ella trabaja sin credencial","trabaja sin licencia","guardia sin papeles","empleado sin autorizaciÃ³n","personal sin credencial"], response: 'ğŸ¤–ğŸš¨ Esa persona comete INFRACCIÃ“N GRAVE trabajando sin credencial. SegÃºn Decreto 93, solo pueden ejercer quienes tengan autorizaciÃ³n vigente. Denuncia inmediatamente a Carabineros. Multa para guardia Y empresa.' },
                'rule_325': { keywords: ["empresa puede operar sin directiva","trabajamos sin directiva","operamos sin autorizaciÃ³n","empresa nueva sin papeles","negocio sin permisos","compaÃ±Ã­a sin resoluciÃ³n"], response: 'ğŸ¤–ğŸ›‘ NO pueden operar sin Directiva de Funcionamiento. SegÃºn Decreto 93 art. 15Â° es OBLIGATORIA. Vigencia: 3 aÃ±os. Sin directiva = CLAUSURA INMEDIATA. Deben solicitarla 15 dÃ­as hÃ¡biles antes de operar. Es delito ejercer sin autorizaciÃ³n.' },
                'rule_326': { keywords: ["esa empresa opera sin directiva","empresa sin autorizaciÃ³n","compaÃ±Ã­a ilegal","negocio sin permisos","operan sin papeles","funcionan sin directiva"], response: 'ğŸ¤–ğŸ“¢ Esa empresa opera ILEGALMENTE sin Directiva de Funcionamiento. SegÃºn Decreto 93 art. 15Â°, todas las empresas de seguridad DEBEN tener autorizaciÃ³n vigente. Denuncia inmediatamente: pueden clausurarla y multar a directivos.' },
                'rule_327': { keywords: ["si no tengo curso os10", "quÃ© pasa si no tengo curso","quÃ© pasa si trabajo sin curso","consecuencias sin capacitaciÃ³n","multa por no tener curso","sanciÃ³n trabajar sin formaciÃ³n"], response: 'ğŸ¤–âš–ï¸ Consecuencias trabajar sin curso: 1) Multa personal: 25-125 ingresos mÃ­nimos 2) Multa empresa: 25-250 ingresos mÃ­nimos 3) ProhibiciÃ³n ejercer 4) Antecedentes laborales negativos 5) Posible denuncia penal por ejercicio ilegal de profesiÃ³n.' },
                'rule_328': { keywords: ["quÃ© pasa si trabajo sin credencial","consecuencias sin licencia","multa por no tener credencial","sanciÃ³n trabajar sin autorizaciÃ³n"], response: 'ğŸ¤–âš–ï¸ Consecuencias trabajar sin credencial: 1) Multa personal: 25-125 ingresos mÃ­nimos 2) Multa empresa: hasta 250 ingresos mÃ­nimos 3) InhabilitaciÃ³n temporal 4) Antecedentes penales posibles 5) Clausura del servicio de seguridad.' },
                'rule_329': { keywords: ["quÃ© pasa empresa sin directiva","consecuencias operar sin autorizaciÃ³n","multa empresa sin directiva","sanciÃ³n compaÃ±Ã­a ilegal"], response: 'ğŸ¤–âš–ï¸ Consecuencias empresa sin directiva: 1) Clausura INMEDIATA 2) Multa directivos: 25-250 ingresos mÃ­nimos 3) InhabilitaciÃ³n directivos 4) PÃ©rdida inversiÃ³n 5) Responsabilidad civil por daÃ±os 6) Posible querella criminal por ejercicio ilegal.' },
                'rule_350': { keywords: ["donde puedo hacer el curso","empresa capacitadora","empresa de capacitacion","punto 7"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸âœ… ğŸ§™ğŸ»â€â™‚ï¸ Estas son algunas empresas de aqui de la region:\n*EMPRESAS DE CAPACITACIÃ“N 2025* https://d6.short.gy/Cap'},
                'rule_351': { keywords: ["quien es tu creador","quien te creo"], response: 'ğŸ¤–ğŸ§™ğŸ¼â€â™‚ï¸âœ… Mi creador es todo el equipo de Profesionales que se encuentra trabajando en la oficina de seguridad Privada OS10 Coquimbo y el\n*Ingeniero en InformÃ¡tica y Ciberseguridad Daniel Figueroa Chacama*' }
            };

            function speakText(text) {
                const cleanText = text.replace(/ğŸ¤–|ğŸ‘®ğŸ»â€â™‚ï¸|ğŸ“‹|ğŸ•|ğŸ’°|ğŸ˜Š|ğŸ‘‹|â¬‡ï¸|ğŸ‘‡ğŸ½|â˜ğŸ¼|âœ…|âš ï¸|âŒ|ğŸ§™ğŸ»â€â™‚ï¸|ğŸš¦|â¢/g, '').replace(/<br>/g, '. ').replace(/<strong>/g, '').replace(/<\/strong>/g, '').replace(/\n/g, '. ').replace(/\*/g, '');
                if (!cleanText.trim() || !speechSynth) return;

                speechSynth.cancel();
                const utterance = new SpeechSynthesisUtterance(cleanText);

                // LÃ³gica mejorada para seleccionar la voz de Diego o una voz masculina
                let selectedVoice = null;

                if (availableVoices.length > 0) {
                    // Prioridad 1: Buscar "Diego"
                    selectedVoice = availableVoices.find(voice => voice.name.toLowerCase().includes('diego') && voice.lang.startsWith('es'));

                    // Prioridad 2: Buscar otras voces masculinas comunes si no se encuentra a Diego
                    if (!selectedVoice) {
                        selectedVoice = availableVoices.find(voice => (voice.name.toLowerCase().includes('jorge') || voice.name.toLowerCase().includes('carlos')) && voice.lang.startsWith('es'));
                    }

                    // Prioridad 3: Buscar cualquier voz en espaÃ±ol que no parezca femenina
                    if (!selectedVoice) {
                        const femaleNames = /laura|helena|paulina|isabelle|sofia|camila|elena|isabel/i;
                        selectedVoice = availableVoices.find(voice => voice.lang.startsWith('es') && !femaleNames.test(voice.name));
                    }

                    // Prioridad 4: Como Ãºltimo recurso, tomar la primera voz en espaÃ±ol
                    if (!selectedVoice) {
                        selectedVoice = availableVoices.find(voice => voice.lang.startsWith('es'));
                    }
                }

                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                    console.log('Usando voz:', selectedVoice.name);
                } else {
                    console.warn('No se encontrÃ³ una voz en espaÃ±ol preferida. Se usarÃ¡ la voz por defecto del sistema.');
                }

                utterance.lang = 'es-CL';
                utterance.rate = 1.1;
                utterance.pitch = 0.8; // Tono mÃ¡s bajo para sonar mÃ¡s masculino
                speechSynth.speak(utterance);
            }

            function toggleChat() {
                const popup = document.getElementById('chat-popup');
                const backdrop = document.getElementById('chat-backdrop');
                const button = document.getElementById('chat-toggle-button');
                
                const isHidden = popup.classList.contains('hidden');
                popup.classList.toggle('hidden');
                backdrop.classList.toggle('hidden');
                button.classList.toggle('hidden', isHidden);
            }

            function addMessage(sender, text, buttons = []) {
                const chatMessages = document.getElementById('chat-messages');
                const messageDiv = document.createElement('div');
                
                let content = '';
                if (sender === 'user') {
                    messageDiv.className = 'flex items-start space-x-2 mb-3 justify-end';
                    content = `
                        <div class="bg-blue-500 text-white p-3 rounded-lg max-w-xs">${text}</div>
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0">U</div>
                    `;
                } else {
                    messageDiv.className = 'flex items-start space-x-2 mb-3';
                    const formattedText = text.replace(/\n/g, '<br>').replace(/\*(.*?)\*/g, '<strong>$1</strong>');
                    const buttonsHtml = buttons.length > 0 ? '<div class="mt-2 space-y-1">' + buttons.map(btn => 
                        `<button class="response-button block w-full text-left bg-green-100 hover:bg-green-200 dark:bg-gray-700 dark:hover:bg-gray-600 border border-green-500/50 dark:border-green-700 text-green-800 dark:text-green-300 text-xs py-1.5 px-3 rounded-lg transition-all font-medium" onclick="window.handleUserButtonClick('${btn}')">${btn}</button>`
                    ).join('') + '</div>' : '';
                    
                    content = `
                        <div class="w-8 h-8 rounded-full bg-white border-2 border-yellow-400 flex items-center justify-center flex-shrink-0 p-1">
                            <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-sm text-gray-800 dark:text-gray-200">
                            ${formattedText}
                            ${buttonsHtml}
                        </div>
                    `;
                    setTimeout(() => speakText(text), 300);
                }
                messageDiv.innerHTML = content;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            window.handleUserButtonClick = (text) => {
                 document.getElementById('user-input').value = text;
                 handleMessage();
            }

            async function handleMessage() {
                const input = document.getElementById('user-input');
                const text = input.value.trim();
                const lowerText = text.toLowerCase();
                
                if (!text) return;
                
                addMessage('user', text);
                input.value = '';
                
                let response = null;

                for (const ruleKey in responses) {
                    const rule = responses[ruleKey];
                    for (const keyword of rule.keywords) {
                        const cleanedKeyword = keyword.replace(/\*/g, '');
                        if (lowerText.includes(cleanedKeyword)) {
                            response = rule.response;
                            break;
                        }
                    }
                    if (response) break;
                }
                
                if (response) {
                    setTimeout(() => addMessage('bot', response), 500);
                } else {
                    addTypingIndicator();
                    try {
                        const rulesAsText = Object.values(responses).map(r => `Si el usuario pregunta por "${r.keywords.join(', ')}", responde: "${r.response}"`).join('\n');
                        const prompt = `Eres un asistente experto de la Oficina de Seguridad Privada OS10 de Coquimbo, Chile. Tu base de conocimiento se limita estrictamente a las siguientes reglas. Responde la consulta del usuario basÃ¡ndote Ãºnicamente en estas reglas. Si la consulta no se puede responder con las reglas proporcionadas, indica amablemente que no tienes informaciÃ³n sobre ese tema. No utilices ningÃºn conocimiento externo.\n\nReglas:\n${rulesAsText}\n\nConsulta del usuario: "${text}"`;

                        let chatHistory = [];
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = { contents: chatHistory };
                        const apiKey = ""; 
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                        
                        const apiResponse = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!apiResponse.ok) {
                            throw new Error(`API request failed with status ${apiResponse.status}`);
                        }

                        const result = await apiResponse.json();
                        removeTypingIndicator();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            const apiText = result.candidates[0].content.parts[0].text;
                            addMessage('bot', apiText);
                        } else {
                            addMessage('bot', 'Lo siento, no pude procesar tu solicitud en este momento.');
                        }
                    } catch (error) {
                        console.error("Error calling Gemini API:", error);
                        removeTypingIndicator();
                        addMessage('bot', 'Hubo un problema al conectar con el asistente. Por favor, intenta de nuevo.');
                    }
                }
            }
            
            function addTypingIndicator() {
                const chatMessages = document.getElementById('chat-messages');
                const typingDiv = document.createElement('div');
                typingDiv.id = 'typing-indicator';
                typingDiv.className = 'flex items-start space-x-2 mb-3';
                typingDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-white border-2 border-yellow-400 flex items-center justify-center flex-shrink-0 p-1">
                        <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain">
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function removeTypingIndicator() {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) {
                    indicator.remove();
                }
            }


            function startVoiceInput() {
                if (!recognition) return;

                const voiceBtn = document.getElementById('voice-btn');
                if (isListening) {
                    recognition.stop();
                    return;
                }

                isListening = true;
                voiceBtn.classList.add('animate-pulse');
                recognition.start();

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('user-input').value = transcript;
                    handleMessage();
                };

                recognition.onerror = function(event) {
                    console.error("Error en reconocimiento de voz:", event.error);
                };

                recognition.onend = function() {
                    isListening = false;
                    voiceBtn.classList.remove('animate-pulse');
                };
            }

            function readLastMessage() {
                const messages = document.querySelectorAll('#chat-messages .dark\\:text-gray-200');
                if (messages.length > 0) {
                    const lastMessage = messages[messages.length - 1];
                    const text = lastMessage.innerText;
                    speakText(text);
                }
            }
            
            // --- AsignaciÃ³n de Eventos ---
            document.getElementById('chat-toggle-button').addEventListener('click', toggleChat);
            document.getElementById('chat-close-btn-internal').addEventListener('click', toggleChat);
            document.getElementById('chat-backdrop').addEventListener('click', toggleChat);
            document.getElementById('send-button').addEventListener('click', handleMessage);
            document.getElementById('user-input').addEventListener('keypress', e => e.key === 'Enter' && handleMessage());
            
            if (recognition) {
                document.getElementById('voice-btn').addEventListener('click', startVoiceInput);
            }
            document.getElementById('speak-btn').addEventListener('click', readLastMessage);

            document.addEventListener('keydown', e => {
                if (e.altKey && e.key === 'v') {
                    e.preventDefault();
                    startVoiceInput();
                }
            });

            // Mensaje de bienvenida
            setTimeout(() => {
                const welcomeButtons = ['MenÃº', 'MenÃº OS10', 'Valores', 'Horario'];
                addMessage('bot', 'Â¡Hola! Soy tu asistente virtual de la oficina OS10 Coquimbo. Â¿En quÃ© puedo ayudarte hoy?', welcomeButtons);
            }, 1000);
        });
    </script>
</body>
</html>


