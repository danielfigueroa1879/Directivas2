<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Plataforma OS10 Coquimbo | Tr√°mites de Seguridad Privada - Carabineros de Chile</title>
    <meta name="description" content="Sistema oficial de tr√°mites y servicios de seguridad privada de la Regi√≥n de Coquimbo. Directivas de funcionamiento, credenciales, certificados y normativa legal actualizada.">
    <meta name="keywords" content="OS10 Coquimbo, seguridad privada, tr√°mites, directivas, credenciales, Carabineros Chile, vigilantes privados, guardias de seguridad">
    <meta name="author" content="Prefectura de Coquimbo - Carabineros de Chile">
    <meta name="robots" content="index, follow">

    <!-- Preconnect and DNS-Prefetch for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">

    <!-- =================================================================== -->
    <!-- SOLUCI√ìN FOUC (Flash Of Unstyled Content)                           -->
    <!-- 1. Ocultamos el cuerpo para evitar el parpadeo.                     -->
    <!-- =================================================================== -->
    <style>
        /* Oculta el cuerpo por defecto para prevenir el FOUC */
        body {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease-in-out;
        }
    </style>

    <!-- CRITICAL: Main Stylesheet loaded first -->
    <link rel="stylesheet" href="assets/css/styles.css?v=3">

    <!-- Preload critical assets -->
    <link rel="preload" href="assets/images/foto (1).webp" as="image" type="image/webp">

    <!-- Fonts with display=swap for better performance -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Icons and PWA Manifest -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="192x192" href="assets/images/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="assets/images/icon-512x512.png">
    <link rel="manifest" href="manifest.json">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#146314">
    <meta name="application-name" content="OS10 Coquimbo">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="OS10 Coquimbo">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Plataforma OS10 Coquimbo - Tr√°mites de Seguridad Privada">
    <meta property="og:description" content="Sistema oficial de tr√°mites y servicios de seguridad privada de la Regi√≥n de Coquimbo, Chile.">
    <meta property="og:image" content="assets/images/logo-os10.png">
    <meta property="og:url" content="https://os10coquimbo.cl">
    <meta property="og:site_name" content="OS10 Coquimbo">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Plataforma OS10 Coquimbo">
    <meta name="twitter:description" content="Sistema oficial de tr√°mites de seguridad privada - Regi√≥n de Coquimbo">
    <meta name="twitter:image" content="assets/images/logo-os10.png">
    
    <!-- Tailwind CSS - Loaded deferred so it doesn't block rendering -->
    <script src="https://cdn.tailwindcss.com" defer></script>

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "GovernmentOrganization",
      "name": "OS10 Coquimbo - Oficina de Seguridad Privada",
      "description": "Oficina de Seguridad Privada de Carabineros de Chile, Regi√≥n de Coquimbo. Fiscalizaci√≥n y control de seguridad privada.",
      "url": "https://os10coquimbo.cl",
      "telephone": "+56512651024",
      "email": "os10.coquimbo@carabineros.cl",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Calle Cienfuegos 180",
        "addressLocality": "La Serena",
        "addressRegion": "Regi√≥n de Coquimbo",
        "postalCode": "1700000",
        "addressCountry": "CL"
      },
      "areaServed": {
        "@type": "AdministrativeArea",
        "name": "Regi√≥n de Coquimbo, Chile"
      },
      "parentOrganization": {
        "@type": "GovernmentOrganization",
        "name": "Carabineros de Chile"
      }
    }
    </script>
    
    <!-- Inline styles for dynamically appearing elements -->
    <style>
        .pwa-install-banner {
            position: fixed;
            top: 64px;
            left: 0;
            right: 0;
            background-color: #f1f5f9; /* Tailwind gray-100 */
            border-bottom: 2px solid #3b82f6; /* Tailwind blue-500 */
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1100;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
            transform: translateY(-100%);
            opacity: 0;
        }
        .pwa-install-banner.show {
            transform: translateY(0);
            opacity: 1;
        }
        .notification-banner {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translate(-50%, -100%);
            width: 100%;
            max-width: 750px;
            background-color: #51a351;
            color: white;
            padding: 1.3rem 2.0rem;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1300;
            text-align: center;
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease-in-out;
        }
        .notification-banner.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }
        @media (max-width: 768px) {
            .notification-banner {
                width: 100%;
                border-radius: 0;
            }
        }
        .mover-derecha { margin-left: 25px; }
        .submenu-arrow {
            width: 1rem;
            height: 1rem;
            transition: transform 0.3s ease;
        }
        .has-submenu.submenu-open .submenu-arrow {
            transform: rotate(180deg);
        }
        .submenu-title {
            font-weight: bold;
            padding: 6px 20px;
            font-size: 0.85rem;
            color: #1f2937;
            background-color: rgba(243, 244, 246, 0.7);
            border-top: 1px solid rgba(229, 231, 235, 0.5);
            border-bottom: 1px solid rgba(229, 231, 235, 0.5);
        }
        .submenu .submenu-title:first-child {
            border-top: none;
        }
    </style>
</head>
<body class="homepage background-transition">

<!-- PWA Install Banner -->
<div id="pwa-install-banner" class="pwa-install-banner md:hidden">
    <span class="text-gray-800 text-sm font-medium">Instala la aplicaci√≥n para un acceso m√°s r√°pido.</span>
    <div class="flex items-center space-x-2">
        <button id="install-button" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-sm">Instalar</button>
        <button id="close-install-banner" class="text-gray-500 hover:text-gray-800 p-1 rounded-full">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>
</div>

<!-- Top Banner -->
<div id="banner" class="fixed top-0 left-0 right-0 z-[1200] bg-white/35 backdrop-blur-md border-b border-white/30 h-16 flex items-center justify-center shadow-sm">
    <div class="w-full max-w-[750px] mx-auto h-full flex items-center justify-between px-4 relative">
        <div class="flex items-center space-x-8"> <!-- Left buttons container -->
            <!-- Procedures Menu -->
            <div class="relative">
                <button 
                    id="tramites-menu-btn" 
                    class="font-medium hover:text-blue-600 transition-colors cursor-pointer flex items-center banner-text-small focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md px-2 py-1"
                    aria-expanded="false"
                    aria-haspopup="true"
                    aria-label="Men√∫ de tr√°mites y servicios">
                    <span class="sm:text-lg text-base"><strong>Tr√°mites</strong></span>
                    <svg class="w-4 h-4 ml-1 transition-transform" id="tramites-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                <div id="tramites-dropdown" class="dropdown-menu hidden" role="menu" aria-labelledby="tramites-menu-btn">
                    <div class="dropdown-menu-header">
                        <h3 id="tramites-menu-title">Men√∫ de Tr√°mites</h3>
                    </div>
                    <div class="dropdown-menu-content">
                        <!-- Submenu Laws and Regulations -->
                        <div class="has-submenu">
                            <button class="flex justify-between items-center w-full">
                                Leyes y Normativa
                                <svg class="submenu-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="submenu leyes-compactas">
                                <div class="submenu-title">Leyes</div>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=242302')">1. Constituci√≥n Pol√≠tica</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=30329')">2. Ley 18.961 Org. Const.</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=30670')">3. Ley 19.303</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=7193')">4. D.L. 3.607 (1981)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1202067&tipoVersion=0')">5. Ley 21.659 Seg. Privada</button>
                                <button onclick="openNewLink('https://www.leychile.cl/leychile/navegar?i=1213672&f=2025-11-28')">6. Reglamento 209</button>
                                <div class="submenu-title">Decretos</div>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/Decreto-261.pdf')">1. D.E. 261 (2020)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1200633')">2. D.E. 32 (2024)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1136545&idParte=10054790&idVersion=2019-09-17')">3. D. 298 (2019)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1130300&idParte=10013741&idVersion=2019-04-05')">4. D. 123 (2019)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1122982&idParte=9948603&idVersion=2018-09-12')">5. D. 1045 (2018)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1116274')">6. D. 867 (2017)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1069299')">7. D. 1814 (2014)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1055580')">8. D.S. 222 (2014)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=1072929')">9. D.E. 1122 (1994)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=19870')">10. D.S. 41 (1996)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=18592')">11. D.S. 1772 (1995)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=18594')">12. D.S. 1773 (1994)</button>
                                <button onclick="openNewLink('https://www.bcn.cl/leychile/navegar?idNorma=9081')">13. D.S. 93 (1985)</button>
                            </div>
                        </div>
                        
                        <!-- Submenu Components -->
                        <div class="has-submenu">
                            <button class="flex justify-between items-center w-full">
                                Componentes
                                <svg class="submenu-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="submenu">
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_vigilante_privado_PDF.pdf')">1. Vigilante Privado</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_guardia_de_seguridad.pdf')">2. Guardia de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_jefe_de_seguridad.pdf')">3. Jefe de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_encargado_de_seguridad.pdf')">4. Encargado de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_supervisor.pdf')">5. Supervisor de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_asesor.pdf')">6. Asesor de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_capacitador.pdf')">7. Capacitador de Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_tecnico.pdf')">8. T√©cnico en Seguridad</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_operador_cajeros.pdf')">9. Operador de Cajeros (ATM)</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_instalador_tecnico.pdf')">10. Instalador T√©cnico</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_operador_cctv.pdf')">11. Operador de CC.TV.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/TRAM_empresas.pdf')">12. Empresas prestadoras</button>
                            </div>
                        </div>

                       <!-- Submenu Editable Docs -->
                        <div class="has-submenu">
                            <button class="flex justify-between items-center w-full">
                                Doc. editable
                                <svg class="submenu-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="submenu">
                                <button onclick="openNewLink('https://bit.ly/3QbfmlT')">Estudio de seguridad</button>
                                <button onclick="openNewLink('https://d6.short.gy/Pl4n')">Planes de seguridad</button>
                                <button onclick="openNewLink('https://dal5.short.gy/M3')">Medidas de seguridad</button>
                                <button onclick="openNewLink('https://docs.google.com/document/d/1MgInvryuu2EaxHMG_Zuy_1ZiuOTHr6jA/edit')">Directiva de funcionamiento</button>
                                <button onclick="openNewLink('https://dal5.short.gy/H23wIF')">Solicitud simple</button>
                            </div>
                        </div>

                        <!-- Submenu Request Templates -->
                        <div class="has-submenu">
                            <button class="flex justify-between items-center w-full">
                                Modelos de solicitud
                                <svg class="submenu-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="submenu">
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_dec_jurada_pers_naturales.pdf')">1. Mod. Decl. jurada Pers. Nat.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_dec_jurada_empresas.pdf')">2. Mod. Decl. jurada para emp.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_solicitud_simple_acreditacion_empresa.pdf')">3. Solic. simple acred. de emp.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_solicitud_pers_natural_dependiente.pdf')">4. Mod. Solic. Pers. Natural Dep.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_sol_acreditacion_asesor.pdf')">5. Mod. de solic. Acred. Asesor.</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/MOD_acreditacion_capacitador.pdf')">6. Mod. Acred. Capacitador.</button>
                            </div>
                        </div>
                        
                        <!-- Submenu Manuals -->
                        <div class="has-submenu">
                            <button class="flex justify-between items-center w-full">
                                Manuales
                                <svg class="submenu-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="submenu">
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/manual_funcionamiento.pdf')">1. Manual de Funcionamiento</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/manual_capacitacion.pdf')">2. Manual de Capacitaci√≥n</button>
                                <button onclick="openNewLink('https://www.zosepcar.cl/content/OS10/manual_organizacion.pdf')">3. Manual de Organizaci√≥n</button>
                            </div>
                        </div>

                        <!-- Other buttons -->
                        <button onclick="handleCerofilas()">Cerofilas</button>   
                        <button onclick="handleBuscarCurso('https://www.zosepcar.cl/OS10.php#buscador')">Consultar Curso</button>
                        <button onclick="handleDirectiva()">Directiva</button>
                        <button onclick="handleCredenciales()">Credenciales</button>
                        <button onclick="handleCredencialIndependiente()">Credencial de Independiente</button>
                        <button onclick="handleCursoFormacion()">Valor Curso Formaci√≥n</button>
                        <button onclick="openNewLink('https://maps.app.goo.gl/QUhujWbTF1FjDA7E6')">Ubicaci√≥n</button>
                        <button onclick="handleValores()">Valores</button>
                        <button onclick="handleValorPlan()">Valor Plan</button>
                    </div>
                </div>
            </div>
        </div>
        
        <a id="os10-home-btn" class="font-medium banner-text-small cursor-pointer hover:text-blue-600 transition-colors os10-coquimbo-center absolute left-1/2 -translate-x-1/2"></a>

        <div class="flex items-center text-xs space-x-2">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
            </svg>
            <span class="banner-text-small">Visitas: <span id="visit-counter" class="font-bold visit-counter-number">--</span></span>
        </div>
    </div>
</div>

<!-- Overlays -->
<div id="tramites-overlay" class="hidden"></div>
<div id="editables-overlay" class="hidden"></div>

<!-- Main container for internal pages -->
<div id="contenido" class="card-container bg-white/90 backdrop-blur-sm rounded-xl shadow-lg space-y-6 relative p-6" style="display: none;">
    <a href="https://www.zosepcar.cl/OS10.php" target="_blank" aria-label="Visit ZOSEPCAR page" class="logo-os10-container">
        <img src="assets/images/logo-os10.png" alt="OS10 Logo" class="h-full" loading="lazy" width="60" height="60">
    </a>

    <button id="credenciales-arrow-back-btn" class="hidden" title="Back to Home" onclick="showHomepage()">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 18l-6-6 6-6"></path>
        </svg>
    </button>

    <section id="main-section" class="main-content" style="display: none;">
        <header class="text-center pt-8">
            <div class="flex items-center justify-center space-x-2">
                <h1 class="text-2xl font-bold text-gray-800">DIRECTIVA DE FUNCIONAMIENTO</h1>
            </div>
            <h2 class="text-lg font-semibold text-gray-600">Instalaci√≥n - Eventos - Partidos de F√∫tbol Profesional</h2>
        </header>
        
        <main class="space-y-4">
            <section class="section-card border-blue-500 bg-blue-100/80">
                <h3 class="font-bold text-blue-800">1&nbsp;- Presentar Directiva DD.FF.</h3>
                <ul class="list-disc pl-5 text-sm text-gray-700">
                    <li>&nbsp;Vigencia 03 a√±os en instalaci√≥n.</li>
                    <li>&nbsp;Presentar con 15 d√≠as h√°biles de anticipaci√≥n.</li>
                    <li>
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=9081" target="_blank" class="text-blue-600 hover:underline">Dec. 93/1985</a>,
                        <a href="https://www.zosepcar.cl/content/OS10/Decreto-261.pdf" target="_blank" class="text-blue-600 hover:underline">Dec. 261</a>,
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=1200633" target="_blank" class="text-blue-600 hover:underline">Dec. 32/2024</a>.
                   </li>
               </ul>
            </section>
            
            <section class="section-card border-green-500 bg-green-100/80">
                <h3 class="font-bold text-green-800">2&nbsp;- Documentaci√≥n a presentar.</h3>
                <ul class="space-y-4 text-sm text-gray-700">
                    <li>
                        <p> ‚û¢&nbsp;&nbsp;&nbsp;Dos Solicitudes Simple o carta conductora.</p>
                        <a href="https://dal5.short.gy/Solic" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Solicitud">Descargar</a>
                    </li>
                    <li>
                        <p>‚û¢&nbsp;&nbsp;&nbsp;Una copia DD.FF. completa.</p>
                        <a href="https://dal5.short.gy/D" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Editable</a>
                    </li>
                    <li>
                        <p>‚û¢&nbsp;&nbsp;&nbsp;Requisitos seg√∫n Tipo:<br> 
                        <span class="mover-derecha">1&nbsp;.- Instalaci√≥n.</span><br>
                        <span class="mover-derecha">2.- Partidos de futbol Profesional.</span><br>
                        <span class="mover-derecha">3.- Eventos masivos.</span></p>
                        <a href="https://dal5.short.gy/Re24" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Requisi.">Descargar</a>
                    </li>
                    <li>
                        <p>‚û¢&nbsp;&nbsp;&nbsp;Uniforme Decreto 32/2024.</p>
                        <a href="https://dal5.short.gy/0u" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Ejemplo Uniforme">Ejemplo</a>
                    </li>
                    <li>
                        <p>‚û¢&nbsp;&nbsp;&nbsp;An√°lisis de Vulnerabilidades.</p>
                        <a href="https://dal5.short.gy/6ydn" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar An√°lisis">Descargar</a>
                    </li>
                    <li>
                        <p>‚û¢&nbsp;&nbsp;&nbsp;Solicitud Uniforme Distinto.</p>
                        <a href="https://d6.short.gy/G8" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600 transition-colors" title="Descargar Word">Editable</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-red-500 bg-red-100/80">
                <h3 class="font-bold text-red-800">3&nbsp;- Debe presentar todo escaneado en Digital.</h3>
                <ul class="space-y-4 text-sm text-gray-700">
                    <li>
                        <p>Escanear en 01 archivo PDF.</p>
                        <a href="https://dal5.short.gy/I" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600 transition-colors" title="Herramienta para unir PDF">Herramienta</a>
                    </li>
                </ul>
            </section>
            
            <section class="section-card border-yellow-500 bg-yellow-100/80">
                <h3 class="font-bold text-yellow-800">4&nbsp;- Tramitar Credenciales</h3>
                <ul class="space-y-4 text-sm text-gray-700">
                    <li>
                        <p>Resol. 1480 (10.04.2025).</p>
                        <a href="https://d6.short.gy/dsds" target="_blank" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" title="Download Documents">Download</a>
                    </li>
                    <li>
                        <p>Tramitar credenciales.</p>
                        <button onclick="showCredenciales()" class="inline-block mt-1 w-32 text-center px-4 py-1 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600 transition-colors" id="tramitarCredencialesBtn" title="Process Credentials">Process</button>
                    </li>
                </ul>
            </section>
        </main>
        
        <footer class="relative mt-6 border-t border-gray-200 pt-4">
            <div class="text-center text-sm text-gray-600 leading-tight pr-16">
                <span>Haga clic para descargar.</span><br>
                <span>¬©2025 - Daniel Figueroa Ch.</span><br>
                <span>Ingeniero en Inform√°tica.</span>
            </div>
            <img src="assets/images/qr.png" alt="QR Code" class="absolute right-4 bottom-4 w-11 h-11 md:w-14 md:h-14" title="More information" loading="lazy" width="56" height="56">
        </footer>
    </section>

    <section id="credenciales-section" class="credenciales-section">
        <header class="credenciales-title-container">
            <h1 class="credenciales-main-title">CREDENCIAL</h1>
            <h2 class="credenciales-main-subtitle">EMPRESA E INDEPENDIENTE</h2><br>
        </header>
            
        <main class="content-container">
            <section class="main-section">
                <h3 class="credenciales-section-title">REQUISITOS PARA SOLICITUD DE CREDENCIAL</h3>
                
                <div class="space-y-8">
                    <div class="requirement-block">
                        <h4 class="requirement-subtitle">Documentos requeridos:</h4>
                        <ul class="list-disc pl-5">
                            <li>01 Solicitud simple o carta conductora para credencial Independiente o Empresa.</li>
                            <a href="https://d6.short.gy/bv" target="_blank" class="credenciales-download-btn bg-yellow-500 hover:bg-yellow-600">Descargar</a>
                            <li>Fotocopia de c√©dula de identidad (ambas caras).</li>
                            <li>Certificado OS.10 (Curso Aprobado Vigente).</li>
                            <li>Certificado de Antecedentes para Fines Especiales.</li>
                        </ul>
                    </div>
                    
                    <div class="requirement-block">
                        <h4 class="requirement-subtitle">Fotograf√≠a digital:</h4>
                        <ul class="list-disc pl-5">
                            <li>Formato JPG, 331x413 p√≠xeles, fondo blanco.</li>
                            <li>Resoluci√≥n 300 DPI, desde los hombros hacia arriba.</li>
                            <li>Camisa negra (tela gruesa/delgada, manga corta/larga).</li>
                            <li>Fotografia almacenada en un Pendrive.</li>
                        </ul>
                        <div class="mt-4 flex justify-center">
                            <img src="assets/images/foto.jpg" alt="Example of correct photo" class="credenciales-photo-example" loading="lazy" width="331" height="413">
                        </div>
                        <div class="flex flex-col space-y-3 mt-4">
                            <p class="text-sm italic text-center">Utilice estas herramientas para modificar los DPI/PPP de su imagen:</p>
                            <a href="https://dal5.short.gy/0" target="_blank" class="credenciales-download-btn credenciales-dpi-btn bg-yellow-500 hover:bg-yellow-600">1 Convert. 300 DPI</a>
                            <a href="https://dal5.short.gy/j" target="_blank" class="credenciales-download-btn credenciales-dpi-btn bg-yellow-500 hover:bg-yellow-600">2 Convert. 300 DPI</a>
                        </div>
                    </div>
                    
                    <div class="requirement-block">
                        <h4 class="requirement-subtitle">Formato Excel:</h4>
                        <ul class="list-disc pl-5">
                            <li>Nombre del archivo: RUT del agente sin puntos, gui√≥n medio y d√≠gito verificador (ej: 12345678-9).</li>
                            <li>Estructura obligatoria: <strong>FORMATO EST√ÅNDAR DE EXCEL PARA EMPRESAS. Datos de los agentes</strong>.</li>
                        </ul>
                        <div class="credenciales-table-container">
                            <table class="credenciales-responsive-table">
                                <thead>
                                    <tr>
                                        <th>AF</th><th>RUN</th><th>NOMBRES</th><th>APELLIDOS</th><th>CARGO</th><th>EMPRESA</th><th>VIGENCIA</th><th>OBS-COLOR</th><th>OTROS</th><th>EMAIL</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>COQUIMBO</td><td>12345678-9</td><td>CAMILA GRACIELA</td><td>LEYTON MONTENEGRO</td>
                                        <td><select class="credenciales-table-select">
                                            <option>GUARDIA DE SEGURIDAD</option><option selected>CONSERJE</option><option>VIGILANTE PRIVADO</option><option>ASESOR DE SEGURIDAD</option><option>CAPACITADOR</option><option>ENCARGADO DE SEGURIDAD</option><option>JEFE DE SEGURIDAD</option><option>SUPERVISOR</option><option>T√âCNICO</option><option>T√âCNICO INDEPENDIENTE</option><option>OPERADOR C.C.T.V. Y ALARMA</option>
                                        </select></td>
                                        <td>ALTA SEGURIDAD S.A.</td><td>31-10-2027</td>
                                        <td><select class="credenciales-table-select"><option selected>BLANCO</option><option>AZUL</option><option>GRIS</option></select></td>
                                        <td></td><td>camilaleyton@gmail.com</td>
                                    </tr>
                                    <tr>
                                        <td>COQUIMBO</td><td>15524524-5</td><td>DANIEL ENRIQUE</td><td>VEGA CHAVEZ</td>
                                        <td><select class="credenciales-table-select">
                                            <option>GUARDIA DE SEGURIDAD</option><option selected>CONSERJE</option><option>VIGILANTE PRIVADO</option><option>ASESOR DE SEGURIDAD</option><option>CAPACITADOR</option><option>ENCARGADO DE SEGURIDAD</option><option>JEFE DE SEGURIDAD</option><option>SUPERVISOR</option><option>T√âCNICO</option><option>T√âCNICO INDEPENDIENTE</option><option>OPERADOR C.C.T.V. Y ALARMA</option>
                                        </select></td>
                                        <td>ALTA SEGURIDAD S.A.</td><td>23/05/2026</td>
                                        <td><select class="credenciales-table-select"><option selected>BLANCO</option><option>AZUL</option><option>GRIS</option></select></td>
                                        <td></td><td>danielvega@gmail.com</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <a href="https://dal5.short.gy/Cr3d" target="_blank" class="credenciales-download-btn bg-yellow-500 hover:bg-yellow-600 excel-btn">Descargar excel</a>
                        
                        <h4 class="requirement-subtitle special-subtitle">CREDENCIAL INDEPENDIENTE</h4>
                        <a href="https://drive.google.com/uc?export=download&id=1nTEa4dzI1K-v0xf_nCjzUFEaRWnWnXYS" target="_blank" class="credenciales-download-btn bg-blue-500 hover:bg-blue-600 indep-btn">Independiente</a>
                    </div>

                    <div class="requirement-block">
                        <h4 class="requirement-subtitle">PAGO VALE VISTA:</h4>
                        <ul class="list-disc pl-5">
                            <li>$5.890 CLP con un VALE VISTA a nombre de:</li>
                            <li><strong>ZONA DE CARABINEROS SEGURIDAD PRIVADA CONTROL DE ARMAS Y EXPLOSIVOS</strong></li>
                            <li>R.U.T.: 61.944.800-6</li>
                            <li>Tel√©fono OS.10.: +562512651024</li>
                        </ul>
                        <div class="flex flex-col sm:flex-row sm:items-end justify-start sm:justify-between mt-4 gap-4">
                            <a href="https://drive.google.com/uc?export=download&id=1CO9egHu6DydS51hKyDnxkg2BdDPj-vZZ" download="valores.pdf" class="download-link" id="valoresImageLink">
                                <img src="assets/images/valores.png" alt="Payment Values" class="credenciales-valores-example" loading="lazy" width="220" height="100">
                            </a>
                            <a href="https://dal5.short.gy/C√¢ÀÜ≈°" target="_blank">
                               <img src="assets/images/qrcred.png" alt="QR Code for more information" class="credenciales-qr-image" loading="lazy" width="80" height="80">
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </main>  
       
       <footer class="footer-text text-center mt-6 text-sm text-gray-600">
          <span>Haga clic en los botones para descargar.</span><br>
          <span>¬©2025 - Daniel Figueroa Ch.</span><br>
          <span>Ingeniero en Inform√°tica.</span>
       </footer>
    </section>
</div>

<!-- ========= HOMEPAGE SECTION START ========= -->
<section id="homepage-section" class="homepage-section relative flex flex-col items-center justify-center text-center text-white p-4 overflow-hidden" role="banner">
    <!-- Dark overlay for better text readability (improved contrast) -->
    <div class="absolute inset-0 bg-black/50 z-0" aria-hidden="true"></div>
    <!-- Content -->
    <div class="relative z-10 -mt-2 md:-mt-24">
        <div class="mb-0">
            <h1 class="text-3xl sm:text-4xl md:text-6xl font-bold" style="text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9), 0 0 20px rgba(0, 0, 0, 0.7);">
                BIENVENIDOS A LA PLATAFORMA DE O.S.10 COQUIMBO
            </h1>
            <p class="mt-4 text-lg md:text-xl max-w-2xl mx-auto" style="text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.9), 0 0 15px rgba(0, 0, 0, 0.7);">
                Sistema de tr√°mites y servicios de seguridad privada
            </p>
        </div>
    </div>
    
    <!-- Buttons with better accessibility -->
    <div class="relative z-10 mt-40 md:mt-56">
        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-8 justify-center items-center">
            <button 
                onclick="showDirectiva()" 
                class="homepage-btn bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg px-8 py-4 transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 shadow-lg"
                aria-label="Ver informaci√≥n sobre directivas de funcionamiento">
                Directivas
            </button>
            <button 
                onclick="showCredenciales()" 
                class="homepage-btn bg-[#ffb700] hover:bg-[#d49900] text-white font-bold rounded-lg px-8 py-4 transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-300 shadow-lg"
                aria-label="Ver informaci√≥n sobre credenciales de seguridad">
                Credenciales
            </button>
        </div>
    </div>
</section>

<div id="homepage-content-wrapper">
    <!-- Main Procedures Section -->
    <section id="tramites-principales" class="py-16 md:py-24 bg-[#146314] backdrop-blur-sm">
        <div class="max-w-5xl mx-auto px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-2">
                    <a href="https://www.zosepcar.cl/OS10.php" target="_blank">
                        <img src="assets/images/logo-os10.png" alt="OS10 Logo" class="h-10 w-10 md:h-12 md:w-12" loading="lazy">
                    </a>
                    <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Tr√°mites Principales</h2>
                </div>
                <p class="mt-4 text-lg leading-8 text-gray-300">Acceso directo a la informaci√≥n que buscas</p>
            </div>
            <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 3: Cerofilas -->
                <div onclick="openNewLink('https://dal5.short.gy/CFil')" class="cursor-pointer group relative p-8 bg-white/10 rounded-xl border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 bg-green-500/20 text-green-300 rounded-lg p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </div>
                        <h3 class="ml-4 text-xl font-bold text-white">Certificados O.S.10 Online - Cerofila</h3>
                    </div>
                    <p class="mt-4 text-gray-300">Certificado para Guardias de Seguridad, Conserjes y Vigilantes Privados. (Certificados componentes de seguridad privada).</p>
                    <span class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">‚Üí</span>
                </div>
                <!-- Card 1: Directives -->
                <div onclick="showDirectiva()" class="cursor-pointer group relative p-8 bg-white/10 rounded-xl border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 bg-blue-500/20 text-blue-300 rounded-lg p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        </div>
                        <h3 class="ml-4 text-xl font-bold text-white">Directivas de Funcionamiento</h3>
                    </div>
                    <p class="mt-4 text-gray-300">Accede y gestiona los requerimientos para instalaciones, eventos y m√°s.</p>
                    <span class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">‚Üí</span>
                </div>
                <!-- Card 2: Credentials -->
                <div onclick="showCredenciales()" class="cursor-pointer group relative p-8 bg-white/10 rounded-xl border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 bg-yellow-500/20 text-yellow-300 rounded-lg p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-6 0h6"></path></svg>
                        </div>
                        <h3 class="ml-4 text-xl font-bold text-white">Credenciales</h3>
                    </div>
                    <p class="mt-4 text-gray-300">Encuentra todos los formularios y requisitos para la acreditaci√≥n de personal.</p>
                    <span class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">‚Üí</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Our Work Section -->
    <section id="nuestra-labor" class="py-16 md:py-24 bg-white">
        <div class="max-w-6xl mx-auto px-2 sm:px-6 lg:px-8">
            <div class="text-center">
                <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">Nuestra Labor</h2>
                <p class="mt-4 text-lg leading-8 text-gray-600">Comprometidos con la fiscalizaci√≥n y el control de la seguridad privada en la regi√≥n.</p>
            </div>
            <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Mission -->
                <div class="elegant-card">
                    <div>
                        <h4 class="text-2xl font-semibold text-gray-900">Misi√≥n</h4>
                        <p class="mt-2 text-xs sm:text-sm leading-relaxed text-gray-600 text-justify">El OS10 Coquimbo ejerce la fiscalizaci√≥n, control y supervisi√≥n de las personas naturales y jur√≠dicas que desarrollan actividades de vigilancia y seguridad privada en el territorio de la Regi√≥n de Coquimbo, en conformidad con las disposiciones legales vigentes que se encomienda a Carabineros de Chile. Nuestra responsabilidad abarca la autorizaci√≥n, capacitaci√≥n, certificaci√≥n y acreditaci√≥n de los actores del sistema de seguridad privada, as√≠ como la aprobaci√≥n de estudios de seguridad, planes de seguridad, medidas de seguridad y directivas de funcionamiento, con el objetivo fundamental de contribuir eficazmente a la seguridad p√∫blica mediante la prevenci√≥n de hechos delictuales y la protecci√≥n de personas y bienes.</p>
                    </div>
                </div>
                <!-- Vision -->
                <div class="elegant-card">
                    <div>
                        <h4 class="text-2xl font-semibold text-gray-900">Visi√≥n</h4>
                        <p class="mt-2 text-xs sm:text-sm leading-relaxed text-gray-600 text-justify">Consolidarnos como un organismo especializado de excelencia en la gesti√≥n, fiscalizaci√≥n y control de la seguridad privada a nivel nacional, ser reconocidos por nuestro profesionalismo, eficiencia y compromiso con la legalidad. Aspiramos a ser un referente t√©cnico que, mediante una estructura organizacional s√≥lida, procesos estandarizados y el uso de inteligencia artificial avanzada, brinde atenci√≥n r√°pida y de calidad en materias de seguridad privada, promoviendo el desarrollo de un sistema √≠ntegro y competente que contribuya significativamente al fortalecimiento de la seguridad p√∫blica en la Regi√≥n de Coquimbo y sirva como modelo tecnol√≥gico e innovador para otras oficinas similares a nivel nacional.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<!-- ========= END OF NEW SECTIONS ========= -->


<!-- ========= NEW FOOTER START ========= -->
<footer id="main-footer" class="bg-[#146314] backdrop-blur-sm text-gray-300">
    <div class="max-w-7xl mx-auto py-12 px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Col 1: Logo and About -->
            <div>
                <h3 class="text-lg font-semibold text-white">O.S.10 Coquimbo</h3>
                <p class="mt-2 text-sm">Prefectura de Coquimbo.</p>
            </div>
            <!-- Col 2: Contact -->
            <div>
                <h3 class="text-lg font-semibold text-white">Contacto</h3>
                <ul class="mt-4 space-y-2 text-sm">
                    <li>
                        <a href="tel:+56512651024" class="hover:text-white">+56 51 265 1024</a>
                    </li>
                    <li>
                        <a href="mailto:os10.coquimbo@carabineros.cl" class="hover:text-white">os10.coquimbo@carabineros.cl</a>
                    </li>
                </ul>
            </div>
            <!-- Col 3: Address -->
            <div>
                <h3 class="text-lg font-semibold text-white">Direcci√≥n</h3>
                <p class="mt-4 text-sm">Calle Cienfuegos 180, La Serena, regi√≥n de Coquimbo.</p>
            </div>
        </div>
        <div class="mt-8 border-t border-gray-700 pt-8 text-center text-sm">
            <p>¬© 2025 Prefectura de Coquimbo, O.S.10. Todos los derechos reservados.</p>
            <p class="mt-1">Plataforma desarrollada por Daniel Figueroa Ch. - Ingeniero en Inform√°tica</p>
        </div>
    </div>
</footer>
<!-- ========= NEW FOOTER END ========= -->


<div id="chat-widget-container">
    <div id="chat-popup" class="hidden flex flex-col bg-white/95 backdrop-blur-lg border border-green-500/50 rounded-2xl">
        <header class="p-3 border-b border-green-500/30 flex items-center justify-between text-gray-800">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full bg-white border-2 border-green-400/80 flex items-center justify-center flex-shrink-0 p-1">
                    <img src="assets/images/poli.png" alt="Bot Icon" class="h-full w-full object-contain" width="40" height="40" loading="lazy">
                </div>
                <div>
                    <h1 class="text-base font-bold">Asistente O.S.10</h1>
                    <p class="text-xs text-gray-500">O.S.10 Coquimbo.üëç‚úÖ</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <select id="voiceSelector" class="voice-selector text-xs">
                    <option value="Diego">Diego</option>
                    <option value="Antoni">Antoni</option>
                    <option value="Josh">Josh</option>
                    <option value="Adam">Adam</option>
                    <option value="Alejandro" selected>Alejandro</option>
                </select>
                
                <button id="speak-btn" class="voice-button bg-green-500 hover:bg-green-600 rounded-lg p-2 text-white" title="Leer √∫ltimo mensaje">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                    </svg>
                </button>
                <button id="chat-close-btn-internal" class="text-gray-500 hover:text-gray-800">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </header>
        <main id="chat-messages" class="chat-messages-container flex-1 p-4 overflow-y-auto"></main>
        <footer class="p-3 border-t border-green-500/30">
            <div class="mb-2 text-xs text-center text-gray-500"><span>Alt+V para micr√≥fono</span></div>
            <div class="flex items-center space-x-2 bg-gray-200 rounded-xl p-2">
                <button id="toggle-speak-btn" class="voice-button bg-yellow-500 hover:bg-yellow-600 rounded-lg p-2 text-white" title="Activar/Desactivar Auto-lectura">
                    <svg id="speaker-on-icon" class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z" />
                    </svg>
                    <svg id="speaker-off-icon" class="w-5 h-5 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l-2.25 2.25M19.5 12l2.25-2.25M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z" />
                    </svg>
                </button>
                <button id="voice-btn" class="voice-button bg-blue-500 hover:bg-blue-600 rounded-lg p-2 text-white" title="Hablar">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3Z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" x2="12" y1="19" y2="23"/>
                        <line x1="8" x2="16" y1="23" y2="23"/>
                    </svg>
                </button>
                <input type="text" id="user-input" placeholder="Escribe o usa el micr√≥fono..." class="flex-1 w-full bg-transparent text-gray-800 placeholder-gray-500 focus:outline-none px-2 text-base">
                <button id="send-button" class="flex-shrink-0 bg-green-500 hover:bg-green-600 transition-colors rounded-lg p-2 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </footer>
    </div>
    
    <button id="chat-toggle-button" class="bg-white rounded-2xl flex items-center justify-center p-1 mt-4" title="Abrir Asistente Virtual con Voces Modernas">
        <span id="chatbot-tooltip" class="absolute hidden bg-white text-gray-800 text-sm font-bold px-3 py-2 rounded-lg shadow-lg">
            Abrir Chatbot
        </span>
        <img src="assets/images/poli.png" alt="Chatbot Icon" class="h-full w-full object-contain" width="80" height="80" loading="lazy">
    </button>
</div>
<div id="chat-backdrop" class="hidden fixed inset-0 bg-black/60 z-40"></div>

<button id="back-to-top" class="hidden fixed bottom-5 right-5 bg-transparent text-black p-2 rounded-full shadow-lg hover:bg-gray-200 transition-colors z-[1050]">
  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
</button>

<!-- =================================================================== -->
<!-- SCRIPTS AT THE END OF BODY FOR NON-BLOCKING LOAD                  -->
<!-- =================================================================== -->
<script src="assets/js/inicio.js?v=2" defer></script>
<script src="assets/js/main.js" defer></script>

<script type="module">
    // FIREBASE SCRIPT (Visit Counter)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getFirestore, doc, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBB2AegLOQ-b6ZGI_cuPycSFJFuRsUlu5U",
      authDomain: "cuenta-946e2.firebaseapp.com",
      projectId: "cuenta-946e2",
      storageBucket: "cuenta-946e2.appspot.com",
      messagingSenderId: "816979648502",
      appId: "1:816979648502:web:809beffeea8ba7968031d7",
      measurementId: "G-RX9KZSC0F4"
    };
    
    async function runCounter() {
        const counterSpan = document.getElementById('visit-counter');
        try {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            const auth = getAuth(app);
            await signInAnonymously(auth); // Sign in anonymously for visit counter
            
            const counterRef = doc(db, `page-visits/${firebaseConfig.projectId}/visits/counter`);
            const newCount = await runTransaction(db, async (transaction) => {
                const counterDoc = await transaction.get(counterRef);
                let count = 1;
                if (counterDoc.exists()) {
                    count = counterDoc.data().count + 1;
                    transaction.update(counterRef, { count: count });
                } else {
                    transaction.set(counterRef, { count: count });
                }
                return count;
            });
            if (counterSpan) counterSpan.textContent = newCount.toLocaleString('es-CL');
        } catch (error) {
            console.error("ERROR: Counter process failed.", error);
            if (counterSpan) counterSpan.textContent = "Error";
        }
    }
    runCounter();
</script>

<!-- =================================================================== -->
<!-- SOLUCI√ìN FOUC (Flash Of Unstyled Content) - CORREGIDA               -->
<!-- 2. Usamos 'window.onload' para garantizar que TODO est√© cargado.    -->
<!-- =================================================================== -->
<script>
    window.addEventListener('load', () => {
        // El evento 'load' se dispara despu√©s de que todos los recursos (CSS, JS, im√°genes)
        // se hayan cargado por completo. Esto asegura que Tailwind haya terminado de 
        // generar los estilos antes de que mostremos la p√°gina.
        document.body.style.visibility = 'visible';
        document.body.style.opacity = '1';
    });
</script>

<!-- Notification script -->
<script>
    // Se mueve este listener para que no haya dos 'DOMContentLoaded'
    // y se asegura que el script principal de visibilidad se ejecute sin interferencia.
    document.addEventListener('DOMContentLoaded', () => {
        const banner = document.getElementById('notification-banner');
        if (banner) {
            setTimeout(() => {
                banner.classList.add('show');
            }, 1000);
            setTimeout(() => {
                banner.classList.remove('show');
            }, 9000); 
        }
    });
</script>

<script src="./rules/chatbot-rules.js" defer></script>
<script src="assets/js/chatbot.js" defer></script>
<!-- Service Worker Registration -->
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then((registration) => {
                    console.log('‚úÖ SW registered: ', registration);
                })
                .catch((registrationError) => {
                    console.error('‚ùå SW registration failed: ', registrationError);
                });
        });
    }
</script>
</body>
</html>
